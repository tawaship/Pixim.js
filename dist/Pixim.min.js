/*!
 * @tawaship/pixim.js - v1.11.3
 * 
 * @require pixi.js v^5.3.2
 * @require howler.js v^2.2.0 (If use sound)
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
!function(t,e,i){"use strict";window.console.log("%c pixim.js%cv1.11.3 %c","color: #FFF; background: #03F; padding: 5px; border-radius:12px 0 0 12px; margin-top: 5px; margin-bottom: 5px;","color: #FFF; background: #F33; padding: 5px;  border-radius:0 12px 12px 0;","padding: 5px;");
/*!
 * @tawaship/emitter - v3.1.1
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var r=function(){this._events={}};r.prototype._on=function(t,e,i){if(!t||!e)return this;for(var r=this._events[t]=this._events[t]||[],n=0;n<r.length;n++)if(r[n].callback===e)return this;return r.push({callback:e,once:i}),this},r.prototype.on=function(t,e){return this._on(t,e,!1)},r.prototype.once=function(t,e){return this._on(t,e,!0)},r.prototype.off=function(t,e){if(!t||!e)return this;for(var i=this._events[t]||[],r=0;r<i.length;r++)if(i[r].callback===e)return i.splice(r,1),this;return this},r.prototype._emit=function(t,e){for(var i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];if(!t)return this;for(var n=this._events[t]||[],a=[],o=n.length-1;o>=0;o--){var s=n[o];s.once&&n.splice(o,1),a.push(s)}for(var p=a.length-1;p>=0;p--)a[p].callback.apply(e,i);return this},r.prototype.emit=function(t){for(var e,i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];return(e=this)._emit.apply(e,[t,this].concat(i))},r.prototype.cemit=function(t,e){for(var i,r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return(i=this)._emit.apply(i,[t,e].concat(r))},r.prototype._emitAll=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(null==t)return this;var r=[];for(var n in this._events)for(var a=this._events[n]||[],o=a.length-1;o>=0;o--){var s=a[o];s.once&&a.splice(o,1),r.push(s)}for(var p=r.length-1;p>=0;p--)r[p].callback.apply(t,e);return this},r.prototype.emitAll=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];return(t=this)._emitAll.apply(t,[this].concat(e))},r.prototype.cemitAll=function(t){for(var e,i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];return(e=this)._emitAll.apply(e,[t].concat(i))},r.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this};var n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r),a=function(t,e){this._taskData={context:null==e?this:e,enabled:!0,index:-1,callbacks:[],value:null},this.add(t)},o={enabled:{configurable:!0},value:{configurable:!0}};
/*!
 * @tawaship/task - v1.1.0
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */o.enabled.get=function(){return this._taskData.enabled},o.enabled.set=function(t){this._taskData.enabled=t},a.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var e=this._taskData.callbacks,i=(e.length,0);i<t.length;i++)t[i]instanceof Function&&e.push(t[i]);return this},a.prototype.done=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(this._taskData.enabled){var i=this._taskData.callbacks[this._taskData.index];if(i)return this._taskData.value=i.apply(this._taskData.context,t)}},a.prototype._to=function(t){return this._taskData.index=Number(t),this},a.prototype.first=function(){return this._to(0)},a.prototype.prev=function(){return this._to(this._taskData.index-1)},a.prototype.next=function(){return this._to(this._taskData.index+1)},a.prototype.to=function(t){return this._to(t)},a.prototype.finish=function(){return this._taskData.index=-1,this},a.prototype.reset=function(){return this._taskData.callbacks=[],this._taskData.index=-1,this._taskData.value=null,this},a.prototype.destroy=function(){this.reset()},o.value.get=function(){return this._taskData.value},Object.defineProperties(a.prototype,o);var s=function(t){function e(e,i){t.call(this,e,i),this.enabled=!0,this._piximData={emitter:new n}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.on=function(t,e){return this._piximData.emitter.on(t,e),this},e.prototype.once=function(t,e){return this._piximData.emitter.once(t,e),this},e.prototype.off=function(t,e){return this._piximData.emitter.off(t,e),this},e.prototype.emit=function(t){for(var e,i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];return this._taskData.enabled?((e=this._piximData.emitter).emit.apply(e,[t].concat(i)),this):this},e.prototype.cemit=function(t,e){for(var i,r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return this._taskData.enabled?((i=this._piximData.emitter).cemit.apply(i,[t,e].concat(r)),this):this},e.prototype.emitAll=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];return this._taskData.enabled?((t=this._piximData.emitter).emitAll.apply(t,e),this):this},e.prototype.cemitAll=function(t){for(var e,i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];return this._taskData.enabled?((e=this._piximData.emitter).cemitAll.apply(e,[t].concat(i)),this):this},e.prototype.clear=function(t){return void 0===t&&(t=""),this._piximData.emitter.clear(t),this},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clear()},e}(a),p=function(t){function e(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.call(this),this._piximData={task:new s([],this),taskEnabledChildren:!0},this._piximData.task.first()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={taskEnabled:{configurable:!0},taskEnabledChildren:{configurable:!0},task:{configurable:!0}};return e.prototype.updateTask=function(t){var e=this._piximData.task;this._piximData.task.enabled&&(e.done(t),e.cemitAll(this,t))},i.taskEnabled.get=function(){return this._piximData.task.enabled},i.taskEnabled.set=function(t){this._piximData.task.enabled=t},i.taskEnabledChildren.get=function(){return this._piximData.taskEnabledChildren},i.taskEnabledChildren.set=function(t){this._piximData.taskEnabledChildren=t},i.task.get=function(){return this._piximData.task},e.prototype.destroy=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.prototype.destroy.apply(this,e),this._piximData.task.destroy()},Object.defineProperties(e.prototype,i),e}(e.Container),h=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.Container);function u(t,i){if(!(t instanceof p)||(t.updateTask(i),t.taskEnabledChildren)){for(var r=[],n=0;n<t.children.length;n++)r.push(t.children[n]);for(var a=0;a<r.length;a++){var o=r[a];o instanceof e.Container&&u(o,i)}}}var c=function(t){function i(i,r){var n=this;void 0===i&&(i={}),void 0===r&&(r={}),t.call(this);var a=new e.Application(i);a.stop(),a.view.style.position="absolute";var o=r.autoAdjust||!1;this._piximData={isRun:!1,app:a,container:r.container||document.body,layers:{},autoAdjuster:null,roots:{},contents:{}},this._piximData.app.ticker.add((function(t){u(n._piximData.app.stage,{delta:t})})),o&&(this.autoAdjuster=!0===o?function(){n.fullScreen()}:function(){o(n)})}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={app:{configurable:!0},stage:{configurable:!0},view:{configurable:!0},container:{configurable:!0},autoAdjuster:{configurable:!0}};return r.app.get=function(){return this._piximData.app},r.stage.get=function(){return this._piximData.app.stage},r.view.get=function(){return this._piximData.app.view},r.container.get=function(){return this._piximData.container},r.container.set=function(t){this._piximData.container=t||document.body,this._piximData.app.view.parentNode&&this._piximData.container.appendChild(this._piximData.app.view)},i.prototype._hasLayer=function(t){return!!this._piximData.layers[t]},i.prototype.addLayer=function(t){return this._hasLayer(t)||(this._piximData.layers[t]=this._piximData.app.stage.addChild(new h)),this},i.prototype.removeLayer=function(t){return this._hasLayer(t)?(this._piximData.app.stage.removeChild(this._piximData.layers[t]),delete this._piximData.layers[t],this):this},i.prototype.attachAsync=function(t,e){var i=this;return void 0===e&&(e="anonymous"),t.buildAsync().then((function(r){return i.detach(t),i.addLayer(e),i._piximData.roots[t.contentID]=r,i._piximData.contents[t.contentID]=t,i._piximData.layers[e].addChild(r),r}))},i.prototype.detach=function(t,e){void 0===e&&(e={children:!0});var i=this._piximData.roots[t.contentID];return i?(this._destroyRoot(i,e),delete this._piximData.roots[t.contentID],delete this._piximData.contents[t.contentID],this):this},i.prototype.play=function(){return this._piximData.container.appendChild(this._piximData.app.view),this.start()},i.prototype.start=function(){return this._piximData.app.start(),this},i.prototype.stop=function(){return this._piximData.app.stop(),this},i.prototype.pause=function(t){return t?this.stop():this.start(),this},r.autoAdjuster.get=function(){return this._piximData.autoAdjuster},r.autoAdjuster.set=function(t){this._piximData.autoAdjuster&&window.removeEventListener("resize",this._piximData.autoAdjuster),t?(this._piximData.autoAdjuster=t,window.addEventListener("resize",t),t()):this._piximData.autoAdjuster=null},i.prototype.preDestroy=function(){for(var t in this._piximData.contents)this._piximData.contents[t].destroy();this.autoAdjuster=null,this._piximData.layers={},this._piximData.roots={},this._piximData.contents={}},i.prototype.destroy=function(t,e){return this.preDestroy(),this._piximData.app.destroy(t,e),this},i.prototype._destroyRoot=function(t,e){t.destroy(e)},i.prototype.fullScreen=function(t){var e=this._piximData.app.view,i=t||{x:0,y:0,width:this._piximData.container.offsetWidth||window.innerWidth,height:this._piximData.container.offsetHeight||window.innerHeight};return i.width/i.height>e.width/e.height?this.adjustHeight(i.height).toCenter(i).toTop(i):this.adjustWidth(i.width).toMiddle(i).toLeft(i)},i.prototype.adjustWidth=function(t){var e=this._piximData.app.view,i=t||this._piximData.container.offsetWidth||window.innerWidth,r=i/e.width*e.height;return e.style.width=i+"px",e.style.height=r+"px",this},i.prototype.adjustHeight=function(t){var e=this._piximData.app.view,i=t||this._piximData.container.offsetHeight||window.innerHeight,r=i/e.height*e.width;return e.style.height=i+"px",e.style.width=r+"px",this},i.prototype.toLeft=function(t){var e=this._piximData.app.view,i=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=i.x+"px",this},i.prototype.toCenter=function(t){var e=this._piximData.app.view,i=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=(i.width-this._getViewRect().width)/2+i.x+"px",this},i.prototype.toRight=function(t){var e=this._piximData.app.view,i=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=i.width-this._getViewRect().width+i.x+"px",this},i.prototype.toTop=function(t){var e=this._piximData.app.view,i=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=i.y+"px",this},i.prototype.toMiddle=function(t){var e=this._piximData.app.view,i=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=(i.height-this._getViewRect().height)/2+i.y+"px",this},i.prototype.toBottom=function(t){var e=this._piximData.app.view,i=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=i.height-this._getViewRect().height+i.y+"px",this},i.prototype._getViewRect=function(){var t=this._piximData.app.view;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(i.prototype,r),i}(n),f=function(){this._manifests={}};f.prototype.add=function(t,e){void 0===e&&(e={});var i=e.unrequired||!1;for(var r in t)this._manifests[r]={data:t[r],unrequired:i}},f.prototype.getAsync=function(t,e,i){var r={};return 0===Object.keys(this._manifests).length?Promise.resolve(r):this._loadAsync(t,e,i).then((function(t){for(var e in t)r[e]=t[e].resource;return r}))},f.prototype._resolvePath=function(t,i){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:e.utils.url.resolve(i,t)};var d=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t,i,r){var n=this._manifests,a=new e.Loader;for(var o in i&&(a.defaultQueryString="_fv="+i),n){var s=n[o];s.data=this._resolvePath(s.data,t),a.add(o,s.data,{crossOrigin:!0})}return r||a.use((function(t,i){t.texture&&(e.Texture.removeFromCache(t.texture),t.texture.baseTexture&&e.BaseTexture.removeFromCache(t.texture.baseTexture)),i()})),new Promise((function(t,e){var i={};a.load((function(r,a){var o,s;for(var p in a){var h=a[p];if(!h)return void e((o={},o[p]=n[p].data,o));if(h.error&&!n[p].unrequired)return void e((s={},s[p]=n[p].data,s));i[p]={resource:h.texture,error:!!h.error}}t(i)}))}))},i.prototype.destroyResources=function(t){},i}(f),l=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t,i,r){var n=this._manifests,a=new e.Loader;for(var o in i&&(a.defaultQueryString="_fv="+i),n){var s=n[o];s.data=this._resolvePath(s.data,t),a.add(o,s.data,{crossOrigin:!0})}return r||a.use((function(t,i){if(t.textures)for(var r in t.textures){var n=t.textures[r];n&&(e.Texture.removeFromCache(n),n.baseTexture&&e.BaseTexture.removeFromCache(n.baseTexture))}t.texture&&(e.Texture.removeFromCache(t.texture),t.texture.baseTexture&&e.BaseTexture.removeFromCache(t.texture.baseTexture)),i()})),new Promise((function(t,e){var i={};a.load((function(r,a){var o,s;for(var p in a)if(n[p]){var h=a[p];if(!h)return void e((o={},o[p]=n[p].data,o));var u=h.textures||{};h.error;if(h.error&&!n[p].unrequired)return void e((s={},s[p]=n[p].data,s));i[p]={resource:u,error:!!h.error}}t(i)}))}))},i.prototype.destroyResources=function(t){},i}(f),_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e,r){var n=this,a=this._manifests;return new Promise((function(r,o){var s,p={};function h(t,e,i){p[t]={resource:e,error:i},++c<u||r(p)}var u=0,c=0;for(var f in a){if(!i.Howl)return console.warn('You need "howler.js" to load sound asset.'),void o((s={},s[f]=a[f].data,s));++u}var d=function(r){var s=l,p=a[s];p.data=n._resolvePath(p.data,t);var u=e?p.data+(p.data.match(/\?/)?"&":"?")+"_fv="+e:p.data,c=new i.Howl({src:u,onload:function(){h(s,c,!1)},onloaderror:function(){var t;p.unrequired?h(s,c,!0):o(((t={})[s]=p.data,t))}})};for(var l in a)d()}))},e.prototype.destroyResources=function(t){for(var e in t)t[e].stop(),t[e].unload()},e}(f),y=function(t){this._piximData={width:t.width,height:t.height,lib:t.lib,resources:t.resources,vars:t.vars}},m={width:{configurable:!0},height:{configurable:!0},lib:{configurable:!0},resources:{configurable:!0},vars:{configurable:!0}};m.width.get=function(){return this._piximData.width},m.height.get=function(){return this._piximData.height},m.lib.get=function(){return this._piximData.lib},m.resources.get=function(){return this._piximData.resources},m.vars.get=function(){return this._piximData.vars},Object.defineProperties(y.prototype,m);var v={},x=0;function D(){var t={};for(var e in g)t[e]=new g[e];return t}var g={},w=function t(e,i){void 0===e&&(e={}),void 0===i&&(i=t._piximData);var r=(e.basepath||"").replace(/([^/])$/,"$1/");if("object"!=typeof e.version){var n={},a=e.version||"";for(var o in g)n[o]=a;e.version=n}if("object"!=typeof e.useCache){var s={},p=e.useCache||!1;for(var h in g)s[h]=p;e.useCache=s}var u={width:i.config.width,height:i.config.height,lib:i.lib,resources:{},vars:{}};this._piximData={contentID:(++x).toString(),basepath:r,version:e.version,useCache:e.useCache||!1,$:new y(u),manifests:i.manifests,additionalManifests:D(),preloadPromise:null,postloadPromise:null,contentDeliverData:u}},b={contentID:{configurable:!0}};w.registerManifest=function(t,e){g[t]=e},w.create=function(t){if(void 0===t&&(t=""),t&&t in v)throw new Error("Content key '"+t+"' has already exists.");var e=function(t){function e(i){void 0===i&&(i={}),t.call(this,i,e._piximData)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(w);return e._piximData={config:{width:450,height:800},manifests:D(),lib:{}},t?v[t]=e:e},w.get=function(t){return v[t]},w.remove=function(t){delete v[t]},w.defineManifests=function(t,e,i){return void 0===i&&(i={}),this._piximData.manifests[t]?(this._piximData.manifests[t].add(e,i),this):(console.warn("Manifest '"+t+"' is not registered."),this)},w.defineImages=function(t,e){return void 0===e&&(e={}),this.defineManifests("images",t,e)},w.defineSpritesheets=function(t,e){return void 0===e&&(e={}),this.defineManifests("spritesheets",t,e)},w.defineSounds=function(t,e){return void 0===e&&(e={}),this.defineManifests("sounds",t,e)},w.setConfig=function(t){return this._piximData.config.width=t.width,this._piximData.config.height=t.height,this},w.defineLibraries=function(t){for(var e in t)this._piximData.lib[e]=t[e];return this},b.contentID.get=function(){return this._piximData.contentID},w.prototype.addManifests=function(t,e,i){return void 0===i&&(i={}),this._piximData.additionalManifests[t]?(this._piximData.additionalManifests[t].add(e,i),this):(console.warn("Manifest '"+t+"' is not registered."),this)},w.prototype.addImages=function(t,e){return void 0===e&&(e={}),this.addManifests("images",t,e)},w.prototype.addSpritesheets=function(t,e){return void 0===e&&(e={}),this.addManifests("spritesheets",t,e)},w.prototype.addSounds=function(t,e){return void 0===e&&(e={}),this.addManifests("sounds",t,e)},w.prototype.addVars=function(t){for(var e in t)this._piximData.$.vars[e]=t[e];return this},w.prototype.prepareAsync=function(){var t=this;return this.preloadClassAssetAsync().then((function(){return t.preloadInstanceAssetAsync()}))},w.prototype.buildAsync=function(){var t=this;if(!this._piximData.$.lib.root)throw new Error('There is no library named "root" in the content.');return this.prepareAsync().then((function(){return new t._piximData.$.lib.root(t._piximData.$)}))},w.prototype.preloadClassAssetAsync=function(){var t=this;return this._piximData.preloadPromise?this._piximData.preloadPromise:this._piximData.preloadPromise=this._loadAssetAsync(this._piximData.manifests).catch((function(e){throw t._piximData.preloadPromise=null,e}))},w.prototype.preloadInstanceAssetAsync=function(){var t=this;return this._piximData.postloadPromise?this._piximData.postloadPromise:this._piximData.postloadPromise=this._loadAssetAsync(this._piximData.additionalManifests).then((function(){t._piximData.postloadPromise=null})).catch((function(e){throw t._piximData.postloadPromise=null,e}))},w.prototype.destroy=function(){var t=this._piximData.contentDeliverData;t.lib={},t.vars={};var e=t.resources,i=this._piximData.manifests;for(var r in e)r in i&&i[r].destroyResources(e[r]),e[r]={}},w.prototype._loadAssetAsync=function(t){var e=this._piximData.basepath,i=this._piximData.version,r=this._piximData.useCache,n=this._piximData.$.resources;if(0===Object.keys(t).length)return Promise.resolve();var a=[],o=[];for(var s in t){var p=s;o.push(p),a.push(t[p].getAsync(e,i[p]||"",r[p]||!1))}return Promise.all(a).then((function(t){for(var e=0;e<t.length;e++)for(var i in n[o[e]]=n[o[e]]||{},t[e])n[o[e]][i]=t[e][i]})).catch((function(t){for(var e in t)console.error("Asset '"+e+": "+t[e]+"' cannot load.");throw t}))},Object.defineProperties(w.prototype,b),w.registerManifest("images",d),w.registerManifest("spritesheets",l),w.registerManifest("sounds",_),t.Application=c,t.Container=p,t.Content=w,t.ContentDeliver=y,t.ContentImageManifest=d,t.ContentManifestBase=f,t.ContentSoundManifest=_,t.ContentSpritesheetManifest=l,t.Emitter=n,t.Layer=h,t.Task=s}(this.Pixim=this.Pixim||{},PIXI,{Howl:"undefined"==typeof Howl?null:Howl});//# sourceMappingURL=Pixim.min.js.map
