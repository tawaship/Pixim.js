/*!
 * @tawaship/pixim.js - v1.12.2
 * 
 * @require pixi.js v^5.3.2
 * @require howler.js v^2.2.0 (If use sound)
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
!function(t,e,r){"use strict";window.console.log("%c pixim.js%cv1.12.2 %c","color: #FFF; background: #03F; padding: 5px; border-radius:12px 0 0 12px; margin-top: 5px; margin-bottom: 5px;","color: #FFF; background: #F33; padding: 5px;  border-radius:0 12px 12px 0;","padding: 5px;");
/*!
 * @tawaship/emitter - v3.1.1
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var i=function(){this._events={}};i.prototype._on=function(t,e,r){if(!t||!e)return this;for(var i=this._events[t]=this._events[t]||[],n=0;n<i.length;n++)if(i[n].callback===e)return this;return i.push({callback:e,once:r}),this},i.prototype.on=function(t,e){return this._on(t,e,!1)},i.prototype.once=function(t,e){return this._on(t,e,!0)},i.prototype.off=function(t,e){if(!t||!e)return this;for(var r=this._events[t]||[],i=0;i<r.length;i++)if(r[i].callback===e)return r.splice(i,1),this;return this},i.prototype._emit=function(t,e){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];if(!t)return this;for(var n=this._events[t]||[],o=[],a=n.length-1;a>=0;a--){var s=n[a];s.once&&n.splice(a,1),o.push(s)}for(var u=o.length-1;u>=0;u--)o[u].callback.apply(e,r);return this},i.prototype.emit=function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return(e=this)._emit.apply(e,[t,this].concat(r))},i.prototype.cemit=function(t,e){for(var r,i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];return(r=this)._emit.apply(r,[t,e].concat(i))},i.prototype._emitAll=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(null==t)return this;var i=[];for(var n in this._events)for(var o=this._events[n]||[],a=o.length-1;a>=0;a--){var s=o[a];s.once&&o.splice(a,1),i.push(s)}for(var u=i.length-1;u>=0;u--)i[u].callback.apply(t,e);return this},i.prototype.emitAll=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];return(t=this)._emitAll.apply(t,[this].concat(e))},i.prototype.cemitAll=function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return(e=this)._emitAll.apply(e,[t].concat(r))},i.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this};var n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i),o=function(t,e){this._taskData={context:null==e?this:e,enabled:!0,index:-1,callbacks:[],value:null},this.add(t)},a={enabled:{configurable:!0},value:{configurable:!0}};
/*!
 * @tawaship/task - v1.1.0
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */a.enabled.get=function(){return this._taskData.enabled},a.enabled.set=function(t){this._taskData.enabled=t},o.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var e=this._taskData.callbacks,r=(e.length,0);r<t.length;r++)t[r]instanceof Function&&e.push(t[r]);return this},o.prototype.done=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(this._taskData.enabled){var r=this._taskData.callbacks[this._taskData.index];if(r)return this._taskData.value=r.apply(this._taskData.context,t)}},o.prototype._to=function(t){return this._taskData.index=Number(t),this},o.prototype.first=function(){return this._to(0)},o.prototype.prev=function(){return this._to(this._taskData.index-1)},o.prototype.next=function(){return this._to(this._taskData.index+1)},o.prototype.to=function(t){return this._to(t)},o.prototype.finish=function(){return this._taskData.index=-1,this},o.prototype.reset=function(){return this._taskData.callbacks=[],this._taskData.index=-1,this._taskData.value=null,this},o.prototype.destroy=function(){this.reset()},a.value.get=function(){return this._taskData.value},Object.defineProperties(o.prototype,a);var s=function(t){function e(e,r){t.call(this,e,r),this.enabled=!0,this._piximData={emitter:new n}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.on=function(t,e){return this._piximData.emitter.on(t,e),this},e.prototype.once=function(t,e){return this._piximData.emitter.once(t,e),this},e.prototype.off=function(t,e){return this._piximData.emitter.off(t,e),this},e.prototype.emit=function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return this._taskData.enabled?((e=this._piximData.emitter).emit.apply(e,[t].concat(r)),this):this},e.prototype.cemit=function(t,e){for(var r,i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];return this._taskData.enabled?((r=this._piximData.emitter).cemit.apply(r,[t,e].concat(i)),this):this},e.prototype.emitAll=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];return this._taskData.enabled?((t=this._piximData.emitter).emitAll.apply(t,e),this):this},e.prototype.cemitAll=function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return this._taskData.enabled?((e=this._piximData.emitter).cemitAll.apply(e,[t].concat(r)),this):this},e.prototype.clear=function(t){return void 0===t&&(t=""),this._piximData.emitter.clear(t),this},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clear()},e}(o),u=function(t){function e(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];t.call(this),this._piximData={task:new s([],this),taskEnabledChildren:!0},this._piximData.task.first()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={taskEnabled:{configurable:!0},taskEnabledChildren:{configurable:!0},task:{configurable:!0}};return e.prototype.updateTask=function(t){var e=this._piximData.task;this._piximData.task.enabled&&(e.done(t),e.cemitAll(this,t))},r.taskEnabled.get=function(){return this._piximData.task.enabled},r.taskEnabled.set=function(t){this._piximData.task.enabled=t},r.taskEnabledChildren.get=function(){return this._piximData.taskEnabledChildren},r.taskEnabledChildren.set=function(t){this._piximData.taskEnabledChildren=t},r.task.get=function(){return this._piximData.task},e.prototype.destroy=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];t.prototype.destroy.apply(this,e),this._piximData.task.destroy()},Object.defineProperties(e.prototype,r),e}(e.Container),p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.Container);function c(t,r){if(!(t instanceof u)||(t.updateTask(r),t.taskEnabledChildren)){for(var i=[],n=0;n<t.children.length;n++)i.push(t.children[n]);for(var o=0;o<i.length;o++){var a=i[o];a instanceof e.Container&&c(a,r)}}}var h=function(t){function r(r,i){var n=this;void 0===r&&(r={}),void 0===i&&(i={}),t.call(this);var o=new e.Application(r);o.stop(),o.view.style.position="absolute";var a=i.autoAdjust||!1;this._piximData={isRun:!1,app:o,container:i.container||document.body,layers:{},autoAdjuster:null,roots:{},contents:{}},this._piximData.app.ticker.add((function(t){c(n._piximData.app.stage,{delta:t})})),a&&(this.autoAdjuster=!0===a?function(){n.fullScreen()}:function(){a(n)})}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={app:{configurable:!0},stage:{configurable:!0},view:{configurable:!0},container:{configurable:!0},autoAdjuster:{configurable:!0}};return i.app.get=function(){return this._piximData.app},i.stage.get=function(){return this._piximData.app.stage},i.view.get=function(){return this._piximData.app.view},i.container.get=function(){return this._piximData.container},i.container.set=function(t){this._piximData.container=t||document.body,this._piximData.app.view.parentNode&&this._piximData.container.appendChild(this._piximData.app.view)},r.prototype._hasLayer=function(t){return!!this._piximData.layers[t]},r.prototype.addLayer=function(t){return this._hasLayer(t)||(this._piximData.layers[t]=this._piximData.app.stage.addChild(new p)),this},r.prototype.removeLayer=function(t){return this._hasLayer(t)?(this._piximData.app.stage.removeChild(this._piximData.layers[t]),delete this._piximData.layers[t],this):this},r.prototype.attachAsync=function(t,e){var r=this;return void 0===e&&(e="anonymous"),t.buildAsync().then((function(i){return r.detach(t),r.addLayer(e),r._piximData.roots[t.contentID]=i,r._piximData.contents[t.contentID]=t,r._piximData.layers[e].addChild(i),i}))},r.prototype.detach=function(t,e){void 0===e&&(e={children:!0});var r=this._piximData.roots[t.contentID];return r?(this._destroyRoot(r,e),delete this._piximData.roots[t.contentID],delete this._piximData.contents[t.contentID],this):this},r.prototype.play=function(){return this._piximData.container.appendChild(this._piximData.app.view),this.start()},r.prototype.start=function(){return this._piximData.app.start(),this},r.prototype.stop=function(){return this._piximData.app.stop(),this},r.prototype.pause=function(t){return t?this.stop():this.start(),this},i.autoAdjuster.get=function(){return this._piximData.autoAdjuster},i.autoAdjuster.set=function(t){this._piximData.autoAdjuster&&window.removeEventListener("resize",this._piximData.autoAdjuster),t?(this._piximData.autoAdjuster=t,window.addEventListener("resize",t),t()):this._piximData.autoAdjuster=null},r.prototype.preDestroy=function(){for(var t in this._piximData.contents)this._piximData.contents[t].destroy();this.autoAdjuster=null,this._piximData.layers={},this._piximData.roots={},this._piximData.contents={}},r.prototype.destroy=function(t,e){return this.preDestroy(),this._piximData.app.destroy(t,e),this},r.prototype._destroyRoot=function(t,e){t.destroy(e)},r.prototype.fullScreen=function(t){var e=this._piximData.app.view,r=t||{x:0,y:0,width:this._piximData.container.offsetWidth||window.innerWidth,height:this._piximData.container.offsetHeight||window.innerHeight};return r.width/r.height>e.width/e.height?this.adjustHeight(r.height).toCenter(r).toTop(r):this.adjustWidth(r.width).toMiddle(r).toLeft(r)},r.prototype.adjustWidth=function(t){var e=this._piximData.app.view,r=t||this._piximData.container.offsetWidth||window.innerWidth,i=r/e.width*e.height;return e.style.width=r+"px",e.style.height=i+"px",this},r.prototype.adjustHeight=function(t){var e=this._piximData.app.view,r=t||this._piximData.container.offsetHeight||window.innerHeight,i=r/e.height*e.width;return e.style.height=r+"px",e.style.width=i+"px",this},r.prototype.toLeft=function(t){var e=this._piximData.app.view,r=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=r.x+"px",this},r.prototype.toCenter=function(t){var e=this._piximData.app.view,r=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=(r.width-this._getViewRect().width)/2+r.x+"px",this},r.prototype.toRight=function(t){var e=this._piximData.app.view,r=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=r.width-this._getViewRect().width+r.x+"px",this},r.prototype.toTop=function(t){var e=this._piximData.app.view,r=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=r.y+"px",this},r.prototype.toMiddle=function(t){var e=this._piximData.app.view,r=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=(r.height-this._getViewRect().height)/2+r.y+"px",this},r.prototype.toBottom=function(t){var e=this._piximData.app.view,r=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=r.height-this._getViewRect().height+r.y+"px",this},r.prototype._getViewRect=function(){var t=this._piximData.app.view;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(r.prototype,i),r}(n);function f(t,r){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:e.utils.url.resolve(r,t)}function d(t,e){if(0===t.indexOf("data:"))return t;var r=[],i=t.split("?");if(i[1])for(var n=i[1].split("&"),o=0;o<n.length;o++){n[o].split("=")[0]in e||r.push(n[o])}for(var a in e)r.push(a+"="+e[a]);return i[0]+"?"+r.join("&")}var l=function(){this._manifests={}};function v(t,r,i,n){if(0===Object.keys(t).length)return Promise.resolve({});var o=new e.Loader;i&&(o.defaultQueryString="_fv="+i);var a={};for(var s in t){var u=f(t[s].data,r);o.add(s,u,{crossOrigin:!0})}return n||o.use((function(t,r){t.texture&&(e.Texture.removeFromCache(t.texture),t.texture.baseTexture&&e.BaseTexture.removeFromCache(t.texture.baseTexture)),r()})),new Promise((function(e,r){o.load((function(i,n){for(var o in n){var s=n[o];if(!s)return void r(o);if(s.error&&!t[o].unrequired)return void r(o);a[o]={resource:s.texture,error:!!s.error}}e(a)}))}))}function y(t,e){if(0===Object.keys(t).length)return Promise.resolve({});var r={},i=[],n=function(n){i.push(_(t[n],e).then((function(t){r[n]=t})).catch((function(){throw n})))};for(var o in t)n(o);return Promise.all(i).then((function(){return r}))}function _(t,e){t.data;t.data.crossOrigin="anonymous";var r=t.data.src,i=e?d(r,{_fv:e}):r;return t.data.src=i,x(t)}function m(t){if(0===Object.keys(t).length)return Promise.resolve({});var e={},r=[],i=function(i){r.push(x(t[i]).then((function(t){e[i]=t})).catch((function(){throw i})))};for(var n in t)i(n);return Promise.all(r).then((function(){return e}))}function x(t){return new Promise((function(r,i){var n=e.BaseTexture.from(t.data);n.valid?r({resource:new e.Texture(n),error:!1}):(n.on("loaded",(function(t){r({resource:new e.Texture(t),error:!1})})),n.on("error",(function(n,o){t.unrequired?r({resource:new e.Texture(n),error:!0}):i()})))}))}l.prototype.add=function(t,e){void 0===e&&(e={});var r=e.unrequired||!1;for(var i in t)this._manifests[i]={data:t[i],unrequired:r}},l.prototype.getAsync=function(t,e,r){var i={};return 0===Object.keys(this._manifests).length?Promise.resolve(i):this._loadAsync(t,e,r).then((function(t){for(var e in t)i[e]=t[e].resource;return i}))},l.prototype._resolvePath=function(t,e){return f(t,e)},l.prototype._resolveQuery=function(t,e){return d(t,e)};var g=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e,r){var i=this._manifests,n={},o={},a={};for(var s in i){var u=i[s];u.data instanceof HTMLImageElement?n[s]={data:u.data,unrequired:u.unrequired}:"string"==typeof u.data&&(0===u.data.indexOf("data:")?o[s]={data:u.data,unrequired:u.unrequired}:a[s]={data:u.data,unrequired:u.unrequired})}return Promise.all([y(n,e),m(o),v(a,t,e,r)]).then((function(t){return Object.assign.apply(Object,[{}].concat(t))})).catch((function(t){throw new Error("Image: '"+t+"' cannot load.")}))},e.prototype.destroyResources=function(t){},e}(l);function D(t,r,i,n){if(0===Object.keys(t).length)return Promise.resolve({});var o=new e.Loader;i&&(o.defaultQueryString="_fv="+i);var a={};for(var s in t){var u=f(t[s].data,r);o.add(s,u,{crossOrigin:!0})}return n||o.use((function(t,r){if(t.textures)for(var i in t.textures){var n=t.textures[i];n&&(e.Texture.removeFromCache(n),n.baseTexture&&e.BaseTexture.removeFromCache(n.baseTexture))}t.texture&&(e.Texture.removeFromCache(t.texture),t.texture.baseTexture&&e.BaseTexture.removeFromCache(t.texture.baseTexture)),r()})),new Promise((function(e,r){o.load((function(i,n){for(var o in n)if(t[o]){var s=n[o];if(!s)return void r(o);var u=s.textures||{};if(s.error&&!t[o].unrequired)return void r(o);a[o]={resource:u,error:!!s.error}}e(a)}))}))}function b(t,r,i){if(0===Object.keys(t).length)return Promise.resolve({});var n={},o=[],a=function(a){var s=t[a],u=s.data.meta.image,p=s.unrequired;o.push(function(){if(u instanceof HTMLImageElement)return _({data:u,unrequired:p},i);if("string"==typeof u){if(0===u.indexOf("data:"))return x({data:u,unrequired:p});var t=f(u,r);return x({data:i?d(t,{_fv:i}):t,unrequired:p})}return Promise.reject()}().then((function(t){var r=new e.Spritesheet(t.resource,s.data);return new Promise((function(t){r.parse((function(){n[a]={resource:r.textures,error:!1},t()}))}))})).catch((function(){throw a})))};for(var s in t)a(s);return Promise.all(o).then((function(){return n}))}var w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e,r){var i=this._manifests,n={},o={};for(var a in i){var s=i[a];"object"==typeof s.data?n[a]={data:s.data,unrequired:s.unrequired}:"string"==typeof s.data&&(o[a]={data:s.data,unrequired:s.unrequired})}return Promise.all([b(n,t,e),D(o,t,e,r)]).then((function(t){return Object.assign.apply(Object,[{}].concat(t))})).catch((function(t){throw new Error("Spritesheet: '"+t+"' cannot load.")}))},e.prototype.destroyResources=function(t){},e}(l),A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e,i){var n=this,o=this._manifests;return r.Howl?new Promise((function(i,a){var s={};function u(t,e,r){s[t]={resource:e,error:r},++c<p||i(s)}var p=0,c=0;for(var h in o)++p;var f=function(i){var s=d,p=o[s],c=n._resolvePath(p.data,t),h=e?n._resolveQuery(c,{_fv:e}):c,f=new r.Howl({src:h,onload:function(){u(s,f,!1)},onloaderror:function(){p.unrequired?u(s,f,!0):a("Sound: '"+s+"' cannot load.")}})};for(var d in o)f()})):Promise.reject('You need "howler.js" to load sound asset.')},e.prototype.destroyResources=function(t){for(var e in t)t[e].stop(),t[e].unload()},e}(l),k=function(t){this._piximData={width:t.width,height:t.height,lib:t.lib,resources:t.resources,vars:t.vars}},j={width:{configurable:!0},height:{configurable:!0},lib:{configurable:!0},resources:{configurable:!0},vars:{configurable:!0}};j.width.get=function(){return this._piximData.width},j.height.get=function(){return this._piximData.height},j.lib.get=function(){return this._piximData.lib},j.resources.get=function(){return this._piximData.resources},j.vars.get=function(){return this._piximData.vars},Object.defineProperties(k.prototype,j);var P={},C=0;function O(){var t={};for(var e in T)t[e]=new T[e];return t}var T={},M=function t(e,r){void 0===e&&(e={}),void 0===r&&(r=t._piximData);var i=e.basepath||"";if("object"!=typeof e.version){var n={},o=e.version||"";for(var a in T)n[a]=o;e.version=n}if("object"!=typeof e.useCache){var s={},u=e.useCache||!1;for(var p in T)s[p]=u;e.useCache=s}var c={width:r.config.width,height:r.config.height,lib:r.lib,resources:{},vars:{}};this._piximData={contentID:(++C).toString(),basepath:i,version:e.version,useCache:e.useCache||!1,$:new k(c),manifests:r.manifests,additionalManifests:O(),preloadPromise:null,postloadPromise:null,contentDeliverData:c}},F={contentID:{configurable:!0}};function I(t,r){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:e.utils.url.resolve(r.replace(/([^\/])$/,"$1/"),t)}function L(t,e){if(0===t.indexOf("data:"))return t;var r=[],i=t.split("?");if(i[1])for(var n=i[1].split("&"),o=0;o<n.length;o++){n[o].split("=")[0]in e||r.push(n[o])}for(var a in e)r.push(a+"="+e[a]);return i[0]+"?"+r.join("&")}M.registerManifest=function(t,e){T[t]=e},M.create=function(t){if(void 0===t&&(t=""),t&&t in P)throw new Error("Content key '"+t+"' has already exists.");var e=function(t){function e(r){void 0===r&&(r={}),t.call(this,r,e._piximData)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(M);return e._piximData={config:{width:450,height:800},manifests:O(),lib:{}},t?P[t]=e:e},M.get=function(t){return P[t]},M.remove=function(t){delete P[t]},M.defineManifests=function(t,e,r){return void 0===r&&(r={}),this._piximData.manifests[t]?(this._piximData.manifests[t].add(e,r),this):(console.warn("Manifest '"+t+"' is not registered."),this)},M.defineImages=function(t,e){return void 0===e&&(e={}),this.defineManifests("images",t,e)},M.defineSpritesheets=function(t,e){return void 0===e&&(e={}),this.defineManifests("spritesheets",t,e)},M.defineSounds=function(t,e){return void 0===e&&(e={}),this.defineManifests("sounds",t,e)},M.setConfig=function(t){return this._piximData.config.width=t.width,this._piximData.config.height=t.height,this},M.defineLibraries=function(t){for(var e in t)this._piximData.lib[e]=t[e];return this},F.contentID.get=function(){return this._piximData.contentID},M.prototype.addManifests=function(t,e,r){return void 0===r&&(r={}),this._piximData.additionalManifests[t]?(this._piximData.additionalManifests[t].add(e,r),this):(console.warn("Manifest '"+t+"' is not registered."),this)},M.prototype.addImages=function(t,e){return void 0===e&&(e={}),this.addManifests("images",t,e)},M.prototype.addSpritesheets=function(t,e){return void 0===e&&(e={}),this.addManifests("spritesheets",t,e)},M.prototype.addSounds=function(t,e){return void 0===e&&(e={}),this.addManifests("sounds",t,e)},M.prototype.addVars=function(t){for(var e in t)this._piximData.$.vars[e]=t[e];return this},M.prototype.prepareAsync=function(){var t=this;return this.preloadClassAssetAsync().then((function(){return t.preloadInstanceAssetAsync()}))},M.prototype.buildAsync=function(){var t=this;if(!this._piximData.$.lib.root)throw new Error('There is no library named "root" in the content.');return this.prepareAsync().then((function(){return new t._piximData.$.lib.root(t._piximData.$)}))},M.prototype.preloadClassAssetAsync=function(){var t=this;return this._piximData.preloadPromise?this._piximData.preloadPromise:this._piximData.preloadPromise=this._loadAssetAsync(this._piximData.manifests).catch((function(e){throw t._piximData.preloadPromise=null,e}))},M.prototype.preloadInstanceAssetAsync=function(){var t=this;return this._piximData.postloadPromise?this._piximData.postloadPromise:this._piximData.postloadPromise=this._loadAssetAsync(this._piximData.additionalManifests).then((function(){t._piximData.postloadPromise=null})).catch((function(e){throw t._piximData.postloadPromise=null,e}))},M.prototype.destroy=function(){var t=this._piximData.contentDeliverData;t.lib={},t.vars={};var e=t.resources,r=this._piximData.manifests;for(var i in e)i in r&&r[i].destroyResources(e[i]),e[i]={}},M.prototype._loadAssetAsync=function(t){var e=this._piximData.basepath,r=this._piximData.version,i=this._piximData.useCache,n=this._piximData.$.resources;if(0===Object.keys(t).length)return Promise.resolve();var o=[],a=[];for(var s in t){var u=s;a.push(u),o.push(t[u].getAsync(e,r[u]||"",i[u]||!1))}return Promise.all(o).then((function(t){for(var e=0;e<t.length;e++)for(var r in n[a[e]]=n[a[e]]||{},t[e])n[a[e]][r]=t[e][r]}))},Object.defineProperties(M.prototype,F),M.registerManifest("images",g),M.registerManifest("spritesheets",w),M.registerManifest("sounds",A);var E=Object.freeze({__proto__:null,resolvePath:I,resolveQuery:L}),q=function(t,e){this._data=t,this._error=e},H={data:{configurable:!0},error:{configurable:!0}};H.data.get=function(){return this._data},H.error.get=function(){return this._error},Object.defineProperties(q.prototype,H);var R=function(t){void 0===t&&(t={}),this._options=t};R.prototype._resolveBasepath=function(t){return"string"==typeof t?t:this._options.basepath||""},R.prototype._resolveVersion=function(t){return"string"==typeof t||"number"==typeof t?t:this._options.version||""},R.prototype._resolveUseCache=function(t){return"boolean"==typeof t?t:this._options.useCache||!1},R.prototype._resolveUrl=function(t,e){void 0===e&&(e={});var r=I(t,this._resolveBasepath(e.basepath)),i=this._resolveVersion(e.version);return i?L(r,{_fv:i}):r};var S=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){r.removeCache(this._data),this._data.destroy(!0)},r.removeCache=function(t){e.Texture.removeFromCache(t),t.baseTexture&&e.BaseTexture.removeFromCache(t.baseTexture)},r}(q),B=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.loadAsync=function(t,e){return void 0===e&&(e={}),t instanceof HTMLImageElement||t instanceof HTMLVideoElement?this._loadFromElementAsync(t,e):0===t.indexOf("data:")?this._loadFromDataUriAsync(t,e):this._loadFromUrlAsync(t,e)},r.prototype.loadWithManifestAsync=function(t,e){var r=this;if(void 0===e&&(e={}),0===Object.keys(t).length)return Promise.resolve({});var i=[],n={},o=function(o){i.push(r.loadAsync(t[o],e).then((function(t){n[o]=t})))};for(var a in t)o(a);return Promise.all(i).then((function(){return n}))},r.prototype._loadFromUrlAsync=function(t,e){return void 0===e&&(e={}),this._loadTextureAsync(this._resolveUrl(t,e),e)},r.prototype._loadFromElementAsync=function(t,e){return void 0===e&&(e={}),t.crossOrigin="anonymous",t.src=this._resolveUrl(t.src,e),this._loadTextureAsync(t)},r.prototype._loadFromDataUriAsync=function(t,e){return void 0===e&&(e={}),this._loadTextureAsync(t,e)},r.prototype._loadTextureAsync=function(t,r){void 0===r&&(r={});var i=this._resolveUseCache(r.useCache);return new Promise((function(r){var n=e.BaseTexture.from(t);n.valid?r(new S(new e.Texture(n),null)):(n.on("loaded",(function(t){i||e.BaseTexture.removeFromCache(t),r(new S(new e.Texture(t),null))})),n.on("error",(function(t,i){e.BaseTexture.removeFromCache(t),r(new S(new e.Texture(t),i))})))}))},r}(R),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){for(var t in this._data)S.removeCache(this._data[t]);for(var e in this._data)this._data[e].destroy(!0)},e}(q),U="--single-sprite-sheet",V=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.loadAsync=function(t,e){var r,i;return void 0===e&&(e={}),"string"==typeof t?this._loadFromUrlsAsync((r={},r[U]=t,r),e).then((function(t){return t[U]})):this._loadFromJsonsAsync((i={},i[U]=t,i),e).then((function(t){return t[U]}))},r.prototype.loadWithManifestAsync=function(t,e){if(void 0===e&&(e={}),0===Object.keys(t).length)return Promise.resolve({});var r={},i={};for(var n in t){var o=t[n];"string"==typeof o?r[n]=o:i[n]=o}return Promise.all([this._loadFromUrlsAsync(r,e),this._loadFromJsonsAsync(i,e)]).then((function(t){return Object.assign.apply(Object,[{}].concat(t))}))},r.prototype._loadFromUrlsAsync=function(t,r){void 0===r&&(r={});var i={};if(0===Object.keys(t).length)return Promise.resolve(i);var n=new e.Loader,o=this._resolveVersion(r.version);o&&(n.defaultQueryString="_fv="+o);var a=this._resolveBasepath(r.basepath);for(var s in t){var u=I(t[s],a);n.add(s,u,{crossOrigin:!0})}return this._resolveUseCache(r.useCache)||n.use((function(t,e){if(t.textures)for(var r in t.textures){var i=t.textures[r];i&&S.removeCache(i)}t.texture&&S.removeCache(t.texture),e()})),new Promise((function(e){n.load((function(r,n){for(var o in n)if(t[o]){var a=n[o];a?a.error?i[o]=new W({},a.error):a.textures?i[o]=new W(a.textures,null):i[o]=new W({},"invalid texture"):i[o]=new W({},"invalid json")}e(i)}))}))},r.prototype._loadFromJsonsAsync=function(t,r){void 0===r&&(r={});var i={};if(0===Object.keys(t).length)return Promise.resolve(i);var n=[],o=new B(r),a=function(a){var s=t[a];n.push(o.loadAsync(s.meta.image,r).then((function(t){if(t.error)return i[a]=new W({},t.error),Promise.resolve();var r=new e.Spritesheet(t.data,s);return new Promise((function(t){r.parse((function(e){i[a]=new W(r.textures,null),t()}))}))})).catch((function(t){return i[a]=new W({},t),Promise.resolve()})))};for(var s in t)a(s);return Promise.all(n).then((function(){return i}))},r}(R),$=Object.freeze({__proto__:null,LoaderResource:q,LoaderBase:R,TextureLoaderResource:S,TextureLoader:B,SpritesheetLoaderResource:W,SpritesheetLoader:V}),Q=function(){this._data={}};Q.prototype.add=function(t,e){void 0===e&&(e={});var r=e.unrequired||!1;for(var i in t)this._data[i]={target:t[i],unrequired:r}},Q.prototype.getAsync=function(t){var e=this;if(0===Object.keys(this._data).length)return Promise.resolve({});var r={};for(var i in this._data)r[i]=this._data[i].target;return this._loadAsync(r,t).then((function(t){var r={};for(var i in t){var n=t[i];if(n.error&&!e._data[i].unrequired)throw n.error;r[i]=n.data}return r}))},Q.prototype.destoryResources=function(){};var z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e){return void 0===e&&(e={}),new B(e).loadWithManifestAsync(t)},e}(Q),J=Object.freeze({__proto__:null,ResourceManagerBase:Q,ImageResourceManager:z});t.Application=h,t.Container=u,t.Content=M,t.ContentDeliver=k,t.ContentImageManifest=g,t.ContentManifestBase=l,t.ContentSoundManifest=A,t.ContentSpritesheetManifest=w,t.Emitter=n,t.Layer=p,t.Task=s,t.loadImageAsync=x,t.loadImageFromElementAsync=_,t.loaders=$,t.resolvePath=f,t.resolveQuery=d,t.resources=J,t.utils=E}(this.Pixim=this.Pixim||{},PIXI,{Howl:"undefined"==typeof Howl?null:Howl});//# sourceMappingURL=Pixim.min.js.map
