/*!
 * @tawaship/pixim.js - v1.13.3
 * 
 * @require pixi.js v^5.3.2
 * @require howler.js v^2.2.0 (If use sound)
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
!function(t,e,i){"use strict";window.console.log("%c pixim.js%cv1.13.3 %c","color: #FFF; background: #03F; padding: 5px; border-radius:12px 0 0 12px; margin-top: 5px; margin-bottom: 5px;","color: #FFF; background: #F33; padding: 5px;  border-radius:0 12px 12px 0;","padding: 5px;");
/*!
 * @tawaship/emitter - v3.1.1
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var o=function(){this._events={}};o.prototype._on=function(t,e,i){if(!t||!e)return this;for(var o=this._events[t]=this._events[t]||[],r=0;r<o.length;r++)if(o[r].callback===e)return this;return o.push({callback:e,once:i}),this},o.prototype.on=function(t,e){return this._on(t,e,!1)},o.prototype.once=function(t,e){return this._on(t,e,!0)},o.prototype.off=function(t,e){if(!t||!e)return this;for(var i=this._events[t]||[],o=0;o<i.length;o++)if(i[o].callback===e)return i.splice(o,1),this;return this},o.prototype._emit=function(t,e){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];if(!t)return this;for(var r=this._events[t]||[],n=[],a=r.length-1;a>=0;a--){var s=r[a];s.once&&r.splice(a,1),n.push(s)}for(var p=n.length-1;p>=0;p--)n[p].callback.apply(e,i);return this},o.prototype.emit=function(t){for(var e,i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];return(e=this)._emit.apply(e,[t,this].concat(i))},o.prototype.cemit=function(t,e){for(var i,o=[],r=arguments.length-2;r-- >0;)o[r]=arguments[r+2];return(i=this)._emit.apply(i,[t,e].concat(o))},o.prototype._emitAll=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(null==t)return this;var o=[];for(var r in this._events)for(var n=this._events[r]||[],a=n.length-1;a>=0;a--){var s=n[a];s.once&&n.splice(a,1),o.push(s)}for(var p=o.length-1;p>=0;p--)o[p].callback.apply(t,e);return this},o.prototype.emitAll=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];return(t=this)._emitAll.apply(t,[this].concat(e))},o.prototype.cemitAll=function(t){for(var e,i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];return(e=this)._emitAll.apply(e,[t].concat(i))},o.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this};var r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o),n=function(t,e){this._taskData={context:null==e?this:e,enabled:!0,index:-1,callbacks:[],value:null},this.add(t)},a={enabled:{configurable:!0},value:{configurable:!0}};
/*!
 * @tawaship/task - v1.1.0
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */a.enabled.get=function(){return this._taskData.enabled},a.enabled.set=function(t){this._taskData.enabled=t},n.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var e=this._taskData.callbacks,i=(e.length,0);i<t.length;i++)t[i]instanceof Function&&e.push(t[i]);return this},n.prototype.done=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(this._taskData.enabled){var i=this._taskData.callbacks[this._taskData.index];if(i)return this._taskData.value=i.apply(this._taskData.context,t)}},n.prototype._to=function(t){return this._taskData.index=Number(t),this},n.prototype.first=function(){return this._to(0)},n.prototype.prev=function(){return this._to(this._taskData.index-1)},n.prototype.next=function(){return this._to(this._taskData.index+1)},n.prototype.to=function(t){return this._to(t)},n.prototype.finish=function(){return this._taskData.index=-1,this},n.prototype.reset=function(){return this._taskData.callbacks=[],this._taskData.index=-1,this._taskData.value=null,this},n.prototype.destroy=function(){this.reset()},a.value.get=function(){return this._taskData.value},Object.defineProperties(n.prototype,a);var s=function(t){function e(e,i){t.call(this,e,i),this.enabled=!0,this._piximData={emitter:new r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.on=function(t,e){return this._piximData.emitter.on(t,e),this},e.prototype.once=function(t,e){return this._piximData.emitter.once(t,e),this},e.prototype.off=function(t,e){return this._piximData.emitter.off(t,e),this},e.prototype.emit=function(t){for(var e,i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];return this._taskData.enabled?((e=this._piximData.emitter).emit.apply(e,[t].concat(i)),this):this},e.prototype.cemit=function(t,e){for(var i,o=[],r=arguments.length-2;r-- >0;)o[r]=arguments[r+2];return this._taskData.enabled?((i=this._piximData.emitter).cemit.apply(i,[t,e].concat(o)),this):this},e.prototype.emitAll=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];return this._taskData.enabled?((t=this._piximData.emitter).emitAll.apply(t,e),this):this},e.prototype.cemitAll=function(t){for(var e,i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];return this._taskData.enabled?((e=this._piximData.emitter).cemitAll.apply(e,[t].concat(i)),this):this},e.prototype.clear=function(t){return void 0===t&&(t=""),this._piximData.emitter.clear(t),this},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clear()},e}(n),p=function(t){function e(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.call(this),this._piximData={task:new s([],this),taskEnabledChildren:!0},this._piximData.task.first()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={taskEnabled:{configurable:!0},taskEnabledChildren:{configurable:!0},task:{configurable:!0}};return e.prototype.updateTask=function(t){var e=this._piximData.task;this._piximData.task.enabled&&(e.done(t),e.cemitAll(this,t))},i.taskEnabled.get=function(){return this._piximData.task.enabled},i.taskEnabled.set=function(t){this._piximData.task.enabled=t},i.taskEnabledChildren.get=function(){return this._piximData.taskEnabledChildren},i.taskEnabledChildren.set=function(t){this._piximData.taskEnabledChildren=t},i.task.get=function(){return this._piximData.task},e.prototype.destroy=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];t.prototype.destroy.apply(this,e),this._piximData.task.destroy()},Object.defineProperties(e.prototype,i),e}(e.Container),u=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.Container);function c(t,i){if(!(t instanceof p)||(t.updateTask(i),t.taskEnabledChildren)){for(var o=[],r=0;r<t.children.length;r++)o.push(t.children[r]);for(var n=0;n<o.length;n++){var a=o[n];a instanceof e.Container&&c(a,i)}}}var h=function(t){function i(i,o){var r=this;void 0===i&&(i={}),void 0===o&&(o={}),t.call(this);var n=new e.Application(i);n.stop(),n.view.style.position="absolute";var a=o.autoAdjust||!1;this._piximData={isRun:!1,app:n,container:o.container||document.body,layers:{},autoAdjuster:null,roots:{},contents:{}},this._piximData.app.ticker.add((function(t){c(r._piximData.app.stage,{delta:t})})),a&&(this.autoAdjuster=!0===a?function(){r.fullScreen()}:function(){a(r)})}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var o={app:{configurable:!0},stage:{configurable:!0},view:{configurable:!0},container:{configurable:!0},autoAdjuster:{configurable:!0}};return o.app.get=function(){return this._piximData.app},o.stage.get=function(){return this._piximData.app.stage},o.view.get=function(){return this._piximData.app.view},o.container.get=function(){return this._piximData.container},o.container.set=function(t){this._piximData.container=t||document.body,this._piximData.app.view.parentNode&&this._piximData.container.appendChild(this._piximData.app.view)},i.prototype._hasLayer=function(t){return!!this._piximData.layers[t]},i.prototype.addLayer=function(t){return this._hasLayer(t)||(this._piximData.layers[t]=this._piximData.app.stage.addChild(new u)),this},i.prototype.removeLayer=function(t){return this._hasLayer(t)?(this._piximData.app.stage.removeChild(this._piximData.layers[t]),delete this._piximData.layers[t],this):this},i.prototype.attachAsync=function(t,e){var i=this;return void 0===e&&(e="anonymous"),t.buildAsync().then((function(o){return i.detach(t),i.addLayer(e),i._piximData.roots[t.contentID]=o,i._piximData.contents[t.contentID]=t,i._piximData.layers[e].addChild(o),o}))},i.prototype.detach=function(t,e){void 0===e&&(e={children:!0});var i=this._piximData.roots[t.contentID];return i?(this._destroyRoot(i,e),delete this._piximData.roots[t.contentID],delete this._piximData.contents[t.contentID],this):this},i.prototype.play=function(){return this._piximData.container.appendChild(this._piximData.app.view),this.start()},i.prototype.start=function(){return this._piximData.app.start(),this},i.prototype.stop=function(){return this._piximData.app.stop(),this},i.prototype.pause=function(t){return t?this.stop():this.start(),this},o.autoAdjuster.get=function(){return this._piximData.autoAdjuster},o.autoAdjuster.set=function(t){this._piximData.autoAdjuster&&window.removeEventListener("resize",this._piximData.autoAdjuster),t?(this._piximData.autoAdjuster=t,window.addEventListener("resize",t),t()):this._piximData.autoAdjuster=null},i.prototype.preDestroy=function(){for(var t in this._piximData.contents)this._piximData.contents[t].destroy();this.autoAdjuster=null,this._piximData.layers={},this._piximData.roots={},this._piximData.contents={}},i.prototype.destroy=function(t,e){return this.preDestroy(),this._piximData.app.destroy(t,e),this},i.prototype._destroyRoot=function(t,e){t.destroy(e)},i.prototype.fullScreen=function(t){var e=this._piximData.app.view,i=t||{x:0,y:0,width:this._piximData.container.offsetWidth||window.innerWidth,height:this._piximData.container.offsetHeight||window.innerHeight};return i.width/i.height>e.width/e.height?this.adjustHeight(i.height).toCenter(i).toTop(i):this.adjustWidth(i.width).toMiddle(i).toLeft(i)},i.prototype.adjustWidth=function(t){var e=this._piximData.app.view,i=t||this._piximData.container.offsetWidth||window.innerWidth,o=i/e.width*e.height;return e.style.width=i+"px",e.style.height=o+"px",this},i.prototype.adjustHeight=function(t){var e=this._piximData.app.view,i=t||this._piximData.container.offsetHeight||window.innerHeight,o=i/e.height*e.width;return e.style.height=i+"px",e.style.width=o+"px",this},i.prototype.toLeft=function(t){var e=this._piximData.app.view,i=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=i.x+"px",this},i.prototype.toCenter=function(t){var e=this._piximData.app.view,i=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=(i.width-this._getViewRect().width)/2+i.x+"px",this},i.prototype.toRight=function(t){var e=this._piximData.app.view,i=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return e.style.left=i.width-this._getViewRect().width+i.x+"px",this},i.prototype.toTop=function(t){var e=this._piximData.app.view,i=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=i.y+"px",this},i.prototype.toMiddle=function(t){var e=this._piximData.app.view,i=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=(i.height-this._getViewRect().height)/2+i.y+"px",this},i.prototype.toBottom=function(t){var e=this._piximData.app.view,i=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return e.style.top=i.height-this._getViewRect().height+i.y+"px",this},i.prototype._getViewRect=function(){var t=this._piximData.app.view;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(i.prototype,o),i}(r),f="loaderAssetLoaded",d=function(t){function e(){t.apply(this,arguments),this._data={},this._resources={}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={count:{configurable:!0}};return e.prototype.add=function(t,e){void 0===e&&(e={});var i=e.unrequired||!1;for(var o in t)this._data[o]={target:t[o],unrequired:i}},i.count.get=function(){return Object.keys(this._data).length},e.prototype.getAsync=function(t){var e=this;if(0===Object.keys(this._data).length)return Promise.resolve({});var i={},o={};for(var r in this._data)o[r]=this._data[r].target;return this._loadAsync(o,t).then((function(t){for(var o in t){var r=t[o];if(r.error&&!e._data[o].unrequired)throw r.error}for(var n in t){var a=t[n];e._resources[n]=a,i[n]=a.data}return i}))},e.prototype._doneLoaderAsync=function(t,e){var i=this;return t.onLoaded=function(t){i.emit(f,t)},t.loadAllAsync(e)},e.prototype.destroyResources=function(){for(var t in this._resources)this._resources[t].destroy()},Object.defineProperties(e.prototype,i),e}(o);function l(t,i){return _(i)?e.utils.url.resolve(t.replace(/([^\/])$/,"$1/"),i):i}function _(t){return 0!==t.indexOf("data:")&&0!==t.indexOf("blob:")}function y(t,e){if(_(t)){var i=[],o=t.split("?");if(o[1])for(var r=o[1].split("&"),n=0;n<r.length;n++){r[n].split("=")[0]in e||i.push(r[n])}for(var a in e)i.push(a+"="+e[a]);return o[0]+"?"+i.join("&")}return t}var v=Object.freeze({__proto__:null,resolvePath:l,isUrl:_,resolveQuery:y}),m=function(t,e){this._data=t,this._error=e},x={data:{configurable:!0},error:{configurable:!0}};x.data.get=function(){return this._data},x.error.get=function(){return this._error},Object.defineProperties(m.prototype,x);var g=function(t){void 0===t&&(t={}),this._options=t||{}};g.prototype._resolveUri=function(t){if(!_(t))return t;var e=this._options.basepath||"",i=this._options.version||"",o=l(e,t);return i?y(o,{_fv:i}):o},g.prototype.loadAsync=function(t,e){var i=this;if("string"!=typeof t)return this._loadAsync(t);var o=this._resolveUri(t);return(i._options.xhrOptions?i._loadXhrAsync(o):i._loadAsync(o)).then((function(t){return t.error||i.onLoaded&&i.onLoaded(t),t}))},g.prototype.loadAllAsync=function(t){var e=this;if(0===Object.keys(t).length)return Promise.resolve({});var i=[],o={},r=function(r){i.push(e.loadAsync(t[r]).then((function(t){o[r]=t})))};for(var n in t)r(n);return Promise.all(i).then((function(){return o}))};var D=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.destroy=function(){i.removeCache(this._data),this._data.destroy(!0)},i.removeCache=function(t){e.Texture.removeFromCache(t),t.baseTexture&&e.BaseTexture.removeFromCache(t.baseTexture)},i}(m),b=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t){(t instanceof HTMLImageElement||t instanceof HTMLVideoElement)&&(t.crossOrigin="anonymous",t.src=this._resolveUri(t.src));var i=this._options.useCache;return new Promise((function(o){var r=e.BaseTexture.from(t);if(r.valid)return i||e.BaseTexture.removeFromCache(r),void o(new D(new e.Texture(r),null));r.on("loaded",(function(t){i||e.BaseTexture.removeFromCache(t),o(new D(new e.Texture(t),null))})),r.on("error",(function(t,i){e.BaseTexture.removeFromCache(t),o(new D(new e.Texture(t),i))}))}))},i.prototype._loadXhrAsync=function(t){var e=this,i=this._options.xhrOptions||{};return fetch(t,i.requestOptions||{}).then((function(t){return i.dataResolver?i.dataResolver(t):t.text()})).then((function(t){return e._loadAsync(t)}))},i}(g),w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e){void 0===e&&(e={});var i=new b(e);return this._doneLoaderAsync(i,t)},e}(d),A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){},e}(m),k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t){return fetch(t).then((function(t){return t.json()})).then((function(t){return new A(t,null)})).catch((function(t){return new A({},t)}))},e.prototype._loadXhrAsync=function(t){var e=this._options.xhrOptions||{};return fetch(t,e.requestOptions||{}).then((function(t){return e.dataResolver?e.dataResolver(t):t.json()})).then((function(t){return new A(t,null)})).catch((function(t){return new A({},t)}))},e}(g),j=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){for(var t in this._data)this._data[t].destroy(!0)},e}(m),C=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t,e){return"string"!=typeof t?this._loadTextureFromJson(t):this._loadFromUrlAsync(t)},i.prototype._loadXhrAsync=function(t){this._options;var e={basepath:this._options.basepath,version:this._options.version,useCache:this._options.useCache},i=this._options.xhrOptions||{};return e.xhrOptions={requestOptions:i.requestOptions,dataResolver:i.dataResolver?i.dataResolver[0]:i.dataResolver},this._loadFromUrlAsync(t,e)},i.prototype._loadFromUrlAsync=function(t,e){var i=this;return new k(e).loadAsync(t).then((function(e){var o=e.data;if(!o.meta||!o.meta.image||!o.frames)return new j({},"invalid json");var r=t,n=i._options.version||"",a=l(r,o.meta.image);o.meta.image=n?y(a,{_fv:n}):a;var s={frames:o.frames,meta:o.meta};return i._loadTextureFromJson(s)}))},i.prototype._loadTextureFromJson=function(t){var i=this,o=function(){if(!i._options.xhrOptions)return{basepath:i._options.basepath,version:i._options.version,useCache:i._options.useCache};i._options;var t={basepath:i._options.basepath,version:i._options.version,useCache:i._options.useCache},e=i._options.xhrOptions||{};return t.xhrOptions={requestOptions:e.requestOptions,dataResolver:e.dataResolver?e.dataResolver[1]:e.dataResolver},t}(),r=new b(o),n=this._options.useCache;return r.loadAsync(t.meta.image).then((function(i){if(i.error)return new j({},i.error);var o=new e.Spritesheet(i.data,t);return new Promise((function(t){o.parse((function(e){var i=new j(o.textures,null);if(!n)for(var r in o.textures)D.removeCache(o.textures[r]);t(i)}))}))})).catch((function(t){return new j({},t)}))},i}(g),O=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e){void 0===e&&(e={});var i=new C(e);return this._doneLoaderAsync(i,t)},e}(d),T=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._data.stop(),this._data.unload()},e}(m),L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t){return new Promise((function(e){var o=new i.Howl({src:t,onload:function(){e(new T(o,null))},onloaderror:function(){var i=new Error("invalid resource: "+t);e(new T(o,i))}})}))},e.prototype._loadXhrAsync=function(t){var e=this._options.xhrOptions||{};return new Promise((function(o){var r=new i.Howl({src:t,onload:function(){o(new T(r,null))},onloaderror:function(){var e=new Error("invalid resource: "+t);o(new T(r,e))},xhr:e.requestOptions||{}})}))},e}(g),R=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e){void 0===e&&(e={});var i=new L(e);return this._doneLoaderAsync(i,t)},e}(d),P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e){void 0===e&&(e={});var i=new k(e);return this._doneLoaderAsync(i,t)},e}(d),E=function(t){this._piximData={width:t.width,height:t.height,lib:t.lib,resources:t.resources,vars:t.vars}},H={width:{configurable:!0},height:{configurable:!0},lib:{configurable:!0},resources:{configurable:!0},vars:{configurable:!0}};H.width.get=function(){return this._piximData.width},H.height.get=function(){return this._piximData.height},H.lib.get=function(){return this._piximData.lib},H.resources.get=function(){return this._piximData.resources},H.vars.get=function(){return this._piximData.vars},Object.defineProperties(E.prototype,H);var M={},F=0;function I(){var t={};for(var e in S)t[e]=new S[e];return t}var S={},W=function(t){function e(i,o){var r=this;void 0===i&&(i={}),void 0===o&&(o=e._piximData),t.call(this),this._loadedResourceHandler=function(t){r.emit(f,t)};var n=i.basepath||"";if("object"!=typeof i.version){var a={},s=i.version||"";for(var p in S)a[p]=s;i.version=a}if("object"!=typeof i.useCache){var u={},c=i.useCache||!1;for(var h in S)u[h]=c;i.useCache=u}var d={width:o.config.width,height:o.config.height,lib:o.lib,resources:{},vars:{}};for(var l in this._piximData={contentID:(++F).toString(),basepath:n,version:i.version,useCache:i.useCache,xhrOptions:i.xhrOptions||{},$:new E(d),manifests:o.manifests,additionalManifests:I(),preloadPromise:null,postloadPromise:null,contentDeliverData:d},this._piximData.manifests)this._piximData.manifests[l].on(f,this._loadedResourceHandler);for(var _ in this._piximData.additionalManifests)this._piximData.additionalManifests[_].on(f,this._loadedResourceHandler)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={contentID:{configurable:!0},classAssetCount:{configurable:!0},instanceAssetCount:{configurable:!0},assetCount:{configurable:!0}};return e.registerManifest=function(t,e){S[t]=e},e.create=function(t){if(void 0===t&&(t=""),t&&t in M)throw new Error("Content key '"+t+"' has already exists.");var i=function(t){function e(i){void 0===i&&(i={}),t.call(this,i,e._piximData)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e);return i._piximData={config:{width:450,height:800},manifests:I(),lib:{}},t?M[t]=i:i},e.get=function(t){return M[t]},e.remove=function(t){delete M[t]},e.defineTargets=function(t,e,i){return void 0===i&&(i={}),this._piximData.manifests[t]?(this._piximData.manifests[t].add(e,i),this):(console.warn("Manifest '"+t+"' is not registered."),this)},e.defineImages=function(t,e){return void 0===e&&(e={}),this.defineTargets("images",t,e)},e.defineSpritesheets=function(t,e){return void 0===e&&(e={}),this.defineTargets("spritesheets",t,e)},e.defineSounds=function(t,e){return void 0===e&&(e={}),this.defineTargets("sounds",t,e)},e.defineJsons=function(t,e){return void 0===e&&(e={}),this.defineTargets("jsons",t,e)},e.setConfig=function(t){return this._piximData.config.width=t.width,this._piximData.config.height=t.height,this},e.defineLibraries=function(t){for(var e in t)this._piximData.lib[e]=t[e];return this},i.contentID.get=function(){return this._piximData.contentID},e.prototype.addTargets=function(t,e,i){return void 0===i&&(i={}),this._piximData.additionalManifests[t]?(this._piximData.additionalManifests[t].add(e,i),this):(console.warn("Manifest '"+t+"' is not registered."),this)},e.prototype.addImages=function(t,e){return void 0===e&&(e={}),this.addTargets("images",t,e)},e.prototype.addSpritesheets=function(t,e){return void 0===e&&(e={}),this.addTargets("spritesheets",t,e)},e.prototype.addSounds=function(t,e){return void 0===e&&(e={}),this.addTargets("sounds",t,e)},e.prototype.addJsons=function(t,e){return void 0===e&&(e={}),this.addTargets("jsons",t,e)},e.prototype.addVars=function(t){for(var e in t)this._piximData.$.vars[e]=t[e];return this},e.prototype.prepareAsync=function(){var t=this;return this.preloadClassAssetAsync().then((function(){return t.preloadInstanceAssetAsync()}))},e.prototype.buildAsync=function(){var t=this;if(!this._piximData.$.lib.root)throw new Error('There is no library named "root" in the content.');return this.prepareAsync().then((function(){return new t._piximData.$.lib.root(t._piximData.$)}))},e.prototype.preloadClassAssetAsync=function(){var t=this;return this._piximData.preloadPromise?this._piximData.preloadPromise:this._piximData.preloadPromise=this._loadAssetAsync(this._piximData.manifests).catch((function(e){throw t._piximData.preloadPromise=null,e}))},e.prototype.preloadInstanceAssetAsync=function(){var t=this;return this._piximData.postloadPromise?this._piximData.postloadPromise:this._piximData.postloadPromise=this._loadAssetAsync(this._piximData.additionalManifests).catch((function(e){throw t._piximData.postloadPromise=null,e}))},e.prototype.destroy=function(){var t=this._piximData.contentDeliverData;t.lib={},t.vars={};var e=this._piximData.manifests,i=this._piximData.additionalManifests;for(var o in e)e[o].destroyResources(),e[o].off(f,this._loadedResourceHandler);for(var r in i)i[r].destroyResources(),i[r].off(f,this._loadedResourceHandler);var n=t.resources;for(var a in n)n[a]={}},i.classAssetCount.get=function(){var t=0,e=this._piximData.manifests;for(var i in e)t+=e[i].count;return t},i.instanceAssetCount.get=function(){var t=0,e=this._piximData.additionalManifests;for(var i in e)t+=e[i].count;return t},i.assetCount.get=function(){return this.classAssetCount+this.instanceAssetCount},e.prototype._loadAssetAsync=function(t){var e=this._piximData.basepath,i=this._piximData.version,o=this._piximData.useCache,r=this._piximData.$.resources;if(0===Object.keys(t).length)return Promise.resolve();var n=[],a=[];for(var s in t){var p=s;a.push(p);var u=i[p]||"",c=o[p]||!1,h=t[p];n.push(h.getAsync({basepath:e,version:u,useCache:c}))}return Promise.all(n).then((function(t){for(var e=0;e<t.length;e++)for(var i in r[a[e]]=r[a[e]]||{},t[e])r[a[e]][i]=t[e][i]}))},Object.defineProperties(e.prototype,i),e}(o);W.registerManifest("images",w),W.registerManifest("spritesheets",O),W.registerManifest("sounds",R),W.registerManifest("jsons",P),t.Application=h,t.Container=p,t.Content=W,t.ContentDeliver=E,t.EVENT_LOADER_ASSET_LOADED=f,t.Emitter=r,t.JsonLoader=k,t.JsonLoaderResource=A,t.JsonManifest=P,t.Layer=u,t.LoaderBase=g,t.LoaderResource=m,t.ManifestBase=d,t.SoundLoader=L,t.SoundLoaderResource=T,t.SoundManifest=R,t.SpritesheetLoader=C,t.SpritesheetLoaderResource=j,t.SpritesheetManifest=O,t.Task=s,t.TextureLoader=b,t.TextureLoaderResource=D,t.TextureManifest=w,t.utils=v}(this.Pixim=this.Pixim||{},PIXI,{Howl:"undefined"==typeof Howl?null:Howl});//# sourceMappingURL=Pixim.min.js.map
