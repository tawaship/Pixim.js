/*!
 * @tawaship/pixim.js - v1.10.2
 * 
 * @require pixi.js v5.3.9
 * @require howler.js v2.2.0 (If use sound)
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
!function(t,i,e){"use strict";window.console.log("%c pixim.js%cv1.10.2 %c","color: #FFF; background: #03F; padding: 5px; border-radius:12px 0 0 12px; margin-top: 5px; margin-bottom: 5px;","color: #FFF; background: #F33; padding: 5px;  border-radius:0 12px 12px 0;","padding: 5px;");
/*!
 * @tawaship/emitter - v3.1.1
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var n=function(){this._events={}};n.prototype._on=function(t,i,e){if(!t||!i)return this;for(var n=this._events[t]=this._events[t]||[],r=0;r<n.length;r++)if(n[r].callback===i)return this;return n.push({callback:i,once:e}),this},n.prototype.on=function(t,i){return this._on(t,i,!1)},n.prototype.once=function(t,i){return this._on(t,i,!0)},n.prototype.off=function(t,i){if(!t||!i)return this;for(var e=this._events[t]||[],n=0;n<e.length;n++)if(e[n].callback===i)return e.splice(n,1),this;return this},n.prototype._emit=function(t,i){for(var e=[],n=arguments.length-2;n-- >0;)e[n]=arguments[n+2];if(!t)return this;for(var r=this._events[t]||[],o=[],a=r.length-1;a>=0;a--){var s=r[a];s.once&&r.splice(a,1),o.push(s)}for(var p=o.length-1;p>=0;p--)o[p].callback.apply(i,e);return this},n.prototype.emit=function(t){for(var i,e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return(i=this)._emit.apply(i,[t,this].concat(e))},n.prototype.cemit=function(t,i){for(var e,n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return(e=this)._emit.apply(e,[t,i].concat(n))},n.prototype._emitAll=function(t){for(var i=[],e=arguments.length-1;e-- >0;)i[e]=arguments[e+1];if(null==t)return this;var n=[];for(var r in this._events)for(var o=this._events[r]||[],a=o.length-1;a>=0;a--){var s=o[a];s.once&&o.splice(a,1),n.push(s)}for(var p=n.length-1;p>=0;p--)n[p].callback.apply(t,i);return this},n.prototype.emitAll=function(){for(var t,i=[],e=arguments.length;e--;)i[e]=arguments[e];return(t=this)._emitAll.apply(t,[this].concat(i))},n.prototype.cemitAll=function(t){for(var i,e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return(i=this)._emitAll.apply(i,[t].concat(e))},n.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this};var r=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(n),o={},a={delta:1},s=function(){throw new Error("This class can not instantiate.")};s.addObserver=function(t,i){o[t]=i,i.updateTask(a)},s.removeObserver=function(t){delete o[t]},s.done=function(t){for(var i in a=t,o)o[i].updateTask(t)};var p={},h=function(t){function e(e,n){var r=this;void 0===e&&(e={}),void 0===n&&(n={}),t.call(this);var o=new i.Application(e);o.stop();var a=o.stage,p=o.view;p.style.position="absolute";var h=n.autoAdjust||!1;if(this._piximData={isRun:!1,app:o,stage:a,view:p,container:n.container||document.body,layers:{},options:n},this._piximData.app.ticker.add((function(t){s.done({delta:t})})),h)if(!0===h){var u=function(){r.fullScreen()};window.addEventListener("resize",u),u()}else{var c=function(){h(r)};window.addEventListener("resize",c),c()}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={app:{configurable:!0},stage:{configurable:!0},view:{configurable:!0},container:{configurable:!0}};return n.app.get=function(){return this._piximData.app},n.stage.get=function(){return this._piximData.stage},n.view.get=function(){return this._piximData.view},n.container.get=function(){return this._piximData.container},n.container.set=function(t){this._piximData.container=t||document.body,this._piximData.view.parentNode&&this._piximData.container.appendChild(this._piximData.view)},e.prototype._hasLayer=function(t){return!!this._piximData.layers[t]},e.prototype.addLayer=function(t){return this._hasLayer(t)||(this._piximData.layers[t]=this._piximData.stage.addChild(new i.Container)),this},e.prototype.removeLayer=function(t){return this._hasLayer(t)?(this._piximData.stage.removeChild(this._piximData.layers[t]),delete this._piximData.layers[t],this):this},e.prototype.attachAsync=function(t,i){var e=this;return void 0===i&&(i="anonymous"),t.buildAsync().then((function(n){return e.addLayer(i),p[t.contentID]=n,e._piximData.layers[i].addChild(n),n}))},e.prototype.detach=function(t,i){var e=p[t.contentID];return e?(this._destroyRoot(e,i),delete p[t.contentID],this):this},e.prototype.play=function(){return this._piximData.container.appendChild(this._piximData.view),this.start()},e.prototype.start=function(){return this._piximData.app.start(),this},e.prototype.stop=function(){return this._piximData.app.stop(),this},e.prototype.destroy=function(t,i){var e=[];for(var n in p)e.push(n);for(var r=0;r<e.length;r++)delete p[e[r]];return this._piximData.app.destroy(t,i),this},e.prototype._destroyRoot=function(t,i){t.destroy(i)},e.prototype.pause=function(t){return t?this._piximData.app.stop():this._piximData.app.start(),this},e.prototype.fullScreen=function(t){var i=this._piximData.view,e=t||{x:0,y:0,width:this._piximData.container.offsetWidth||window.innerWidth,height:this._piximData.container.offsetHeight||window.innerHeight};return e.width/e.height>i.width/i.height?this.adjustHeight(e.height).toCenter(e).toTop(e):this.adjustWidth(e.width).toMiddle(e).toLeft(e)},e.prototype.adjustWidth=function(t){var i=this._piximData.view,e=t||this._piximData.container.offsetWidth||window.innerWidth,n=e/i.width*i.height;return i.style.width=e+"px",i.style.height=n+"px",this},e.prototype.adjustHeight=function(t){var i=this._piximData.view,e=t||this._piximData.container.offsetHeight||window.innerHeight,n=e/i.height*i.width;return i.style.height=e+"px",i.style.width=n+"px",this},e.prototype.toLeft=function(t){var i=this._piximData.view,e=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return i.style.left=e.x+"px",this},e.prototype.toCenter=function(t){var i=this._piximData.view,e=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return i.style.left=(e.width-this._getViewRect().width)/2+e.x+"px",this},e.prototype.toRight=function(t){var i=this._piximData.view,e=t||{x:0,width:this._piximData.container.offsetWidth||window.innerWidth};return i.style.left=e.width-this._getViewRect().width+e.x+"px",this},e.prototype.toTop=function(t){var i=this._piximData.view,e=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return i.style.top=e.y+"px",this},e.prototype.toMiddle=function(t){var i=this._piximData.view,e=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return i.style.top=(e.height-this._getViewRect().height)/2+e.y+"px",this},e.prototype.toBottom=function(t){var i=this._piximData.view,e=t||{y:0,height:this._piximData.container.offsetHeight||window.innerHeight};return i.style.top=e.height-this._getViewRect().height+e.y+"px",this},e.prototype._getViewRect=function(){var t=this._piximData.view;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(e.prototype,n),e}(r),u=function(t,i){this._taskData={context:null==i?this:i,enabled:!0,index:-1,callbacks:[],value:null},this.add(t)},c={enabled:{configurable:!0},value:{configurable:!0}};c.enabled.get=function(){return this._taskData.enabled},c.enabled.set=function(t){this._taskData.enabled=t},u.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var i=this._taskData.callbacks,e=(i.length,0);e<t.length;e++)t[e]instanceof Function&&i.push(t[e]);return this},u.prototype.done=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];if(this._taskData.enabled){var e=this._taskData.callbacks[this._taskData.index];if(e)return this._taskData.value=e.apply(this._taskData.context,t)}},u.prototype._to=function(t){return this._taskData.index=Number(t),this},u.prototype.first=function(){return this._to(0)},u.prototype.prev=function(){return this._to(this._taskData.index-1)},u.prototype.next=function(){return this._to(this._taskData.index+1)},u.prototype.to=function(t){return this._to(t)},u.prototype.finish=function(){return this._taskData.index=-1,this},u.prototype.reset=function(){return this._taskData.callbacks=[],this._taskData.index=-1,this._taskData.value=null,this},u.prototype.destroy=function(){this.reset()},c.value.get=function(){return this._taskData.value},Object.defineProperties(u.prototype,c);var f=function(t){function i(i,e){t.call(this,i,e),this.enabled=!0,this._piximData={emitter:new r}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.on=function(t,i){return this._piximData.emitter.on(t,i),this},i.prototype.once=function(t,i){return this._piximData.emitter.once(t,i),this},i.prototype.off=function(t,i){return this._piximData.emitter.off(t,i),this},i.prototype.emit=function(t){for(var i,e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return this._taskData.enabled?((i=this._piximData.emitter).emit.apply(i,[t].concat(e)),this):this},i.prototype.cemit=function(t,i){for(var e,n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return this._taskData.enabled?((e=this._piximData.emitter).cemit.apply(e,[t,i].concat(n)),this):this},i.prototype.emitAll=function(){for(var t,i=[],e=arguments.length;e--;)i[e]=arguments[e];return this._taskData.enabled?((t=this._piximData.emitter).emitAll.apply(t,i),this):this},i.prototype.cemitAll=function(t){for(var i,e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return this._taskData.enabled?((i=this._piximData.emitter).cemitAll.apply(i,[t].concat(e)),this):this},i.prototype.clear=function(t){return void 0===t&&(t=""),this._piximData.emitter.clear(t),this},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.clear()},i}(u),l=0,d=function(t){function i(){for(var i=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];t.call(this),this._piximData={task:new f([],this),taskEnabledChildren:!0},this._piximData.task.first();var r=l++;this.on("added",(function(){s.addObserver(r,i)})),this.on("removed",(function(){s.removeObserver(r)}))}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var e={taskEnabled:{configurable:!0},taskEnabledChildren:{configurable:!0},task:{configurable:!0}};return i.prototype.updateTask=function(t){var e=this._piximData.task;if(this.taskEnabled){for(var n=this,r=!0;n;){if(n instanceof i&&!n.taskEnabledChildren){r=!1;break}n=n.parent}r&&(e.done(t),e.cemitAll(this,t))}},e.taskEnabled.get=function(){return this._piximData.task.enabled},e.taskEnabled.set=function(t){this._piximData.task.enabled=t},e.taskEnabledChildren.get=function(){return this._piximData.taskEnabledChildren},e.taskEnabledChildren.set=function(t){this._piximData.taskEnabledChildren=t},e.task.get=function(){return this._piximData.task},i.prototype.destroy=function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];t.prototype.destroy.apply(this,i),this._piximData.task.destroy()},Object.defineProperties(i.prototype,e),i}(i.Container),_={},y=function(){this._manifests={}};y.prototype.add=function(t,i){void 0===i&&(i={});var e=i.unrequired||!1;for(var n in t)this._manifests[n]={url:t[n],unrequired:e}},y.prototype.getAsync=function(t,i){var e=this._manifests,n={},r={},o=_;for(var a in e){var s=e[a],p=this._resolvePath(s.url,t),h=p.replace(/\?.*/,"");o[h]?n[a]=o[h]:r[a]={url:p,name:h,unrequired:s.unrequired}}return 0===Object.keys(r).length?Promise.resolve(n):this._loadAsync(r,i).then((function(t){for(var i in t)n[i]=t[i].resource,t[i].error||(o[r[i].name]=t[i].resource);return n}))},y.prototype._loadAsync=function(t,i){return Promise.resolve({})},y.prototype._resolvePath=function(t,e){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:i.utils.url.resolve(e,t)};var v=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e){return new Promise((function(n,r){var o=new i.Loader;for(var a in e&&(o.defaultQueryString="_fv="+e),t)o.add(a,t[a].url,{crossOrigin:!0});var s={};o.load((function(i,e){var o,a;for(var p in e){var h=e[p];if(!h)return void r((o={},o[p]=t[p].url,o));if(h.error&&!t[p].unrequired)return void r((a={},a[p]=t[p].url,a));s[p]={resource:h.texture,error:!!h.error}}n(s)}))}))},e}(y),m=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t,e){return new Promise((function(n,r){var o=new i.Loader;for(var a in e&&(o.defaultQueryString="_fv="+e),t)o.add(a,t[a].url,{crossOrigin:!0});var s={};o.load((function(i,e){var o,a;for(var p in e)if(t[p]){var h=e[p];if(!h)return void r((o={},o[p]=t[p].url,o));var u=h.textures||{};h.error;if(h.error&&!t[p].unrequired)return void r((a={},a[p]=t[p].url,a));s[p]={resource:u,error:!!h.error}}n(s)}))}))},e}(y),x=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t,i){return new Promise((function(n,r){var o,a={};function s(t,i,e){a[t]={resource:i,error:e},++h<p||n(a)}var p=0,h=0;for(var u in t){if(!e.Howl)return console.warn('You need "howler.js" to load sound asset.'),void r((o={},o[u]=t[u].url,o));++p}var c=function(n){var o=f,a=i?t[o].url+(t[o].url.match(/\?/)?"&":"?")+"_fv="+i:t[o].url,p=new e.Howl({src:a,onload:function(){s(o,p,!1)},onloaderror:function(){var i;t[o].unrequired?s(o,p,!0):r(((i={})[o]=t[o].url,i))}})};for(var f in t)c()}))},i}(y),g=function(t){this._piximData={width:t.width,height:t.height,lib:t.lib,resources:t.resources,vars:t.vars}},D={width:{configurable:!0},height:{configurable:!0},lib:{configurable:!0},resources:{configurable:!0},vars:{configurable:!0}};D.width.get=function(){return this._piximData.width},D.height.get=function(){return this._piximData.height},D.lib.get=function(){return this._piximData.lib},D.resources.get=function(){return this._piximData.resources},D.vars.get=function(){return this._piximData.vars},Object.defineProperties(g.prototype,D);var w={},b=0;function k(){return{images:new v,spritesheets:new m,sounds:new x}}var A=function t(i,e){void 0===i&&(i={}),void 0===e&&(e=t._piximData);var n=(i.basepath||"").replace(/([^/])$/,"$1/");"object"!=typeof i.version&&(i.version={images:i.version||"",spritesheets:i.version||"",sounds:i.version||""}),this._piximData={contentID:(++b).toString(),basepath:n,version:i.version,$:new g({width:e.config.width,height:e.config.height,lib:e.lib,resources:{},vars:{}}),manifests:e.manifests,additionalManifests:k(),preloadPromise:null,postloadPromise:null}},P={contentID:{configurable:!0}};A.create=function(t){if(void 0===t&&(t=""),t&&t in w)throw new Error("Content key '"+t+"' has already exists.");var i=function(t){function i(e){void 0===e&&(e={}),t.call(this,e,i._piximData)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(A);return i._piximData={config:{width:450,height:800},manifests:k(),lib:{}},t?w[t]=i:i},A.get=function(t){return w[t]},A.remove=function(t){delete w[t]},A.defineManifests=function(t,i,e){return void 0===e&&(e={}),this._piximData.manifests[t]?(this._piximData.manifests[t].add(i,e),this):this},A.defineImages=function(t,i){return void 0===i&&(i={}),this.defineManifests("images",t,i)},A.defineSpritesheets=function(t,i){return void 0===i&&(i={}),this.defineManifests("spritesheets",t,i)},A.defineSounds=function(t,i){return void 0===i&&(i={}),this.defineManifests("sounds",t,i)},A.setConfig=function(t){return this._piximData.config.width=t.width,this._piximData.config.height=t.height,this},A.defineLibraries=function(t){for(var i in t)this._piximData.lib[i]=t[i];return this},P.contentID.get=function(){return this._piximData.contentID},A.prototype.addManifests=function(t,i,e){return void 0===e&&(e={}),this._piximData.additionalManifests[t]?(this._piximData.additionalManifests[t].add(i,e),this):this},A.prototype.addImages=function(t,i){return void 0===i&&(i={}),this.addManifests("images",t,i)},A.prototype.addSpritesheets=function(t,i){return void 0===i&&(i={}),this.addManifests("spritesheets",t,i)},A.prototype.addSounds=function(t,i){return void 0===i&&(i={}),this.addManifests("sounds",t,i)},A.prototype.addVars=function(t){for(var i in t)this._piximData.$.vars[i]=t[i];return this},A.prototype.prepareAsync=function(){var t=this;return this.preloadClassAssetAsync().then((function(){return t.preloadInstanceAssetAsync()}))},A.prototype.buildAsync=function(){var t=this;if(!this._piximData.$.lib.root)throw new Error('There is no library named "root" in the content.');return this.prepareAsync().then((function(){return new t._piximData.$.lib.root(t._piximData.$)}))},A.prototype.preloadClassAssetAsync=function(){var t=this;return this._piximData.preloadPromise?this._piximData.preloadPromise:this._piximData.preloadPromise=this._loadAssetAsync(this._piximData.manifests).catch((function(i){throw t._piximData.preloadPromise=null,i}))},A.prototype.preloadInstanceAssetAsync=function(){var t=this;return this._piximData.postloadPromise?this._piximData.postloadPromise:this._piximData.postloadPromise=this._loadAssetAsync(this._piximData.additionalManifests).then((function(){t._piximData.postloadPromise=null})).catch((function(i){throw t._piximData.postloadPromise=null,i}))},A.prototype._loadAssetAsync=function(t){var i=this._piximData.basepath,e=this._piximData.version,n=this._piximData.$.resources;if(0===Object.keys(t).length)return Promise.resolve();var r=[],o=[];for(var a in t){var s=a;o.push(s),r.push(t[s].getAsync(i,e[s]||""))}return Promise.all(r).then((function(t){for(var i=0;i<t.length;i++)for(var e in n[o[i]]=n[o[i]]||{},t[i])n[o[i]][e]=t[i][e]})).catch((function(t){for(var i in t)console.error("Asset '"+i+": "+t[i]+"' cannot load.");throw t}))},Object.defineProperties(A.prototype,P),t.Application=h,t.Container=d,t.Content=A,t.ContentDeliver=g,t.ContentImageManifest=v,t.ContentManifestBase=y,t.ContentSoundManifest=x,t.ContentSpritesheetManifest=m,t.Emitter=r,t.Task=f}(this.Pixim=this.Pixim||{},PIXI,{Howl:"undefined"==typeof Howl?null:Howl});//# sourceMappingURL=Pixim.min.js.map
