{"version":3,"file":"Pixim.esm.js","sources":["../src/modules/Emitter.ts","../node_modules/@tawaship/task/dist/Task.esm.js","../src/modules/Task.ts","../src/modules/Container.ts","../src/modules/Application.ts","../src/modules/content/ManifestBase.ts","../src/modules/utils/index.ts","../src/modules/loader/LoaderBase.ts","../src/modules/loader/BlobLoader.ts","../src/modules/loader/TextureLoader.ts","../src/modules/loader/JsLoader.ts","../src/modules/loader/JsonLoader.ts","../src/modules/loader/SpritesheetLoader.ts","../src/modules/loader/SoundLoader.ts","../src/modules/content/TextureManifest.ts","../src/modules/content/SpritesheetManifest.ts","../src/modules/content/SoundManifest.ts","../src/modules/content/JsonManifest.ts","../src/modules/content/ContentDeliver.ts","../src/modules/content/Content.ts"],"sourcesContent":["import { Emitter as _Emitter } from '@tawaship/emitter';\r\n\r\n/**\r\n * {@link https://tawaship.github.io/Emitter/index.html | @tawaship/emitter}\r\n */\r\nexport class Emitter extends _Emitter {}","/*!\n * @tawaship/task - v1.1.0\n * \n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nclass Task {\r\n    constructor(callbacks, context) {\r\n        this._taskData = {\r\n            context: context == null ? this : context,\r\n            enabled: true,\r\n            index: -1,\r\n            callbacks: [],\r\n            value: null\r\n        };\r\n        this.add(callbacks);\r\n    }\r\n    /**\r\n     * Whether the task works.\r\n     */\r\n    get enabled() {\r\n        return this._taskData.enabled;\r\n    }\r\n    set enabled(enabled) {\r\n        this._taskData.enabled = enabled;\r\n    }\r\n    /**\r\n     * Add the task to the end of the list.\r\n     */\r\n    add(callbacks) {\r\n        if (!Array.isArray(callbacks)) {\r\n            callbacks = [callbacks];\r\n        }\r\n        const list = this._taskData.callbacks;\r\n        const flag = list.length === 0;\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n            if (!(callbacks[i] instanceof Function)) {\r\n                continue;\r\n            }\r\n            list.push(callbacks[i]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Execute the current task.\r\n     */\r\n    done(...args) {\r\n        if (!this._taskData.enabled) {\r\n            return;\r\n        }\r\n        const task = this._taskData.callbacks[this._taskData.index];\r\n        if (!task) {\r\n            return;\r\n        }\r\n        return this._taskData.value = task.apply(this._taskData.context, args);\r\n    }\r\n    _to(index) {\r\n        this._taskData.index = Number(index);\r\n        return this;\r\n    }\r\n    /**\r\n     * Change the current task to the first task.\r\n     */\r\n    first() {\r\n        return this._to(0);\r\n    }\r\n    /**\r\n     * Change the current task to the previos task.\r\n     */\r\n    prev() {\r\n        return this._to(this._taskData.index - 1);\r\n    }\r\n    /**\r\n     * Change the current task to the next task.\r\n     */\r\n    next() {\r\n        return this._to(this._taskData.index + 1);\r\n    }\r\n    /**\r\n     * Change the current task to the specified task.\r\n     */\r\n    to(index) {\r\n        return this._to(index);\r\n    }\r\n    /**\r\n     * Skips all tasks and changes to the finished state.\r\n     */\r\n    finish() {\r\n        this._taskData.index = -1;\r\n        return this;\r\n    }\r\n    /**\r\n     * Cancel all task and leave them unregistered.\r\n     */\r\n    reset() {\r\n        this._taskData.callbacks = [];\r\n        this._taskData.index = -1;\r\n        this._taskData.value = null;\r\n        return this;\r\n    }\r\n    /**\r\n     * Destroy instance.\r\n     */\r\n    destroy() {\r\n        this.reset();\r\n    }\r\n    /**\r\n     * The value returned by the last task executed.\r\n     */\r\n    get value() {\r\n        return this._taskData.value;\r\n    }\r\n}\n\nexport { Task };\n//# sourceMappingURL=Task.esm.js.map\n","import { ITickerData } from './Application';\r\nimport { Emitter } from './Emitter';\r\nimport { Task as _Task } from '@tawaship/task';\r\n\r\nexport interface ITaskData {\r\n\temitter: Emitter\r\n}\r\n\r\nexport interface ITaskDelegate {\r\n    (e: ITickerData): void;\r\n}\r\n\r\n/**\r\n * {@link https://tawaship.github.io/Task/index.html | @tawaship/task}\r\n */\r\nexport class Task extends _Task {\r\n\tprivate _piximData: ITaskData;\r\n\t\r\n\tconstructor(tasks: ITaskDelegate | ITaskDelegate[], context: any) {\r\n\t\tsuper(tasks, context);\r\n\t\t\r\n\t\tthis.enabled = true;\r\n\t\tthis._piximData = {\r\n\t\t\temitter: new Emitter()\r\n\t\t};\r\n\t}\r\n\t\r\n\ton(type: string, callback: ITaskDelegate) {\r\n\t\tthis._piximData.emitter.on(type, callback);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tonce(type: string, callback: ITaskDelegate) {\r\n\t\tthis._piximData.emitter.once(type, callback);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\toff(type: string, callback: ITaskDelegate) {\r\n\t\tthis._piximData.emitter.off(type, callback);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\temit(type: string, ...args: any[]) {\r\n\t\tif (!this._taskData.enabled) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.emitter.emit(type, ...args);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tcemit(type: string, context: any, ...args: any[]) {\r\n\t\tif (!this._taskData.enabled) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.emitter.cemit(type, context, ...args);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\temitAll(...args: any[]) {\r\n\t\tif (!this._taskData.enabled) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.emitter.emitAll(...args);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tcemitAll(context: any, ...args: any[]) {\r\n\t\tif (!this._taskData.enabled) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.emitter.cemitAll(context, ...args);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tclear(type: string = '') {\r\n\t\tthis._piximData.emitter.clear(type);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tdestroy() {\r\n\t\tsuper.destroy();\r\n\t\tthis.clear();\r\n\t}\r\n}","import { Container as PixiContainer } from 'pixi.js';\r\nimport { Task } from './Task';\r\nimport { ITickerData } from './Application';\r\n\r\nexport interface IContainerData {\r\n\ttask: Task,\r\n\ttaskEnabledChildren: boolean\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _lastObserverID = 0;\r\n\r\n/**\r\n * {@link https://pixijs.download/v5.3.2/docs/docs/PIXI.Container.html}\r\n */\r\nexport class Container extends PixiContainer {\r\n\tprotected _piximData: IContainerData;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._piximData = {\r\n\t\t\ttask: new Task([], this),\r\n\t\t\ttaskEnabledChildren: true\r\n\t\t};\r\n\t\t\r\n\t\tthis._piximData.task.first();\r\n\t\t\r\n\t\tconst _observerID = _lastObserverID++;\r\n\t\t/*\r\n\t\tthis.on('added', () => {\r\n\t\t\tTaskManager.addObserver(_observerID, this);\r\n\t\t});\r\n\t\t\r\n\t\tthis.on('removed', () => {\r\n\t\t\tTaskManager.removeObserver(_observerID);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\t\r\n\tupdateTask(e: ITickerData) {\r\n\t\tconst task: Task = this._piximData.task;\r\n\t\t\r\n\t\tif (!this._piximData.task.enabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t/*\r\n\t\tlet p: PIXI.DisplayObject = this;\r\n\t\tlet f = true;\r\n\t\t\r\n\t\twhile (p) {\r\n\t\t\tif (p instanceof Container && !p.taskEnabledChildren) {\r\n\t\t\t\tf = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tp = p.parent;\r\n\t\t}\r\n\t\t\r\n\t\tif (!f) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\ttask.done(e);\r\n\t\t\r\n\t\ttask.cemitAll(this, e);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Whether the task works.\r\n\t */\r\n\tget taskEnabled(): boolean {\r\n\t\treturn this._piximData.task.enabled;\r\n\t}\r\n\t\r\n\tset taskEnabled(enabled) {\r\n\t\tthis._piximData.task.enabled = enabled;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Whether the children and subsequent tasks work.\r\n\t */\r\n\tget taskEnabledChildren(): boolean {\r\n\t\treturn this._piximData.taskEnabledChildren;\r\n\t}\r\n\t\r\n\tset taskEnabledChildren(enabled) {\r\n\t\tthis._piximData.taskEnabledChildren = enabled;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Task object that works only while it is being displayed.\r\n\t */\r\n\tget task(): Task {\r\n\t\treturn this._piximData.task;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Destroy instance.\r\n\t * \r\n\t * @override\r\n\t */\r\n\tdestroy(...args: any[]): void {\r\n\t\tsuper.destroy(...args);\r\n\t\tthis._piximData.task.destroy();\r\n\t}\r\n}","import { DisplayObject, Application as PixiApplication, Container as PixiContainer, Ticker } from \"pixi.js\";\r\nimport { Content } from './content/Content';\r\nimport { Container } from './Container';\r\nimport { Emitter } from './Emitter';\r\n//import { TaskManager } from './TaskManager';\r\n\r\nexport interface IContentDictionary {\r\n\t[id: string]: Content;\r\n}\r\n\r\nexport interface IRootDictionary {\r\n\t[id: string]: PixiContainer;\r\n}\r\n\r\nexport interface ILayerDictionary{\r\n\t[name: string]: Layer;\r\n}\r\n\r\nexport interface ITickerData {\r\n\tdelta: number\r\n}\r\n\r\nexport interface IAdjustDelegate {\r\n\t(app: Application): void;\r\n}\r\n\r\nexport type TAutoAdjust = boolean | IAdjustDelegate;\r\n\r\nexport interface IAutoAdjustDelegate {\r\n\t(): void;\r\n}\r\n\r\nexport type TAutoAdjuster = IAutoAdjustDelegate | null;\r\n\r\nexport interface IApplicationOption {\r\n\t/**\r\n\t * Parent node of canvas element.\r\n\t */\r\n\tcontainer?: HTMLElement;\r\n\t\r\n\t/**\r\n\t * Whether to automatically resize the canvas when resizing the window.<br />\r\n\t * Or the resizing process to be executed at that time.\r\n\t */\r\n\tautoAdjust?: TAutoAdjust;\r\n}\r\n\r\nexport interface IApplicationData {\r\n\tisRun: boolean;\r\n\t/**\r\n\t * {@link https://pixijs.download/v5.3.2/docs/PIXI.Application.html | PixiApplication}\r\n\t */\r\n\tapp: PixiApplication;\r\n\tcontainer: HTMLElement;\r\n\tlayers: ILayerDictionary;\r\n\tautoAdjuster: TAutoAdjuster;\r\n\troots: IRootDictionary;\r\n\tcontents: IContentDictionary;\r\n}\r\n\r\nexport interface ISize {\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface IPosition {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nexport interface IHorizontal {\r\n\tx: number;\r\n\twidth: number;\r\n}\r\n\r\nexport interface IVertical {\r\n\ty: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface IRect extends ISize, IPosition {}\r\n\r\nexport interface IDestroyOptions {\r\n\tchildren?: boolean;\r\n\ttexture?: boolean;\r\n\tbaseTexture?: boolean;\r\n}\r\n\r\nexport class Layer extends PixiContainer {}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction taskHandler(obj: PixiContainer, e: ITickerData): void {\r\n\tif (obj instanceof Container) {\r\n\t\tobj.updateTask(e);\r\n\t\t\r\n\t\tif (!obj.taskEnabledChildren) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst children: DisplayObject[] = [];\r\n\t\r\n\tfor (let i = 0; i < obj.children.length; i++) {\r\n\t\tchildren.push(obj.children[i]);\r\n\t}\r\n\t\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst child = children[i];\r\n\t\t\r\n\t\tif (child instanceof PixiContainer) {\r\n\t\t\ttaskHandler(child, e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class Application extends Emitter {\r\n\tprotected _piximData: IApplicationData;\r\n\t\r\n\t/**\r\n\t * @param pixiOptions Optional data for {@link https://pixijs.download/v5.3.2/docs/PIXI.Application.html | PixiApplication} constructor.\r\n\t * @param piximOptions Optional data for Pixim.\r\n\t */\r\n\tconstructor(pixiOptions: Object = {}, piximOptions: IApplicationOption = {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tconst app: PixiApplication = new PixiApplication(pixiOptions);\r\n\t\tapp.stop();\r\n\t\t\r\n\t\tapp.view.style.position = 'absolute';\r\n\t\t\r\n\t\tconst autoAdjust: TAutoAdjust = piximOptions.autoAdjust || false;\r\n\t\t\r\n\t\tthis._piximData = {\r\n\t\t\tisRun: false,\r\n\t\t\tapp,\r\n\t\t\tcontainer: piximOptions.container || document.body,\r\n\t\t\tlayers: {},\r\n\t\t\tautoAdjuster: null,\r\n\t\t\troots: {},\r\n\t\t\tcontents: {}\r\n\t\t};\r\n\t\t\r\n\t\tconst ticker: Ticker = this._piximData.app.ticker;\r\n\t\t\r\n\t\tticker.add((delta: number) => {\r\n\t\t\t//TaskManager.done({ delta });\r\n\t\t\ttaskHandler(this._piximData.app.stage, { delta });\r\n\t\t});\r\n\t\t\r\n\t\tif (autoAdjust) {\r\n\t\t\tif (autoAdjust === true) {\r\n\t\t\t\tthis.autoAdjuster = () => {\r\n\t\t\t\t\tthis.fullScreen()\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthis.autoAdjuster = () => {\r\n\t\t\t\t\tautoAdjust(this);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tget app(): PixiApplication {\r\n\t\treturn this._piximData.app;\r\n\t}\r\n\t\r\n\tget stage(): PixiContainer {\r\n\t\treturn this._piximData.app.stage;\r\n\t}\r\n\t\r\n\tget view(): HTMLCanvasElement {\r\n\t\treturn this._piximData.app.view;\r\n\t}\r\n\t\r\n\tget container(): HTMLElement {\r\n\t\treturn this._piximData.container;\r\n\t}\r\n\t\r\n\tset container(container: HTMLElement) {\r\n\t\tthis._piximData.container = container || document.body;\r\n\t\tif (this._piximData.app.view.parentNode) {\r\n\t\t\tthis._piximData.container.appendChild(this._piximData.app.view);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Whether application has layer.\r\n\t */\r\n\tprivate _hasLayer(name: string): boolean {\r\n\t\treturn !!this._piximData.layers[name];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Add layer to application.\r\n\t */\r\n\taddLayer(name: string) {\r\n\t\tif (this._hasLayer(name)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.layers[name] = this._piximData.app.stage.addChild(new Layer());\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Remove layer form application.\r\n\t */\r\n\tremoveLayer(name: string) {\r\n\t\tif (!this._hasLayer(name)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.app.stage.removeChild(this._piximData.layers[name]);\r\n\t\tdelete(this._piximData.layers[name]);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Attach content to application.\r\n\t */\r\n\tattachAsync(content: Content, layerName: string = 'anonymous'): Promise<PixiContainer> {\r\n\t\treturn content.buildAsync()\r\n\t\t\t.then((root: PixiContainer) => {\r\n\t\t\t\tthis.detach(content);\r\n\t\t\t\t\r\n\t\t\t\tthis.addLayer(layerName);\r\n\t\t\t\t\r\n\t\t\t\tthis._piximData.roots[content.contentID] = root;\r\n\t\t\t\tthis._piximData.contents[content.contentID] = content;\r\n\t\t\t\tthis._piximData.layers[layerName].addChild(root);\r\n\t\t\t\t\r\n\t\t\t\treturn root;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Detach content from application.\r\n\t */\r\n\tdetach(content: Content, stageOptions: IDestroyOptions = { children: true }) {\r\n\t\tconst root: PixiContainer = this._piximData.roots[content.contentID];\r\n\t\t\r\n\t\tif (!root) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._destroyRoot(root, stageOptions);\r\n\t\tdelete(this._piximData.roots[content.contentID]);\r\n\t\tdelete(this._piximData.contents[content.contentID]);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Start application and displa viewy.\r\n\t */\r\n\tplay() {\r\n\t\tthis._piximData.container.appendChild(this._piximData.app.view);\r\n\t\t\r\n\t\treturn this.start();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Start application.\r\n\t */\r\n\tstart() {\r\n\t\tthis._piximData.app.start();\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Stop application.\r\n\t */\r\n\tstop() {\r\n\t\tthis._piximData.app.stop();\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Pause (or restart) application.\r\n\t */\r\n\tpause(paused: boolean) {\r\n\t\tif (paused) {\r\n\t\t\tthis.stop();\r\n\t\t} else {\r\n\t\t\tthis.start();\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tget autoAdjuster() {\r\n\t\treturn this._piximData.autoAdjuster;\r\n\t}\r\n\t\r\n\tset autoAdjuster(autoAdjuster: TAutoAdjuster) {\r\n\t\tif (this._piximData.autoAdjuster) {\r\n\t\t\twindow.removeEventListener('resize', this._piximData.autoAdjuster);\r\n\t\t}\r\n\t\t\r\n\t\tif (!autoAdjuster) {\r\n\t\t\tthis._piximData.autoAdjuster = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.autoAdjuster = autoAdjuster;\r\n\t\twindow.addEventListener('resize', autoAdjuster);\r\n\t\tautoAdjuster();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Pre process to destroy application.\r\n\t */\r\n\tpreDestroy() {\r\n\t\tfor (let i in this._piximData.contents) {\r\n\t\t\tthis._piximData.contents[i].destroy();\r\n\t\t}\r\n\t\t\r\n\t\tthis.autoAdjuster = null;\r\n\t\tthis._piximData.layers = {};\r\n\t\tthis._piximData.roots = {};\r\n\t\tthis._piximData.contents = {};\r\n\t}\r\n\t\r\n\t/**\r\n\t * Destroy application.\r\n\t */\r\n\tdestroy(removeView?: boolean, stageOptions?: IDestroyOptions) {\r\n\t\tthis.preDestroy();\r\n\t\t\r\n\t\tthis._piximData.app.destroy(removeView, stageOptions);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tprivate _destroyRoot(root: PixiContainer, stageOptions?: IDestroyOptions): void {\r\n\t\troot.destroy(stageOptions);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resize canvas to fit specified rectangle.\r\n\t * \r\n\t * @param rect Rectangle to adjust.\r\n\t */\r\n\tfullScreen(rect?: IRect) {\r\n\t\tconst view: HTMLCanvasElement = this._piximData.app.view;\r\n\t\tconst r: IRect = rect || {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth,\r\n\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tif (r.width / r.height > view.width / view.height) {\r\n\t\t\treturn this.adjustHeight(r.height).toCenter(r).toTop(r);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.adjustWidth(r.width).toMiddle(r).toLeft(r);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resize canvas to fit specified width.\r\n\t * \r\n\t * @param width Width to adjust.\r\n\t */\r\n\tadjustWidth(width?: number) {\r\n\t\tconst view: HTMLCanvasElement = this._piximData.app.view;\r\n\t\tconst w: number = width || this._piximData.container.offsetWidth || window.innerWidth;\r\n\t\t\r\n\t\tconst h: number = w / view.width * view.height;\r\n\t\t\r\n\t\t//const frame = this._piximData.frame;\r\n\t\tview.style.width = `${w}px`;\r\n\t\tview.style.height = `${h}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resize canvas to fit specified height.\r\n\t * \r\n\t * @param height Height to adjust.\r\n\t */\r\n\tadjustHeight(height?: number) {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\tconst h: number = height || this._piximData.container.offsetHeight || window.innerHeight;\r\n\t\t\r\n\t\tconst w = h / view.height * view.width;\r\n\t\t\r\n\t\t//const frame = this._piximData.frame;\r\n\t\tview.style.height = `${h}px`;\r\n\t\tview.style.width = `${w}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Left justified with respect to the reference data.\r\n\t * \r\n\t * @param horizontal Horizontal data used to calculate the position.\r\n\t */\r\n\ttoLeft(horizontal?: IHorizontal) {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\tx: 0,\r\n\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth\r\n\t\t};\r\n\t\t\r\n\t\tview.style.left = `${hol.x}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Center justified with respect to the reference data.\r\n\t * \r\n\t * @param horizontal Horizontal data used to calculate the position.\r\n\t */\r\n\ttoCenter(horizontal?: IHorizontal) {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\tx: 0,\r\n\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth\r\n\t\t};\r\n\t\t\r\n\t\tview.style.left = `${(hol.width - this._getViewRect().width) / 2 + hol.x}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Right justified with respect to the reference data.\r\n\t * \r\n\t * @param horizontal Horizontal data used to calculate the position.\r\n\t */\r\n\ttoRight(horizontal?: IHorizontal) {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\tx: 0,\r\n\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth\r\n\t\t};\r\n\t\t\r\n\t\tview.style.left = `${hol.width - this._getViewRect().width + hol.x}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Top justified with respect to the reference data.\r\n\t * \r\n\t * @param vertical Vertical data used to calculate the position.\r\n\t */\r\n\ttoTop(vertical?: IVertical) {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\tconst ver: IVertical = vertical || {\r\n\t\t\ty: 0,\r\n\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tview.style.top = `${ver.y}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Middle justified with respect to the reference data.\r\n\t * \r\n\t * @param vertical Vertical data used to calculate the position.\r\n\t */\r\n\ttoMiddle(vertical?: IVertical) {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\tconst ver: IVertical = vertical || {\r\n\t\t\ty: 0,\r\n\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tview.style.top = `${(ver.height - this._getViewRect().height) / 2 + ver.y}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Bottom justified with respect to the reference data.\r\n\t * \r\n\t * @param vertical Vertical data used to calculate the position.\r\n\t */\r\n\ttoBottom(vertical?: IVertical) {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\tconst ver: IVertical = vertical || {\r\n\t\t\ty: 0,\r\n\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t};\r\n\t\t\r\n\t\tview.style.top = `${ver.height - this._getViewRect().height + ver.y}px`;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tprivate _getViewRect(): IRect {\r\n\t\tconst view = this._piximData.app.view;\r\n\t\t\r\n\t\treturn {\r\n\t\t\tx: parseInt(view.style.left.replace('px', '')),\r\n\t\t\ty: parseInt(view.style.top.replace('px', '')),\r\n\t\t\twidth: parseInt(view.style.width.replace('px', '')),\r\n\t\t\theight: parseInt(view.style.height.replace('px', ''))\r\n\t\t};\r\n\t}\r\n}","import { Emitter } from '@tawaship/emitter';\r\nimport { ILoaderOption, ILoaderXhrOption, LoaderBase, LoaderResource, TLoaderResourceVersion } from '../loader';\r\n\r\nexport interface IManifestClass<TTarget, TRawResource, TResource extends LoaderResource<TRawResource>> {\r\n\tnew(type: string): ManifestBase<TTarget, TRawResource, TResource>;\r\n}\r\n\r\nexport interface IResourceManagerData<T> {\r\n\ttarget: T;\r\n\tunrequired: boolean;\r\n}\r\n\r\nexport interface IResourceManagerManifest<T> {\r\n\t[ name: string ]: IResourceManagerData<T>;\r\n}\r\n\r\nexport interface IManifestOption {\r\n\tunrequired?: boolean;\r\n}\r\n\r\nexport type TManifestResourceVersion = TLoaderResourceVersion;\r\n\r\nexport interface IManifestLoaderXhrOptionFacotryDelegate {\r\n\t(type: string, url: string): ILoaderXhrOption;\r\n}\r\n\r\nexport type TManifestLoaderXhrOption = IManifestLoaderXhrOptionFacotryDelegate | boolean | ILoaderXhrOption;\r\n\r\nexport interface IManifestLoaderOption {\r\n\tbasepath: string;\r\n\tversion: TManifestResourceVersion;\r\n\txhr: TManifestLoaderXhrOption;\r\n\ttypeOptions: ILoaderOption;\r\n}\r\n\r\nexport const EVENT_LOADER_ASSET_LOADED = 'loaderAssetLoaded';\r\n\r\nexport abstract class ManifestBase<TTarget, TRawResource, TResource extends LoaderResource<TRawResource>> extends Emitter {\r\n\tprotected _data: IResourceManagerManifest<TTarget> = {};\r\n\tprotected _resources: Record<string, TResource> = {};\r\n\tprivate _type: string;\r\n\t\r\n\tconstructor(type: string) {\r\n\t\tsuper();\r\n\t\tthis._type = type;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Register targetss.\r\n\t */\r\n\tadd(targets: Record<string, TTarget>, options: IManifestOption = {}): void {\r\n\t\tconst unrequired = options.unrequired || false;\r\n\t\t\r\n\t\tfor (let i in targets) {\r\n\t\t\tthis._data[i] = {\r\n\t\t\t\ttarget: targets[i],\r\n\t\t\t\tunrequired\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\t\r\n\tget count() {\r\n\t\treturn Object.keys(this._data).length;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get resources.\r\n\t */\r\n\tgetAsync(options: IManifestLoaderOption) {\r\n        const res: Record<string, TRawResource> = {};\r\n\r\n\t\tif (Object.keys(this._data).length === 0) {\r\n\t\t\treturn Promise.resolve(res);\r\n\t\t}\r\n\t\t\r\n\t\tconst loader = this._createLoader();\r\n\t\tloader.onLoaded = (resource: TResource) => {\r\n\t\t\tthis.emit(EVENT_LOADER_ASSET_LOADED, resource);\r\n\t\t};\r\n\t\t\r\n\t\tconst loaderOptions: ILoaderOption = Object.assign({}, options.typeOptions, {\r\n\t\t\tbasepath: options.basepath,\r\n\t\t\tversion: options.version,\r\n\t\t\txhr: ((type: string, xhr: TManifestLoaderXhrOption) => {\r\n\t\t\t\tif (typeof(xhr) === 'function') {\r\n\t\t\t\t\treturn (url: string) => {\r\n\t\t\t\t\t\treturn xhr(type, url);\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn xhr;\r\n\t\t\t})(this._type, options.xhr)\r\n\t\t});\r\n\t\t\r\n\t\tconst data: Record<string, TTarget> = {};\r\n\t\t\r\n\t\tfor (let i in this._data) {\r\n\t\t\tdata[i] = this._data[i].target;\r\n\t\t}\r\n\t\t\r\n\t\treturn loader.loadAllAsync(data, loaderOptions)\r\n\t\t\t.then(resources => {\r\n\t\t\t\tfor (let i in resources) {\r\n\t\t\t\t\tconst resource = resources[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (resource.error && !this._data[i].unrequired) {\r\n\t\t\t\t\t\tthrow resource.error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (let i in resources) {\r\n\t\t\t\t\tconst resource = resources[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._resources[i] = resource;\r\n\t\t\t\t\tres[i] = resource.data;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tprotected abstract _createLoader(): LoaderBase<TTarget, TRawResource, TResource>;\r\n\t\r\n\tdestroyResources() {\r\n\t\tfor (let i in this._resources) {\r\n\t\t\tthis._resources[i].destroy();\r\n\t\t}\r\n\t}\r\n}","import * as PIXI from 'pixi.js';\r\n\r\nexport function resolveUri(basepath: string, uri: any, version?: string | number) {\r\n\tif (typeof(uri) !== 'string') {\r\n\t\treturn uri;\r\n\t}\r\n\t\t\r\n\tif (!isUrl(uri)) {\r\n\t\treturn uri;\r\n\t}\r\n\t\r\n\tbasepath = basepath || '';\r\n\tversion = version || '';\r\n\tconst preUri = resolvePath(basepath, uri);\r\n\t\r\n\treturn version ? resolveQuery(preUri, { _fv: version }) : preUri;\r\n}\r\n\r\n\r\nexport function resolvePath(basepath: string, path: string) {\r\n\tif (!isUrl(path)) {\r\n\t\treturn path;\r\n\t}\r\n\t\r\n\treturn PIXI.utils.url.resolve(basepath, path);\r\n}\r\n\r\nexport function isUrl(uri: any) {\r\n\tif (uri.indexOf('data:') === 0) {\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tif (uri.indexOf('blob:') === 0) {\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n\r\nexport function resolveQuery(uri: string, queries: { [ name: string ]: any }): string {\r\n\tif (!isUrl(uri)) {\r\n\t\treturn uri;\r\n\t} else {\r\n\t\tconst q: string[] = [];\r\n\t\t\r\n\t\tconst t = uri.split('?');\r\n\t\t\r\n\t\tif (t[1]) {\r\n\t\t\tconst search = t[1].split('&');\r\n\t\t\tfor (let i = 0; i < search.length; i++) {\r\n\t\t\t\tconst p = search[i].split('=');\r\n\t\t\t\tif (!(p[0] in queries)) {\r\n\t\t\t\t\tq.push(search[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i in queries) {\r\n\t\t\tq.push(`${i}=${queries[i]}`);\r\n\t\t}\r\n\t\t\r\n\t\treturn `${t[0]}?${q.join('&')}`;\r\n\t}\r\n}","import * as PIXI from 'pixi.js';\r\nimport * as utils from '../utils/index';\r\n\r\nexport abstract class LoaderResource<T> {\r\n\tprotected _data: T;\r\n\tprotected _error: any;\r\n\t\r\n\tconstructor(data: T, error: any) {\r\n\t\tthis._data = data;\r\n\t\tthis._error = error;\r\n\t}\r\n\t\r\n\tabstract destroy(): void;\r\n\t\r\n\tget data() {\r\n\t\treturn this._data;\r\n\t}\r\n\t\r\n\tget error() {\r\n\t\treturn this._error;\r\n\t}\r\n}\r\n\r\nexport interface IFetchRequestOption {\r\n\t[key: string]: string;\r\n}\r\n\r\nexport interface ILoaderXhrOption {\r\n\trequestOptions?: IFetchRequestOption;\r\n}\r\n\r\nexport interface ILoaderResolvedParam {\r\n\tsrc: string;\r\n\txhr?: ILoaderXhrOption;\r\n}\r\n\r\nexport interface ILoaderXhrOptionFacotryDelegate {\r\n\t(url: string): ILoaderXhrOption;\r\n}\r\n\r\nexport type TLoaderResourceVersion = string | number;\r\n\r\nexport interface ILoaderOption {\r\n\tbasepath?: string;\r\n\tversion?: TLoaderResourceVersion;\r\n\txhr?: ILoaderXhrOption | boolean | ILoaderXhrOptionFacotryDelegate;\r\n}\r\n\r\n\r\nexport abstract class LoaderBase<TTarget, TRawResource, TResource extends LoaderResource<TRawResource>> {\r\n\t/**\r\n\t * Callback when one of the resources has succeeded loading.\r\n\t */\r\n\tonLoaded?: (resource: TResource) => void;\r\n\t\r\n\tloadAsync(target: TTarget, options?: ILoaderOption) {\r\n\t\treturn (() => {\r\n\t\t\treturn this._loadAsync(target, options);\r\n\t\t})()\r\n\t\t.then(resource => {\r\n\t\t\tif (!resource.error) {\r\n\t\t\t\tthis.onLoaded && this.onLoaded(resource);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn resource;\r\n\t\t});\r\n\t}\r\n\t\r\n\tprotected abstract _loadAsync(target: TTarget, options?: ILoaderOption): Promise<TResource>;\r\n\t\r\n\tloadAllAsync(targets: Record<string, TTarget>, options?: ILoaderOption) {\r\n\t\tconst res: Record<string, TResource> = {};\r\n\t\t\r\n\t\tif (Object.keys(targets).length === 0) {\r\n\t\t\treturn Promise.resolve(res);\r\n\t\t}\r\n\t\t\r\n\t\tconst promises: Promise<void>[] = [];\r\n\t\t\r\n\t\tfor (let i in targets) {\r\n\t\t\tpromises.push(\r\n\t\t\t\tthis.loadAsync(targets[i], options)\r\n\t\t\t\t\t.then(resource => {\r\n\t\t\t\t\t\tres[i] = resource;\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\treturn Promise.all(promises)\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tprotected _resolveParams(target: any, options: ILoaderOption = {}): ILoaderResolvedParam {\r\n\t\tconst src = utils.resolveUri(options.basepath || '', target, options.version || '');\r\n\t\t\r\n\t\tif (typeof(src) !== 'string') {\r\n\t\t\treturn {\r\n\t\t\t\tsrc\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif (!utils.isUrl(src)) {\r\n\t\t\treturn {\r\n\t\t\t\tsrc\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif (!options.xhr) {\r\n\t\t\treturn {\r\n\t\t\t\tsrc\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif (options.xhr === true) {\r\n\t\t\treturn {\r\n\t\t\t\tsrc,\r\n\t\t\t\txhr: {}\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif (typeof(options.xhr) === 'function') {\r\n\t\t\treturn {\r\n\t\t\t\tsrc,\r\n\t\t\t\txhr: options.xhr(src)\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tsrc,\r\n\t\t\txhr: options.xhr || {}\r\n\t\t};\r\n\t}\r\n}","import { ILoaderOption, LoaderBase, LoaderResource } from \"./LoaderBase\";\r\n\r\nexport type TBlobLoaderRawResource = string;\r\n\r\nexport class BlobLoaderResource extends LoaderResource<TBlobLoaderRawResource> {\r\n\tdestroy() {\r\n\t\t(window.URL || window.webkitURL).revokeObjectURL(this._data);\r\n\t\tthis._data = '';\r\n\t}\r\n}\r\n\r\nexport type TBlobLoaderTarget = string;\r\n\r\nexport interface IBlobLoaderOption extends ILoaderOption {\r\n\r\n}\r\n\r\nexport class BlobLoader extends LoaderBase<TBlobLoaderTarget, TBlobLoaderRawResource, BlobLoaderResource> {\r\n\tprotected _loadAsync(target: TBlobLoaderTarget, options: IBlobLoaderOption = {}) {\r\n\t\treturn (() => {\r\n\t\t\tconst data = this._resolveParams(target, options);\r\n\t\t\tconst src = data.src;\r\n\t\t\tconst xhr = data.xhr;\r\n\t\t\t\r\n\t\t\tif (!xhr) {\r\n\t\t\t\treturn fetch(src);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn fetch(src, xhr.requestOptions || {});\r\n\t\t})()\r\n\t\t.then(res => {\r\n\t\t\tif (!res.ok) {\r\n\t\t\t\tthrow res.statusText;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res.blob();\r\n\t\t})\r\n\t\t.then(blob => {\r\n\t\t\treturn (window.URL || window.webkitURL).createObjectURL(blob);\r\n\t\t})\r\n\t\t.then(uri => new BlobLoaderResource(uri, null))\r\n\t\t.catch((e: any) => new BlobLoaderResource('', e));\r\n\t}\r\n}","import { BaseTexture, Texture } from 'pixi.js';\r\nimport { BlobLoader } from './BlobLoader';\r\nimport { ILoaderOption, LoaderBase, LoaderResource } from './LoaderBase';\r\n\r\nexport type TTextureLoaderRawResource = Texture | null;\r\n\r\nexport class TextureLoaderResource extends LoaderResource<TTextureLoaderRawResource> {\r\n\tdestroy() {\r\n\t\tif (this._data) {\r\n\t\t\tTextureLoaderResource.removeCache(this._data);\r\n\t\t\tthis._data.destroy(true);\r\n\t\t\tthis._data = null;\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic removeCache(texture: Texture) {\r\n\t\tTexture.removeFromCache(texture);\r\n        \r\n\t\tif (texture.baseTexture) {\r\n\t\t\tBaseTexture.removeFromCache(texture.baseTexture);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport type TTextureLoaderElementTarget = HTMLImageElement | HTMLVideoElement;\r\n\r\nexport type TTextureLoaderTarget = string | TTextureLoaderElementTarget;\r\n\r\nexport interface ITextureLoaderOption extends ILoaderOption {\r\n\r\n}\r\n\r\nexport class TextureLoader extends LoaderBase<TTextureLoaderTarget, TTextureLoaderRawResource, TextureLoaderResource> {\r\n\tprotected _loadAsync(target: TTextureLoaderTarget, options: ITextureLoaderOption = {}) {\r\n\t\treturn (() => {\r\n\t\t\tconst data = this._resolveParams(target, options);\r\n\t\t\tconst src = data.src;\r\n\t\t\tconst xhr = data.xhr;\r\n\t\t\t\r\n\t\t\tif (!xhr) {\r\n\t\t\t\treturn this._loadBaseTextureAsync(src);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst loader = new BlobLoader();\r\n\t\t\t\r\n\t\t\treturn loader.loadAsync(src, { xhr })\r\n\t\t\t\t.then(resource => {\r\n\t\t\t\t\tif (resource.error) {\r\n\t\t\t\t\t\tthrow resource.error;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!resource.data) {\r\n\t\t\t\t\t\tthrow 'invalid resource';\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn this._loadBaseTextureAsync(resource.data);\r\n\t\t\t\t});\r\n\t\t})()\r\n\t\t.then(baseTexture => new TextureLoaderResource(new Texture(baseTexture), null))\r\n\t\t.catch(e => new TextureLoaderResource(null, e));\r\n\t}\r\n\t\r\n\tprivate _loadBaseTextureAsync(target: TTextureLoaderTarget) {\r\n\t\tif (target instanceof HTMLImageElement || target instanceof HTMLVideoElement) {\r\n\t\t\ttarget.crossOrigin = 'anonymous';\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise<BaseTexture>((resolve, reject) => {\r\n\t\t\tconst bt = BaseTexture.from(target);\r\n\t\t\t\r\n\t\t\tif (bt.valid) {\r\n\t\t\t\tBaseTexture.removeFromCache(bt);\r\n\t\t\t\tresolve(bt);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tbt.on('loaded', (baseTexture: BaseTexture) => {\r\n\t\t\t\tBaseTexture.removeFromCache(baseTexture);\r\n\t\t\t\tresolve(baseTexture);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tbt.on('error', (baseTexture: BaseTexture, e: Error) => {\r\n\t\t\t\tBaseTexture.removeFromCache(baseTexture);\r\n\t\t\t\treject(e);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}","import { ILoaderOption, LoaderBase, LoaderResource } from \"./LoaderBase\";\r\n\r\nexport type TJsLoaderRawResource = string;\r\n\r\nexport class JsLoaderResource extends LoaderResource<TJsLoaderRawResource> {\r\n\tdestroy() {\r\n\t\tthis._data = '';\r\n\t}\r\n\t\r\n\tref() {\r\n\t\tconst script = document.body.appendChild(document.createElement('script'));\r\n\t\tscript.text = this._data;\r\n\t}\r\n}\r\n\r\nexport type TJsLoaderTarget = string;\r\n\r\nexport interface IJsLoaderOption extends ILoaderOption {\r\n\r\n}\r\n\r\nexport class JsLoader extends LoaderBase<TJsLoaderTarget, TJsLoaderRawResource, JsLoaderResource> {\r\n\tprotected _loadAsync(target: TJsLoaderTarget, options: IJsLoaderOption = {}) {\r\n\t\treturn (() => {\r\n\t\t\tconst data = this._resolveParams(target, options);\r\n\t\t\tconst src = data.src;\r\n\t\t\tconst xhr = data.xhr;\r\n\t\t\t\r\n\t\t\tif (!xhr) {\r\n\t\t\t\treturn fetch(src);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn fetch(src, xhr.requestOptions || {});\r\n\t\t})()\r\n\t\t.then(res => {\r\n\t\t\tif (!res.ok) {\r\n\t\t\t\tthrow res.statusText;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res.text();\r\n\t\t})\r\n\t\t.then(text => new JsLoaderResource(text, null))\r\n\t\t.catch((e: any) => new JsLoaderResource('', e));\r\n\t}\r\n}","import { ILoaderOption, LoaderBase, LoaderResource } from \"./LoaderBase\";\r\n\r\nexport interface IJsonData {\r\n\t[name: string]: any;\r\n}\r\n\r\nexport type TJsonLoaderRawResource = IJsonData;\r\n\r\nexport class JsonLoaderResource extends LoaderResource<TJsonLoaderRawResource> {\r\n\tdestroy() {\r\n\t\tthis._data = {};\r\n\t}\r\n}\r\n\r\nexport type TJsonLoaderTarget = string;\r\n\r\nexport interface IJsonLoaderOption extends ILoaderOption {\r\n\r\n}\r\n\r\nexport class JsonLoader extends LoaderBase<TJsonLoaderTarget, TJsonLoaderRawResource, JsonLoaderResource> {\r\n\tprotected _loadAsync(target: TJsonLoaderTarget, options: IJsonLoaderOption = {}) {\r\n\t\treturn (() => {\r\n\t\t\tconst data = this._resolveParams(target, options);\r\n\t\t\tconst src = data.src;\r\n\t\t\tconst xhr = data.xhr;\r\n\t\t\t\r\n\t\t\tif (!xhr) {\r\n\t\t\t\treturn fetch(src);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn fetch(src, xhr.requestOptions);\r\n\t\t})()\r\n\t\t.then(res => {\r\n\t\t\tif (!res.ok) {\r\n\t\t\t\tthrow res.statusText;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.then(json => new JsonLoaderResource(json, null))\r\n\t\t.catch((e: any) => new JsonLoaderResource({}, e));\r\n\t}\r\n}","\r\nimport { JsonLoader } from './JsonLoader';\r\nimport { ITextureDictionary, Spritesheet } from 'pixi.js';\r\nimport { ILoaderOption, LoaderBase, LoaderResource } from './LoaderBase';\r\nimport { TextureLoader, TextureLoaderResource } from './TextureLoader';\r\nimport { resolveUri } from '../utils';\r\n\r\nexport type TSpritesheetLoaderRawResource = ITextureDictionary;\r\n\r\nexport class SpritesheetLoaderResource extends LoaderResource<TSpritesheetLoaderRawResource> {\r\n\tdestroy() {\r\n\t\tfor (let i in this._data) {\r\n\t\t\tthis._data[i].destroy(true);\r\n\t\t}\r\n\t\t\r\n\t\tthis._data = {};\r\n\t}\r\n}\r\n\r\nexport interface ISpritesheetJson {\r\n\tframes: {\r\n\t\t[name: string]: any;\r\n\t};\r\n\t\r\n\tmeta: {\r\n\t\t[name: string]: any;\r\n\t\timage: string | HTMLImageElement;\r\n\t}\r\n}\r\n\r\nexport type TSpritesheetLoaderTarget = string | ISpritesheetJson;\r\n\r\nexport interface ISpritesheetLoaderOption extends ILoaderOption {\r\n\ttextureVersion?: string | number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst KEY_SINGLE_SPRITESHEET = '--single-spritesheet';\r\n\r\nexport class SpritesheetLoader extends LoaderBase<TSpritesheetLoaderTarget, TSpritesheetLoaderRawResource, SpritesheetLoaderResource> {\r\n\tprotected _loadAsync(target: TSpritesheetLoaderTarget, options: ISpritesheetLoaderOption = {}) {\r\n\t\treturn (() => {\r\n\t\t\tif (typeof target !== 'string') {\r\n\t\t\t\treturn this._loadTextureAsync(target, options);\r\n\t\t\t} else {\r\n\t\t\t\treturn this._loadJsonAsync(target, options);\r\n\t\t\t}\r\n\t\t})()\r\n\t\t.then(textures => new SpritesheetLoaderResource(textures, null))\r\n\t\t.catch(e => new SpritesheetLoaderResource({}, e));\r\n\t}\r\n\t\r\n\tprivate _loadJsonAsync(url: string, options: ISpritesheetLoaderOption) {\r\n\t\tconst loader = new JsonLoader();\r\n\t\t\r\n\t\treturn loader.loadAsync(url, options)\r\n\t\t\t.then(resource => {\r\n\t\t\t\tif (resource.error) {\r\n\t\t\t\t\tthrow resource.error;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!resource.data) {\r\n\t\t\t\t\tthrow 'invalid resource';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst json = resource.data;\r\n\t\t\t\t\r\n\t\t\t\tif (!json.meta || !json.meta.image || !json.frames) {\r\n\t\t\t\t\tthrow 'invalid json';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tjson.meta.image = resolveUri(url, json.meta.image);\r\n\t\t\t\t\r\n\t\t\t\tconst data: ISpritesheetJson = {\r\n\t\t\t\t\tframes: json.frames,\r\n\t\t\t\t\tmeta: json.meta\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\treturn this._loadTextureAsync(data, options);\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tprivate _loadTextureAsync(json: ISpritesheetJson, options: ISpritesheetLoaderOption) {\r\n\t\tconst loader = new TextureLoader();\r\n\t\t\r\n\t\treturn loader.loadAsync(json.meta.image, Object.assign({}, options, { version: options.textureVersion || options.version }))\r\n\t\t\t.then(resource => {\r\n\t\t\t\tif (resource.error) {\r\n\t\t\t\t\tthrow resource.error;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!resource.data) {\r\n\t\t\t\t\tthrow 'invalid resource';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst ss = new Spritesheet(resource.data, json);\r\n\t\t\t\t\r\n\t\t\t\treturn new Promise<ITextureDictionary>(resolve => {\r\n\t\t\t\t\tss.parse(e => {\r\n\t\t\t\t\t\tfor (let i in ss.textures) {\r\n\t\t\t\t\t\t\tTextureLoaderResource.removeCache(ss.textures[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tresolve(ss.textures);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}","import { Howl } from 'howler';\r\nimport { ILoaderOption, LoaderBase, LoaderResource } from './LoaderBase';\r\n\r\nexport type TSoundLoaderRawResource = Howl | null;\r\n\r\nexport class SoundLoaderResource extends LoaderResource<TSoundLoaderRawResource> {\r\n\tdestroy() {\r\n\t\tif (this._data) {\r\n\t\t\tthis._data.stop();\r\n\t\t\tthis._data.unload();\r\n\t\t\tthis._data = null;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport type TSoundLoaderTarget = string;\r\n\r\nexport interface ISoundLoaderOption extends ILoaderOption {\r\n\r\n}\r\n\r\nexport class SoundLoader extends LoaderBase<TSoundLoaderTarget, TSoundLoaderRawResource, SoundLoaderResource> {\r\n\tprotected _loadAsync(target: TSoundLoaderTarget, options: ISoundLoaderOption = {}) {\r\n\t\treturn (() => {\r\n\t\t\tconst data = this._resolveParams(target, options);\r\n\t\t\tconst src = data.src;\r\n\t\t\tconst xhr = data.xhr;\r\n\t\t\t\r\n\t\t\tif (!xhr) {\r\n\t\t\t\treturn new Promise<Howl>((resolve, reject) => {\r\n\t\t\t\t\tconst howl = new Howl({\r\n\t\t\t\t\t\tsrc,\r\n\t\t\t\t\t\tonload: () => {\r\n\t\t\t\t\t\t\tresolve(howl);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonloaderror: () => {\r\n\t\t\t\t\t\t\tconst e = new Error('invalid resource: ' + src);\r\n\t\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn new Promise<Howl>((resolve, reject) => {\r\n\t\t\t\tconst howl = new Howl({\r\n\t\t\t\t\tsrc,\r\n\t\t\t\t\tonload: () => {\r\n\t\t\t\t\t\tresolve(howl);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonloaderror: () => {\r\n\t\t\t\t\t\tconst e = new Error('invalid resource: ' + src);\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t},\r\n\t\t\t\t\txhr: xhr.requestOptions || {}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t})()\r\n\t\t.then(howl => new SoundLoaderResource(howl, null))\r\n\t\t.catch(e => new SoundLoaderResource(null, e));\r\n\t}\r\n}","import { TextureLoader, TextureLoaderResource, TTextureLoaderRawResource, TTextureLoaderTarget } from \"../loader\";\r\nimport { ManifestBase } from \"./ManifestBase\";\r\n\r\nexport class TextureManifest extends ManifestBase<TTextureLoaderTarget, TTextureLoaderRawResource, TextureLoaderResource> {\r\n\tprotected _createLoader() {\r\n\t\treturn new TextureLoader();\r\n\t}\r\n}","import { SpritesheetLoader, SpritesheetLoaderResource, TSpritesheetLoaderRawResource, TSpritesheetLoaderTarget } from \"../loader\";\r\nimport { ManifestBase } from \"./ManifestBase\";\r\n\r\nexport class SpritesheetManifest extends ManifestBase<TSpritesheetLoaderTarget, TSpritesheetLoaderRawResource, SpritesheetLoaderResource> {\r\n\tprotected _createLoader() {\r\n\t\treturn new SpritesheetLoader();\r\n\t}\r\n}","import { SoundLoader, SoundLoaderResource, TSoundLoaderRawResource, TSoundLoaderTarget } from \"../loader\";\r\nimport { ManifestBase } from \"./ManifestBase\";\r\n\r\nexport class SoundManifest extends ManifestBase<TSoundLoaderTarget, TSoundLoaderRawResource, SoundLoaderResource> {\r\n\tprotected _createLoader() {\r\n\t\treturn new SoundLoader();\r\n\t}\r\n}","import { JsonLoader, JsonLoaderResource, TJsonLoaderRawResource, TJsonLoaderTarget } from \"../loader\";\r\nimport { ManifestBase } from \"./ManifestBase\";\r\n\r\nexport class JsonManifest extends ManifestBase<TJsonLoaderTarget, TJsonLoaderRawResource, JsonLoaderResource> {\r\n\tprotected _createLoader() {\r\n\t\treturn new JsonLoader();\r\n\t}\r\n}","import { Container as PixiContainer } from 'pixi.js';\r\nimport { Container } from '../Container';\r\nimport { TJsonLoaderRawResource, TSoundLoaderRawResource, TSpritesheetLoaderRawResource, TTextureLoaderRawResource } from '../loader';\r\n\r\nexport interface IContentResourceDictionary {\r\n    images: Record<string, Exclude<TTextureLoaderRawResource, null>>;\r\n    spritesheets: Record<string, Exclude<TSpritesheetLoaderRawResource, null>>;\r\n    sounds: Record<string, Exclude<TSoundLoaderRawResource, null>>;\r\n    jsons: Record<string, Exclude<TJsonLoaderRawResource, null>>;\r\n\t[name: string]: Record<string, any>;\r\n}\r\n\r\nexport type TContentLibary = typeof PixiContainer | typeof Container;\r\nexport type TContentLibraryDictionary = Record<string, TContentLibary>;\r\n\r\nexport type TContentVariableDictionary = Record<string, any>;\r\n\r\nexport interface IContentDeliverData {\r\n\twidth: number,\r\n\theight: number,\r\n\tlib: TContentLibraryDictionary,\r\n\tresources: IContentResourceDictionary,\r\n\tvars: TContentVariableDictionary;\r\n}\r\n\r\nexport class ContentDeliver {\r\n\tprotected _piximData: IContentDeliverData;\r\n\t\r\n\tconstructor(data: IContentDeliverData) {\r\n\t\tthis._piximData = {\r\n\t\t\twidth: data.width,\r\n\t\t\theight: data.height,\r\n\t\t\tlib: data.lib,\r\n\t\t\tresources: data.resources,\r\n\t\t\tvars: data.vars\r\n\t\t};\r\n\t}\r\n\t\r\n\t/**\r\n\t * Content width.\r\n\t */\r\n\tget width() {\r\n\t\treturn this._piximData.width;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Content height.\r\n\t */\r\n\tget height() {\r\n\t\treturn this._piximData.height;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Defined classes in content.\r\n\t */\r\n\tget lib() {\r\n\t\treturn this._piximData.lib;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loaded resources.\r\n\t */\r\n\tget resources() {\r\n\t\treturn this._piximData.resources;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Defined variables by framework.\r\n\t */\r\n\tget vars() {\r\n\t\treturn this._piximData.vars;\r\n\t}\r\n}","import { ManifestBase, IManifestClass, IManifestOption, IManifestLoaderOption, TManifestResourceVersion, TManifestLoaderXhrOption, EVENT_LOADER_ASSET_LOADED } from './ManifestBase';\r\nimport { TextureManifest } from './TextureManifest';\r\nimport { SpritesheetManifest } from './SpritesheetManifest';\r\nimport { SoundManifest } from './SoundManifest';\r\nimport { JsonManifest } from './JsonManifest';\r\nimport { ContentDeliver, IContentDeliverData, IContentResourceDictionary, TContentLibraryDictionary } from './ContentDeliver';\r\nimport { Emitter } from '@tawaship/emitter';\r\nimport { Container } from 'pixi.js';\r\nimport { ILoaderOption, LoaderResource, TJsonLoaderTarget, TSoundLoaderTarget, TSpritesheetLoaderTarget, TTextureLoaderTarget } from '../loader';\r\n\r\nexport interface IContentAssetBasepath {\r\n\t[ manifestKey: string ]: string;\r\n}\r\n\r\nexport interface IContentAssetVersion {\r\n\t[ manifestKey: string ]: TManifestResourceVersion;\r\n}\r\n\r\nexport interface IContentAssetXhrOption {\r\n\t[ manifestKey: string ]: TManifestLoaderXhrOption;\r\n}\r\n\r\nexport interface IContentAssetLoaderOption {\r\n\t[ manifestKey: string ]: ILoaderOption;\r\n}\r\n\r\nexport interface IContentManifests {\r\n    images: TextureManifest;\r\n    spritesheets: SpritesheetManifest;\r\n    sounds: SoundManifest;\r\n    jsons: JsonManifest;\r\n    [manifestKey: string]: ManifestBase<any, any, any>;\r\n}\r\n\r\nexport interface IContentConfigData {\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport interface IContentData {\r\n\tcontentID: string;\r\n\toptions: IContentOption;\r\n\t$: ContentDeliver;\r\n\tmanifests: IContentManifests;\r\n\tadditionalManifests: IContentManifests;\r\n\tpreloadPromise: Promise<void> | null;\r\n\tpostloadPromise: Promise<void> | null;\r\n\tcontentDeliverData: IContentDeliverData;\r\n}\r\n\r\nexport interface IContentOption {\r\n\t/**\r\n\t * Asset root path.\r\n\t */\r\n\tbasepath?: string | IContentAssetBasepath;\r\n\t\r\n\t/**\r\n\t * Asset version.\r\n\t */\r\n\tversion?: TManifestResourceVersion | IContentAssetVersion;\r\n\t\r\n\t/**\r\n\t * A header given when loading an asset, or a function that returns a header.\r\n\t * If a value that can be considered true is specified, fetch API will be used instead of the default Loader when loading each asset.\r\n\t */\r\n\txhr?: TManifestLoaderXhrOption;\r\n\t\r\n\ttypeOptions?: IContentAssetLoaderOption;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst _contents: Record<string, typeof Content> = {};\r\n\r\n/**\r\n * @ignore\r\n */\r\nlet _contentID: number = 0;\r\n\r\nexport interface IContentStaticData {\r\n\tconfig: IContentConfigData;\r\n\tmanifests: IContentManifests;\r\n\tlib: TContentLibraryDictionary;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createManifests(): IContentManifests {\r\n\tconst res: IContentManifests = {\r\n        images: new TextureManifest(\"images\"),\r\n        spritesheets: new SpritesheetManifest(\"spritesheets\"),\r\n        sounds: new SoundManifest(\"sounds\"),\r\n        jsons: new JsonManifest(\"jsons\")\r\n    };\r\n\t\r\n\tfor (let i in _externalManifestClasses) {\r\n\t\tres[i] = new _externalManifestClasses[i](i);\r\n\t}\r\n\t\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createContentStatic(): IContentStaticData {\r\n\treturn {\r\n\t\tconfig: {\r\n\t\t\twidth: 450,\r\n\t\t\theight: 800\r\n\t\t},\r\n\t\tmanifests: createManifests(),\r\n\t\tlib: {}\r\n\t};\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst _externalManifestClasses: {\r\n\r\n    [ key: string ]: IManifestClass<any, any, any>\r\n} = {\r\n    images: TextureManifest,\r\n    spritesheets: SpritesheetManifest,\r\n    sounds: SoundManifest,\r\n    jsons: JsonManifest\r\n};\r\n\r\nexport class Content extends Emitter {\r\n\tprotected static _piximData: IContentStaticData;\r\n\tprotected _piximData: IContentData;\r\n\tprivate _loadedResourceHandler: (data: { target: any, resource: any }) => void;\r\n\t\r\n    /**\r\n     * {@link EVENT_LOADER_ASSET_LOADED} fired when any of the assets are loaded. \r\n     * @param options \r\n     * @param piximData \r\n     */\r\n\tconstructor(options: IContentOption = {}, piximData: IContentStaticData = Content._piximData) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._loadedResourceHandler = (data: { target: any, resource: any }) => {\r\n\t\t\tthis.emit(EVENT_LOADER_ASSET_LOADED, data);\r\n\t\t};\r\n\t\t\r\n\t\tconst contentDeliverData = {\r\n\t\t\twidth: piximData.config.width,\r\n\t\t\theight: piximData.config.height,\r\n\t\t\tlib: piximData.lib,\r\n\t\t\tresources: {\r\n                images: {},\r\n                spritesheets: {},\r\n                sounds: {},\r\n                jsons: {}\r\n            },\r\n\t\t\tvars: {}\r\n\t\t};\r\n\t\t\r\n\t\tthis._piximData = {\r\n\t\t\tcontentID: (++_contentID).toString(),\r\n\t\t\toptions,\r\n\t\t\t$: new ContentDeliver(contentDeliverData),\r\n\t\t\tmanifests: piximData.manifests,\r\n\t\t\tadditionalManifests: createManifests(),\r\n\t\t\tpreloadPromise: null,\r\n\t\t\tpostloadPromise: null,\r\n\t\t\tcontentDeliverData\r\n\t\t};\r\n\t\t\r\n\t\tfor (let i in this._piximData.manifests) {\r\n\t\t\tthis._piximData.manifests[i].on(EVENT_LOADER_ASSET_LOADED, this._loadedResourceHandler);\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i in this._piximData.additionalManifests) {\r\n\t\t\tthis._piximData.additionalManifests[i].on(EVENT_LOADER_ASSET_LOADED, this._loadedResourceHandler);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Register manifest class.\r\n\t */\r\n\tstatic registerManifest<T, U, V extends LoaderResource<U>>(key: string, Manifest: IManifestClass<T, U, V>) {\r\n\t\t_externalManifestClasses[key] = Manifest;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a cloned content class.\r\n\t * \r\n\t * @param key Content name.\r\n\t * @return Cloned content class.\r\n\t */\r\n\tstatic create(key: string = ''): typeof Content {\r\n\t\tif (key && key in _contents) {\r\n\t\t\tthrow new Error(`Content key '${key}' has already exists.`);\r\n\t\t}\r\n\t\t\r\n\t\tclass ContentClone extends Content {\r\n\t\t\tprotected static _piximData: IContentStaticData = createContentStatic();\r\n\t\t\t\r\n\t\t\tconstructor(options: IContentOption = {}) {\r\n\t\t\t\tsuper(options, ContentClone._piximData);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (!key) {\r\n\t\t\treturn ContentClone;\r\n\t\t}\r\n\t\t\r\n\t\treturn _contents[key] = ContentClone;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get cloned content.\r\n\t */\r\n\tstatic get(key: string) {\r\n\t\treturn _contents[key];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Remove cloned content.\r\n\t * \r\n\t * @param key {string}\r\n\t */\r\n\tstatic remove(key: string): void {\r\n\t\tdelete(_contents[key]);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define assets for class.\r\n\t */\r\n\tstatic defineTargets<T>(key: string, targets: Record<string, T>, options: IManifestOption = {}) {\r\n\t\tif (!this._piximData.manifests[key]) {\r\n\t\t\tconsole.warn(`Manifest '${key}' is not registered.`);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.manifests[key].add(targets, options);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define image assets for class.\r\n\t */\r\n\tstatic defineImages(targets: Record<string, TTextureLoaderTarget>, options: IManifestOption = {}) {\r\n\t\treturn this.defineTargets('images', targets, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define spritesheet assets for class.\r\n\t */\r\n\tstatic defineSpritesheets(targets: Record<string, TSpritesheetLoaderTarget>, options: IManifestOption = {}) {\r\n\t\treturn this.defineTargets('spritesheets', targets, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define sound assets for class.\r\n\t */\r\n\tstatic defineSounds(targets: Record<string, TSoundLoaderTarget>, options: IManifestOption = {}) {\r\n\t\treturn this.defineTargets('sounds', targets, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define json assets for class.\r\n\t */\r\n\tstatic defineJsons(targets: Record<string, TJsonLoaderTarget>, options: IManifestOption = {}) {\r\n\t\treturn this.defineTargets('jsons', targets, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set the content settings.\r\n\t * \r\n\t * @param data Config data.\r\n\t */\r\n\tstatic setConfig(data: IContentConfigData) {\r\n\t\t//this._piximData.config.fps = data.fps;\r\n\t\tthis._piximData.config.width = data.width;\r\n\t\tthis._piximData.config.height = data.height;\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define libraries that is material of the content.<br />\r\n\t * In the constructor named root, Application passes a reference to ContentDeliver as an argument.<br />\r\n\t * By giving this argument to the child further, you will be able to access the data freely from anywhere.\r\n\t * \r\n\t * @param data Library data.\r\n\t */\r\n\tstatic defineLibraries(data: TContentLibraryDictionary) {\r\n\t\tfor (let i in data) {\r\n\t\t\tthis._piximData.lib[i] = data[i];\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * ID of this content.\r\n\t */\r\n\tget contentID(): string {\r\n\t\treturn this._piximData.contentID;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define assets for instance.\r\n\t * \r\n\t * @return Returns itself for the method chaining.\r\n\t */\r\n\taddTargets<T>(key: string, targets: Record<string, T>, options: IManifestOption = {}): this {\r\n\t\tif (!this._piximData.additionalManifests[key]) {\r\n\t\t\tconsole.warn(`Manifest '${key}' is not registered.`);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis._piximData.additionalManifests[key].add(targets, options);\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define image assets for instance.\r\n\t * \r\n\t * @return Returns itself for the method chaining.\r\n\t */\r\n\taddImages(data: Record<string, TTextureLoaderTarget>, options: IManifestOption = {}): this {\r\n\t\treturn this.addTargets('images', data, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define spritesheet assets for instance.\r\n\t * \r\n\t * @return Returns itself for the method chaining.\r\n\t */\r\n\taddSpritesheets(targets: Record<string, TSpritesheetLoaderTarget>, options: IManifestOption = {}): this {\r\n\t\treturn this.addTargets('spritesheets', targets, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define sound assets for instance.\r\n\t * \r\n\t * @return Returns itself for the method chaining.\r\n\t */\r\n\taddSounds(targets: Record<string, TSoundLoaderTarget>, options: IManifestOption = {}) {\r\n\t\treturn this.addTargets('sounds', targets, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define json assets for instance.\r\n\t * \r\n\t * @return Returns itself for the method chaining.\r\n\t */\r\n\taddJsons(targets: Record<string, TJsonLoaderTarget>, options: IManifestOption = {}) {\r\n\t\treturn this.addTargets('jsons', targets, options);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Define valriables for instance.\r\n\t * \r\n\t * @return Returns itself for the method chaining.\r\n\t */\r\n\taddVars(data: Record<string, any>) {\r\n\t\tfor (let i in data) {\r\n\t\t\t this._piximData.$.vars[i] = data[i];\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Prepare content.\r\n\t */\r\n\tprepareAsync(): Promise<void> {\r\n\t\treturn this.preloadClassAssetAsync()\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn this.preloadInstanceAssetAsync();\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Build content.\r\n\t */\r\n\tbuildAsync(): Promise<Container> {\r\n\t\tif (!this._piximData.$.lib.root) {\r\n\t\t\tthrow new Error('There is no library named \"root\" in the content.');\r\n\t\t}\r\n\t\t\r\n\t\treturn this.prepareAsync()\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn new this._piximData.$.lib.root(this._piximData.$);\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Preloads class assets.\r\n\t */\r\n\tpreloadClassAssetAsync(): Promise<void> {\r\n\t\tif (this._piximData.preloadPromise) {\r\n\t\t\treturn this._piximData.preloadPromise;\r\n\t\t}\r\n\t\t\r\n\t\treturn this._piximData.preloadPromise = this._loadAssetAsync(this._piximData.manifests)\r\n\t\t\t.catch(e => {\r\n\t\t\t\tthis._piximData.preloadPromise = null;\r\n\t\t\t\t\r\n\t\t\t\tthrow e;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Preloads instance assets.\r\n\t */\r\n\tpreloadInstanceAssetAsync(): Promise<void> {\r\n\t\tif (this._piximData.postloadPromise) {\r\n\t\t\treturn this._piximData.postloadPromise;\r\n\t\t}\r\n\t\t\r\n\t\treturn this._piximData.postloadPromise = this._loadAssetAsync(this._piximData.additionalManifests)\r\n\t\t\t.catch(e => {\r\n\t\t\t\tthis._piximData.postloadPromise = null;\r\n\t\t\t\t\r\n\t\t\t\tthrow e;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tdestroy() {\r\n\t\tconst contentDeliverData = this._piximData.contentDeliverData;\r\n\t\t\r\n\t\tcontentDeliverData.lib = {};\r\n\t\tcontentDeliverData.vars = {};\r\n\t\t\r\n\t\tconst manifests = this._piximData.manifests;\r\n\t\tconst additionalManifests = this._piximData.additionalManifests;\r\n\t\t\r\n\t\tfor (let i in manifests) {\r\n\t\t\tmanifests[i].off(EVENT_LOADER_ASSET_LOADED, this._loadedResourceHandler);\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i in additionalManifests) {\r\n\t\t\tadditionalManifests[i].off(EVENT_LOADER_ASSET_LOADED, this._loadedResourceHandler);\r\n\t\t}\r\n\t\t\r\n\t\tconst resources = contentDeliverData.resources;\r\n\t\tfor (let i in resources) {\r\n\t\t\tresources[i] = {};\r\n\t\t}\r\n\t}\r\n\t\r\n\tget classAssetCount() {\r\n\t\tlet total = 0;\r\n\t\t\r\n\t\tconst manifests = this._piximData.manifests;\r\n\t\tfor (let i in manifests) {\r\n\t\t\ttotal += manifests[i].count;\r\n\t\t}\r\n\t\t\r\n\t\treturn total;\r\n\t}\r\n\t\r\n\tget instanceAssetCount() {\r\n\t\tlet total = 0;\r\n\t\t\r\n\t\tconst additionalManifests = this._piximData.additionalManifests;\r\n\t\tfor (let i in additionalManifests) {\r\n\t\t\ttotal += additionalManifests[i].count;\r\n\t\t}\r\n\t\t\r\n\t\treturn total;\r\n\t}\r\n\t\r\n\tget assetCount() {\r\n\t\treturn this.classAssetCount + this.instanceAssetCount;\r\n\t}\r\n\t\r\n\tprivate _loadAssetAsync(manifests: IContentManifests): Promise<void> {\r\n\t\tconst loaderCount = Object.keys(manifests).length;\r\n\t\t\r\n\t\tif (loaderCount === 0) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\t\r\n\t\tconst options = this._piximData.options;\r\n\t\t\r\n\t\tconst basepath = (() => {\r\n\t\t\tif (typeof(options.basepath) === 'undefined') {\r\n\t\t\t\tconst basepath: IContentAssetBasepath = {};\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tbasepath[i] = '';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn basepath;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (typeof(options.basepath) === 'string') {\r\n\t\t\t\tconst basepath: IContentAssetBasepath = {};\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tbasepath[i] = options.basepath.replace(/(.+[^\\/])$/, '$1/');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn basepath;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst basepath: IContentAssetBasepath = {};\r\n\t\t\tfor (let i in manifests) {\r\n\t\t\t\tbasepath[i] = (options.basepath[i] || '').replace(/(.+[^\\/])$/, '$1/');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn basepath;\r\n\t\t})();\r\n\t\t\r\n\t\tconst version = (() => {\r\n\t\t\tif (typeof(options.version) === 'undefined') {\r\n\t\t\t\tconst version: IContentAssetVersion = {};\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tversion[i] = '';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn version;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (typeof(options.version) === 'string' || typeof(options.version) === 'number') {\r\n\t\t\t\tconst version: IContentAssetVersion = {};\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tversion[i] = options.version;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn version;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst version: IContentAssetVersion = {};\r\n\t\t\tfor (let i in manifests) {\r\n\t\t\t\tversion[i] = options.version[i] || '';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn version;\r\n\t\t})();\r\n\t\t\r\n\t\tconst xhr = (() => {\r\n\t\t\tconst xhr: IContentAssetXhrOption = {};\r\n\t\t\tfor (let i in manifests) {\r\n\t\t\t\txhr[i] = options.xhr || false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn xhr;\r\n\t\t})();\r\n\t\t\r\n\t\tconst typeOptions = (() => {\r\n\t\t\tif (typeof(options.typeOptions) === 'undefined') {\r\n\t\t\t\tconst typeOptions: IContentAssetLoaderOption = {};\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\ttypeOptions[i] = {}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn typeOptions;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst typeOptions: IContentAssetLoaderOption = {};\r\n\t\t\tfor (let i in manifests) {\r\n\t\t\t\ttypeOptions[i] = options.typeOptions[i] || {};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn typeOptions;\r\n\t\t})();\r\n\t\t\r\n\t\tconst loaderOptions: { [ manifestKey: string ]: IManifestLoaderOption } = {};\r\n\t\tfor (let i in manifests) {\r\n\t\t\tloaderOptions[i] = {\r\n\t\t\t\tbasepath: basepath[i],\r\n\t\t\t\tversion: version[i],\r\n\t\t\t\txhr: xhr[i],\r\n\t\t\t\ttypeOptions: typeOptions[i]\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tconst resources: IContentResourceDictionary = this._piximData.$.resources;\r\n\t\t\r\n\t\tconst promises: Promise<Record<string, any>>[] = [];\r\n\t\tconst keys: string[] = [];\r\n\t\tfor (let i in manifests) {\r\n\t\t\tkeys.push(i);\r\n\t\t\t\r\n\t\t\tconst manifest = manifests[i];\r\n\t\t\t\r\n\t\t\tpromises.push(manifest.getAsync(loaderOptions[i]));\r\n\t\t}\r\n\t\t\r\n\t\treturn Promise.all(promises)\r\n\t\t\t.then(resolver => {\r\n\t\t\t\tfor (let i: number = 0; i < resolver.length;i++) {\r\n\t\t\t\t\tresources[keys[i]] = resources[keys[i]] || {};\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (let j in resolver[i]) {\r\n\t\t\t\t\t\tresources[keys[i]][j] = resolver[i][j];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nContent.registerManifest('images', TextureManifest);\r\nContent.registerManifest('spritesheets', SpritesheetManifest);\r\nContent.registerManifest('sounds', SoundManifest);\r\nContent.registerManifest('jsons', JsonManifest);"],"names":["_Emitter","_Task","PixiContainer","PixiApplication","Emitter","utils.resolveUri","utils.isUrl"],"mappings":"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","x_google_ignoreList":[1]}