{"version":3,"file":"Pixim.cjs.js","sources":["../src/modules/Emitter.ts","../src/modules/TaskManager.ts","../src/modules/Application.ts","../node_modules/@tawaship/task/dist/Task.esm.js","../src/modules/Task.ts","../src/modules/Container.ts","../src/modules/ContentManifestBase.ts","../src/modules/ContentImageManifest.ts","../src/modules/ContentSpritesheetManifest.ts","../src/modules/ContentSoundManifest.ts","../src/modules/ContentDeliver.ts","../src/modules/Content.ts"],"sourcesContent":["import { Emitter as _Emitter } from '@tawaship/emitter';\r\n\r\nnamespace Pixim {\r\n\t/**\r\n\t * [[https://tawaship.github.io/Emitter/index.html | @tawaship/emitter]]\r\n\t */\r\n\texport class Emitter extends _Emitter {}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Emitter = Pixim.Emitter;","import * as PIXI from 'pixi.js';\r\nimport { Task } from './Task';\r\nimport { ITickerData } from './Application';\r\nimport { Container } from './Container';\r\n\r\nnamespace Pixim {\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tinterface IObserverDictionary {\r\n\t\t[name: number]: Container;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tconst _observers: IObserverDictionary = {};\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tlet _lastTickerData: ITickerData = { delta: 1 };\r\n\t\r\n\t/**\r\n\t * @private\r\n\t */\r\n\texport class TaskManager {\r\n\t\tconstructor() {\r\n\t\t\tthrow new Error('This class can not instantiate.');\r\n\t\t}\r\n\t\t\r\n\t\tstatic addObserver(id: number, observer: Container) {\r\n\t\t\t_observers[id] = observer;\r\n\t\t\tobserver.updateTask(_lastTickerData);\r\n\t\t}\r\n\t\t\r\n\t\tstatic removeObserver(id: number) {\r\n\t\t\tdelete(_observers[id]);\r\n\t\t}\r\n\t\t\r\n\t\tstatic done(e: ITickerData) {\r\n\t\t\t_lastTickerData = e;\r\n\t\t\t\r\n\t\t\tfor (let i in _observers) {\r\n\t\t\t\t_observers[i].updateTask(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import TaskManager = Pixim.TaskManager;","import * as PIXI from 'pixi.js';\r\nimport { Content } from './Content';\r\nimport { Emitter } from './Emitter';\r\nimport { TaskManager } from './TaskManager';\r\n\r\nnamespace Pixim {\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tinterface IRootDictionary {\r\n\t\t[id: string]: PIXI.Container;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface ILayerDictionary{\r\n\t\t[name: string]: PIXI.Container;\r\n\t}\r\n\t\r\n\texport interface ITickerData {\r\n\t\tdelta: number\r\n\t}\r\n\t\r\n\texport interface IAdjustDelegate {\r\n\t\t(app: Application): void;\r\n\t}\r\n\t\r\n\texport type TAutoAdjust = boolean | IAdjustDelegate;\r\n\t\r\n\texport interface IApplicationOption {\r\n\t\t/**\r\n\t\t * Parent node of canvas element.\r\n\t\t */\r\n\t\tcontainer?: HTMLElement;\r\n\t\t\r\n\t\t/**\r\n\t\t * Whether to automatically resize the canvas when resizing the window.<br />\r\n\t\t * Or the resizing process to be executed at that time.\r\n\t\t */\r\n\t\tautoAdjust?: TAutoAdjust;\r\n\t}\r\n\t\r\n\texport interface IApplicationData {\r\n\t\tisRun: boolean;\r\n\t\t/**\r\n\t\t * [[[[http://pixijs.download/v5.2.1/docs/PIXI.Application.html | PIXI.Application]]]]\r\n\t\t */\r\n\t\tapp: PIXI.Application;\r\n\t\tstage: PIXI.Container;\r\n\t\tview: HTMLCanvasElement;\r\n\t\tcontainer: HTMLElement;\r\n\t\toptions: IApplicationOption;\r\n\t\tlayers: ILayerDictionary;\r\n\t}\r\n\t\r\n\texport interface ISize {\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\t}\r\n\t\r\n\texport interface IPosition {\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t}\r\n\t\r\n\texport interface IHorizontal {\r\n\t\tx: number;\r\n\t\twidth: number;\r\n\t}\r\n\t\r\n\texport interface IVertical {\r\n\t\ty: number;\r\n\t\theight: number;\r\n\t}\r\n\t\r\n\texport interface IRect extends ISize, IPosition {}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tconst _roots: IRootDictionary = {};\r\n\t\r\n\t/*\r\n\tfunction taskHandler(obj: PIXI.Container, e: ITaskTickerData): void {\r\n\t\tif (obj instanceof Container) {\r\n\t\t\tobj.task.update(e);\r\n\t\t\t\r\n\t\t\tif (!obj.taskEnabledChildren) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < obj.children.length; i++) {\r\n\t\t\tconst child = obj.children[i];\r\n\t\t\t\r\n\t\t\tif (child instanceof PIXI.Container) {\r\n\t\t\t\ttaskHandler(child, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*/\r\n\t\r\n\texport class Application extends Emitter {\r\n\t\tprotected _piximData: IApplicationData;\r\n\t\t\r\n\t\t/**\r\n\t\t * @param pixiOptions Optional data when call 'new [[[[http://pixijs.download/v5.2.1/docs/PIXI.Application.html | PIXI.Application]]]]'.\r\n\t\t * @param piximOptions Optional data for Pixim.\r\n\t\t */\r\n\t\tconstructor(pixiOptions: Object = {}, piximOptions: IApplicationOption = {}) {\r\n\t\t\tsuper();\r\n\t\t\t\r\n\t\t\tconst app: PIXI.Application = new PIXI.Application(pixiOptions);\r\n\t\t\tapp.stop();\r\n\t\t\t\r\n\t\t\tconst stage: PIXI.Container = app.stage;\r\n\t\t\t\r\n\t\t\tconst view: HTMLCanvasElement = app.view;\r\n\t\t\tview.style.position = 'absolute';\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tif (piximOptions.container) {\r\n\t\t\t\tpiximOptions.container.appendChild(view);\r\n\t\t\t} else {\r\n\t\t\t\tif (!view.parentNode) {\r\n\t\t\t\t\tdocument.body.appendChild(view);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tconst autoAdjust: TAutoAdjust = piximOptions.autoAdjust || false;\r\n\t\t\t\r\n\t\t\tthis._piximData = {\r\n\t\t\t\tisRun: false,\r\n\t\t\t\tapp,\r\n\t\t\t\tstage,\r\n\t\t\t\tview,\r\n\t\t\t\tcontainer: piximOptions.container || document.body,\r\n\t\t\t\tlayers: {},\r\n\t\t\t\toptions: piximOptions\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tconst ticker: PIXI.Ticker = this._piximData.app.ticker;\r\n\t\t\t\r\n\t\t\tticker.add((delta: number) => {\r\n\t\t\t\tTaskManager.done({ delta });\r\n\t\t\t\t//taskHandler(stage, { delta });\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (autoAdjust) {\r\n\t\t\t\tif (autoAdjust === true) {\r\n\t\t\t\t\tconst f = () => {\r\n\t\t\t\t\t\tthis.fullScreen()\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\twindow.addEventListener('resize', f);\r\n\t\t\t\t\t\r\n\t\t\t\t\tf();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst f = () => {\r\n\t\t\t\t\t\tautoAdjust(this);\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\twindow.addEventListener('resize', f);\r\n\t\t\t\t\t\r\n\t\t\t\t\tf();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tget app(): PIXI.Application {\r\n\t\t\treturn this._piximData.app;\r\n\t\t}\r\n\t\t\r\n\t\tget stage(): PIXI.Container {\r\n\t\t\treturn this._piximData.stage;\r\n\t\t}\r\n\t\t\r\n\t\tget view(): HTMLCanvasElement {\r\n\t\t\treturn this._piximData.view;\r\n\t\t}\r\n\t\t\r\n\t\tget container(): HTMLElement {\r\n\t\t\treturn this._piximData.container;\r\n\t\t}\r\n\t\t\r\n\t\tset container(container: HTMLElement) {\r\n\t\t\tthis._piximData.container = container || document.body;\r\n\t\t\tif (this._piximData.view.parentNode) {\r\n\t\t\t\tthis._piximData.container.appendChild(this._piximData.view);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Whether application has layer.\r\n\t\t */\r\n\t\tprivate _hasLayer(name: string): boolean {\r\n\t\t\treturn !!this._piximData.layers[name];\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Add layer to application.\r\n\t\t */\r\n\t\taddLayer(name: string) {\r\n\t\t\tif (this._hasLayer(name)) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.layers[name] = this._piximData.stage.addChild(new PIXI.Container());\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Remove layer form application.\r\n\t\t */\r\n\t\tremoveLayer(name: string) {\r\n\t\t\tif (!this._hasLayer(name)) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.stage.removeChild(this._piximData.layers[name]);\r\n\t\t\tdelete(this._piximData.layers[name]);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Attach content to application.\r\n\t\t */\r\n\t\tattachAsync(content: Content, layerName: string = 'anonymous'): Promise<PIXI.Container> {\r\n\t\t\treturn content.buildAsync()\r\n\t\t\t\t.then((root: PIXI.Container) => {\r\n\t\t\t\t\tthis.addLayer(layerName);\r\n\t\t\t\t\t\r\n\t\t\t\t\t_roots[content.contentID] = root;\r\n\t\t\t\t\tthis._piximData.layers[layerName].addChild(root);\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn root;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Detach content from application.\r\n\t\t */\r\n\t\tdetach(content: Content) {\r\n\t\t\tconst root: PIXI.Container = _roots[content.contentID];\r\n\t\t\t\r\n\t\t\tif (!root) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._destroyRoot(root);\r\n\t\t\tdelete(_roots[content.contentID]);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Play application.\r\n\t\t */\r\n\t\tplay() {\r\n\t\t\tif (this._piximData.isRun) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.container.appendChild(this._piximData.view);\r\n\t\t\t\r\n\t\t\tthis._piximData.app.start();\r\n\t\t\tthis._piximData.isRun = true;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Stop application.\r\n\t\t */\r\n\t\tstop() {\r\n\t\t\tif (!this._piximData.isRun) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this._piximData.view.parentNode) {\r\n\t\t\t\tthis._piximData.view.parentNode.removeChild(this._piximData.view);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.app.stop();\r\n\t\t\tthis._piximData.isRun = false;\r\n\t\t\t\r\n\t\t\tconst stage: PIXI.Container = this._piximData.app.stage;\r\n\t\t\t\r\n\t\t\tconst layers: ILayerDictionary = this._piximData.layers;\r\n\t\t\t\r\n\t\t\tfor (let i in layers) {\r\n\t\t\t\tlayers[i].removeChildren();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst keys: string[] = [];\r\n\t\t\tfor (let i in _roots) {\r\n\t\t\t\tthis._destroyRoot(_roots[i]);\r\n\t\t\t\tkeys.push(i);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < keys.length; i++) {\r\n\t\t\t\tdelete(_roots[keys[i]]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.app.ticker.update();\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tprivate _destroyRoot(root: PIXI.Container): void {\r\n\t\t\tif (root.parent) {\r\n\t\t\t\troot.parent.removeChild(root);\r\n\t\t\t}\r\n\t\t\troot.destroy();\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Pause (or restart) application.\r\n\t\t */\r\n\t\tpause(paused: boolean) {\r\n\t\t\tif (!this._piximData.isRun) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (paused) {\r\n\t\t\t\tthis._piximData.app.stop();\r\n\t\t\t} else {\r\n\t\t\t\tthis._piximData.app.start();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Resize canvas to fit specified rectangle.\r\n\t\t * \r\n\t\t * @param rect Rectangle to adjust.\r\n\t\t */\r\n\t\tfullScreen(rect?: IRect) {\r\n\t\t\tconst view: HTMLCanvasElement = this._piximData.view;\r\n\t\t\tconst r: IRect = rect || {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth,\r\n\t\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (r.width / r.height > view.width / view.height) {\r\n\t\t\t\treturn this.adjustHeight(r.height).toCenter(r).toTop(r);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this.adjustWidth(r.width).toMiddle(r).toLeft(r);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Resize canvas to fit specified width.\r\n\t\t * \r\n\t\t * @param width Width to adjust.\r\n\t\t */\r\n\t\tadjustWidth(width?: number) {\r\n\t\t\tconst view: HTMLCanvasElement = this._piximData.view;\r\n\t\t\tconst w: number = width || this._piximData.container.offsetWidth || window.innerWidth;\r\n\t\t\t\r\n\t\t\tconst h: number = w / view.width * view.height;\r\n\t\t\t\r\n\t\t\t//const frame = this._piximData.frame;\r\n\t\t\tview.style.width = `${w}px`;\r\n\t\t\tview.style.height = `${h}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Resize canvas to fit specified height.\r\n\t\t * \r\n\t\t * @param height Height to adjust.\r\n\t\t */\r\n\t\tadjustHeight(height?: number) {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\tconst h: number = height || this._piximData.container.offsetHeight || window.innerHeight;\r\n\t\t\t\r\n\t\t\tconst w = h / view.height * view.width;\r\n\t\t\t\r\n\t\t\t//const frame = this._piximData.frame;\r\n\t\t\tview.style.height = `${h}px`;\r\n\t\t\tview.style.width = `${w}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Left justified with respect to the reference data.\r\n\t\t * \r\n\t\t * @param horizontal Horizontal data used to calculate the position.\r\n\t\t */\r\n\t\ttoLeft(horizontal?: IHorizontal) {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\t\tx: 0,\r\n\t\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tview.style.left = `${hol.x}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Center justified with respect to the reference data.\r\n\t\t * \r\n\t\t * @param horizontal Horizontal data used to calculate the position.\r\n\t\t */\r\n\t\ttoCenter(horizontal?: IHorizontal) {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\t\tx: 0,\r\n\t\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tview.style.left = `${(hol.width - this._getViewRect().width) / 2 + hol.x}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Right justified with respect to the reference data.\r\n\t\t * \r\n\t\t * @param horizontal Horizontal data used to calculate the position.\r\n\t\t */\r\n\t\ttoRight(horizontal?: IHorizontal) {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\tconst hol: IHorizontal = horizontal || {\r\n\t\t\t\tx: 0,\r\n\t\t\t\twidth: this._piximData.container.offsetWidth || window.innerWidth\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tview.style.left = `${hol.width - this._getViewRect().width + hol.x}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Top justified with respect to the reference data.\r\n\t\t * \r\n\t\t * @param vertical Vertical data used to calculate the position.\r\n\t\t */\r\n\t\ttoTop(vertical?: IVertical) {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\tconst ver: IVertical = vertical || {\r\n\t\t\t\ty: 0,\r\n\t\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tview.style.top = `${ver.y}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Middle justified with respect to the reference data.\r\n\t\t * \r\n\t\t * @param vertical Vertical data used to calculate the position.\r\n\t\t */\r\n\t\ttoMiddle(vertical?: IVertical) {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\tconst ver: IVertical = vertical || {\r\n\t\t\t\ty: 0,\r\n\t\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tview.style.top = `${(ver.height - this._getViewRect().height) / 2 + ver.y}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Bottom justified with respect to the reference data.\r\n\t\t * \r\n\t\t * @param vertical Vertical data used to calculate the position.\r\n\t\t */\r\n\t\ttoBottom(vertical?: IVertical) {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\tconst ver: IVertical = vertical || {\r\n\t\t\t\ty: 0,\r\n\t\t\t\theight: this._piximData.container.offsetHeight || window.innerHeight\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tview.style.top = `${ver.height - this._getViewRect().height + ver.y}px`;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tprivate _getViewRect(): IRect {\r\n\t\t\tconst view = this._piximData.view;\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tx: parseInt(view.style.left.replace('px', '')),\r\n\t\t\t\ty: parseInt(view.style.top.replace('px', '')),\r\n\t\t\t\twidth: parseInt(view.style.width.replace('px', '')),\r\n\t\t\t\theight: parseInt(view.style.height.replace('px', ''))\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IApplicationData = Pixim.IApplicationData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IApplicationOption = Pixim.IApplicationOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ITickerData = Pixim.ITickerData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ISize = Pixim.ISize;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IPosition = Pixim.IPosition;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IRect= Pixim.IRect;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Application = Pixim.Application;","/*!\n * @tawaship/task - v1.1.0\n * \n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nclass Task {\r\n    constructor(callbacks, context) {\r\n        this._taskData = {\r\n            context: context == null ? this : context,\r\n            enabled: true,\r\n            index: -1,\r\n            callbacks: [],\r\n            value: null\r\n        };\r\n        this.add(callbacks);\r\n    }\r\n    /**\r\n     * Whether the task works.\r\n     */\r\n    get enabled() {\r\n        return this._taskData.enabled;\r\n    }\r\n    set enabled(enabled) {\r\n        this._taskData.enabled = enabled;\r\n    }\r\n    /**\r\n     * Add the task to the end of the list.\r\n     */\r\n    add(callbacks) {\r\n        if (!Array.isArray(callbacks)) {\r\n            callbacks = [callbacks];\r\n        }\r\n        const list = this._taskData.callbacks;\r\n        const flag = list.length === 0;\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n            if (!(callbacks[i] instanceof Function)) {\r\n                continue;\r\n            }\r\n            list.push(callbacks[i]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Execute the current task.\r\n     */\r\n    done(...args) {\r\n        if (!this._taskData.enabled) {\r\n            return;\r\n        }\r\n        const task = this._taskData.callbacks[this._taskData.index];\r\n        if (!task) {\r\n            return;\r\n        }\r\n        return this._taskData.value = task.apply(this._taskData.context, args);\r\n    }\r\n    _to(index) {\r\n        this._taskData.index = Number(index);\r\n        return this;\r\n    }\r\n    /**\r\n     * Change the current task to the first task.\r\n     */\r\n    first() {\r\n        return this._to(0);\r\n    }\r\n    /**\r\n     * Change the current task to the previos task.\r\n     */\r\n    prev() {\r\n        return this._to(this._taskData.index - 1);\r\n    }\r\n    /**\r\n     * Change the current task to the next task.\r\n     */\r\n    next() {\r\n        return this._to(this._taskData.index + 1);\r\n    }\r\n    /**\r\n     * Change the current task to the specified task.\r\n     */\r\n    to(index) {\r\n        return this._to(index);\r\n    }\r\n    /**\r\n     * Skips all tasks and changes to the finished state.\r\n     */\r\n    finish() {\r\n        this._taskData.index = -1;\r\n        return this;\r\n    }\r\n    /**\r\n     * Cancel all task and leave them unregistered.\r\n     */\r\n    reset() {\r\n        this._taskData.callbacks = [];\r\n        this._taskData.index = -1;\r\n        this._taskData.value = null;\r\n        return this;\r\n    }\r\n    /**\r\n     * Destroy instance.\r\n     */\r\n    destroy() {\r\n        this.reset();\r\n    }\r\n    /**\r\n     * The value returned by the last task executed.\r\n     */\r\n    get value() {\r\n        return this._taskData.value;\r\n    }\r\n}\n\nexport { Task };\n//# sourceMappingURL=Task.esm.js.map\n","import { Emitter } from './Emitter';\r\nimport { Task as _Task, ITaskDelegate } from '@tawaship/task';\r\n\r\nnamespace Pixim {\r\n\texport interface ITaskData {\r\n\t\temitter: Emitter\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/Task/index.html | @tawaship/task]]\r\n\t */\r\n\texport class Task extends _Task {\r\n\t\tprivate _piximData: ITaskData;\r\n\t\t\r\n\t\tconstructor(tasks: ITaskDelegate | ITaskDelegate[], context: any) {\r\n\t\t\tsuper(tasks, context);\r\n\t\t\t\r\n\t\t\tthis.enabled = true;\r\n\t\t\tthis._piximData = {\r\n\t\t\t\temitter: new Emitter()\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.7.0\r\n\t\t */\r\n\t\ton(type: string, callback: ITaskDelegate) {\r\n\t\t\tthis._piximData.emitter.on(type, callback);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.7.0\r\n\t\t */\r\n\t\tonce(type: string, callback: ITaskDelegate) {\r\n\t\t\tthis._piximData.emitter.once(type, callback);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.7.0\r\n\t\t */\r\n\t\toff(type: string, callback: ITaskDelegate) {\r\n\t\t\tthis._piximData.emitter.off(type, callback);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.7.0\r\n\t\t */\r\n\t\temit(type: string, ...args: any[]) {\r\n\t\t\tif (!this._taskData.enabled) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.emitter.emit(type, ...args);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.7.0\r\n\t\t */\r\n\t\tcemit(type: string, context: any, ...args: any[]) {\r\n\t\t\tif (!this._taskData.enabled) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.emitter.cemit(type, context, ...args);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.9.0\r\n\t\t */\r\n\t\temitAll(...args: any[]) {\r\n\t\t\tif (!this._taskData.enabled) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.emitter.emitAll(...args);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.9.0\r\n\t\t */\r\n\t\tcemitAll(context: any, ...args: any[]) {\r\n\t\t\tif (!this._taskData.enabled) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.emitter.cemitAll(context, ...args);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * @deprecated 1.7.0\r\n\t\t */\r\n\t\tclear(type: string = '') {\r\n\t\t\tthis._piximData.emitter.clear(type);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tdestroy() {\r\n\t\t\tsuper.destroy();\r\n\t\t\tthis.clear();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ITaskData = Pixim.ITaskData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Task = Pixim.Task;","import * as PIXI from 'pixi.js';\r\nimport { Task } from './Task';\r\nimport { TaskManager } from './TaskManager';\r\nimport { ITickerData } from './Application';\r\n\r\nnamespace Pixim {\r\n\texport interface IContainerData {\r\n\t\ttask: Task,\r\n\t\ttaskEnabledChildren: boolean\r\n\t}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tlet _lastObserverID = 0;\r\n\t\r\n\t/**\r\n\t * [[http://pixijs.download/release/docs/PIXI.Container.html]]\r\n\t */\r\n\texport class Container extends PIXI.Container {\r\n\t\tprotected _piximData: IContainerData;\r\n\t\t\r\n\t\tconstructor(...args: any[]) {\r\n\t\t\tsuper();\r\n\t\t\t\r\n\t\t\tthis._piximData = {\r\n\t\t\t\ttask: new Task([], this),\r\n\t\t\t\ttaskEnabledChildren: true\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tthis._piximData.task.first();\r\n\t\t\t\r\n\t\t\tconst _observerID = _lastObserverID++;\r\n\t\t\t\r\n\t\t\tthis.on('added', () => {\r\n\t\t\t\tTaskManager.addObserver(_observerID, this);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.on('removed', () => {\r\n\t\t\t\tTaskManager.removeObserver(_observerID);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tupdateTask(e: ITickerData) {\r\n\t\t\tconst task: Task = this._piximData.task;\r\n\t\t\t\r\n\t\t\tif (!this.taskEnabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet p: PIXI.DisplayObject = this;\r\n\t\t\tlet f = true;\r\n\t\t\t\r\n\t\t\twhile (p) {\r\n\t\t\t\tif (p instanceof Container && !p.taskEnabledChildren) {\r\n\t\t\t\t\tf = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tp = p.parent;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!f) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttask.done(e);\r\n\t\t\t\r\n\t\t\t// will be deprecated\r\n\t\t\ttask.cemitAll(this, e);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Whether the task works.\r\n\t\t */\r\n\t\tget taskEnabled(): boolean {\r\n\t\t\treturn this._piximData.task.enabled;\r\n\t\t}\r\n\t\t\r\n\t\tset taskEnabled(enabled) {\r\n\t\t\tthis._piximData.task.enabled = enabled;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Whether the children and subsequent tasks work.\r\n\t\t */\r\n\t\tget taskEnabledChildren(): boolean {\r\n\t\t\treturn this._piximData.taskEnabledChildren;\r\n\t\t}\r\n\t\t\r\n\t\tset taskEnabledChildren(enabled) {\r\n\t\t\tthis._piximData.taskEnabledChildren = enabled;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Task object that works only while it is being displayed.\r\n\t\t */\r\n\t\tget task(): Task {\r\n\t\t\treturn this._piximData.task;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Destroy instance.\r\n\t\t * \r\n\t\t * @override\r\n\t\t */\r\n\t\tdestroy(...args: any[]): void {\r\n\t\t\tsuper.destroy(...args);\r\n\t\t\tthis._piximData.task.destroy();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContainerData = Pixim.IContainerData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Container = Pixim.Container;","import * as PIXI from 'pixi.js';\r\n\r\nnamespace Pixim {\r\n\texport interface IManifestDictionary {\r\n\t\t[name: string]: string;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface IPreManifest {\r\n\t\turl: string;\r\n\t\tunrequired: boolean;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface IPreManifestDictionary {\r\n\t\t[name: string]: IPreManifest;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface IPostManifest extends IPreManifest {\r\n\t\tname: string;\r\n\t}\r\n\t\r\n\texport interface IPostManifestDictionary {\r\n\t\t[name: string]: IPostManifest;\r\n\t}\r\n\t\r\n\texport interface IContentManifestOption {\r\n\t\tunrequired?: boolean\r\n\t}\r\n\t\r\n\texport interface ILoadedResource {\r\n\t\tresource: any;\r\n\t\terror: boolean;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface ILoadedResourceDictionary {\r\n\t\t[name: string]: ILoadedResource;\r\n\t}\r\n\t\r\n\texport interface IResourceDictionary {\r\n\t\t[name: string]: any;\r\n\t}\r\n\t\r\n\texport interface IContentResourceDictionary {\r\n\t\t[name: string]: IResourceDictionary;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tconst _cache: IResourceDictionary = {};\r\n\t\r\n\texport abstract class ContentManifestBase {\r\n\t\tprivate _manifests: IPreManifestDictionary = {};\r\n\t\t\r\n\t\t/**\r\n\t\t * Register manifests.\r\n\t\t * \r\n\t\t * @param manifests Defined manifests.\r\n\t\t * @param option Manifest option data.\r\n\t\t */\r\n\t\tadd(manifests: IManifestDictionary, options: IContentManifestOption = {}): void {\r\n\t\t\tconst unrequired: boolean = options.unrequired || false;\r\n\t\t\t\r\n\t\t\tfor (let i in manifests) {\r\n\t\t\t\tthis._manifests[i] = {\r\n\t\t\t\t\turl: manifests[i],\r\n\t\t\t\t\tunrequired\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Get resources.\r\n\t\t * \r\n\t\t * @param basepath Basement directory path of assets.\r\n\t\t */\r\n\t\tgetAsync(basepath: string, version: string): Promise<IResourceDictionary> {\r\n\t\t\tconst manifests: IPreManifestDictionary = this._manifests;\r\n\t\t\t\r\n\t\t\tconst resources: IResourceDictionary = {};\r\n\t\t\tconst loadable: IPostManifestDictionary = {};\r\n\t\t\tconst cache = _cache;\r\n\t\t\t\r\n\t\t\tfor (let i in manifests) {\r\n\t\t\t\tconst manifest: IPreManifest = manifests[i];\r\n\t\t\t\tconst url: string = this._resolvePath(manifest.url, basepath);\r\n\t\t\t\t\r\n\t\t\t\t// query parameter is invalid for resource cache\r\n\t\t\t\tconst name: string = url.replace(/\\?.*/, '');\r\n\t\t\t\t\r\n\t\t\t\tif (cache[name]) {\r\n\t\t\t\t\tresources[i] = cache[name];\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tloadable[i] = {\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tunrequired: manifest.unrequired\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (Object.keys(loadable).length === 0) {\r\n\t\t\t\treturn Promise.resolve(resources);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._loadAsync(loadable, version)\r\n\t\t\t\t.then((res: ILoadedResourceDictionary) => {\r\n\t\t\t\t\tfor (let i in res) {\r\n\t\t\t\t\t\tresources[i] = res[i].resource;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!res[i].error) {\r\n\t\t\t\t\t\t\tcache[loadable[i].name] = res[i].resource;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn resources;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Load resources.\r\n\t\t */\r\n\t\tprotected _loadAsync(manifests: IPostManifestDictionary, version: string): Promise<ILoadedResourceDictionary> {\r\n\t\t\treturn Promise.resolve({});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Normalize asset path.\r\n\t\t */\r\n\t\tprivate _resolvePath(path: string, basepath: string): string {\r\n\t\t\tif (path.indexOf('http://') === 0 || path.indexOf('https://') === 0) {\r\n\t\t\t\treturn path;\r\n\t\t\t} else {\r\n\t\t\t\treturn PIXI.utils.url.resolve(basepath, path);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IManifestDictionary = Pixim.IManifestDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IPostManifestDictionary = Pixim.IPostManifestDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentManifestOption = Pixim.IContentManifestOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ILoadedResource = Pixim.ILoadedResource;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IResourceDictionary = Pixim.IResourceDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentResourceDictionary = Pixim.IContentResourceDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ContentManifestBase = Pixim.ContentManifestBase;","import * as PIXI from 'pixi.js';\r\nimport { ContentManifestBase, IManifestDictionary, IContentManifestOption, IPostManifestDictionary, ILoadedResource } from './ContentManifestBase';\r\n\r\nnamespace Pixim {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface ILoadedImageResource extends ILoadedResource {\r\n\t\tresource: PIXI.Texture\r\n\t}\r\n\t\r\n\texport interface ILoadedImageResourceDictionary {\r\n\t\t[name: string]: ILoadedImageResource;\r\n\t}\r\n\t\r\n\texport class ContentImageManifest extends ContentManifestBase {\r\n\t\t/**\r\n\t\t * Load image resources.\r\n\t\t * \r\n\t\t * @override\r\n\t\t */\r\n\t\tprotected _loadAsync(manifests: IPostManifestDictionary, version: string): Promise<ILoadedImageResourceDictionary> {\r\n\t\t\treturn new Promise((resolve: (resource: ILoadedImageResourceDictionary) => void, reject: (manifest: IManifestDictionary) => void): void => {\r\n\t\t\t\tconst loader: PIXI.Loader = new PIXI.Loader();\r\n\t\t\t\t\r\n\t\t\t\tif (version) {\r\n\t\t\t\t\tloader.defaultQueryString = `_fv=${version}`;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tloader.add(i, manifests[i].url, {\r\n\t\t\t\t\t\tcrossOrigin: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst res: ILoadedImageResourceDictionary = {};\r\n\t\t\t\tloader.load((loader, resources): void => {\r\n\t\t\t\t\tfor (let i in resources) {\r\n\t\t\t\t\t\tconst resource: PIXI.LoaderResource | undefined = resources[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!resource) {\r\n\t\t\t\t\t\t\treject({ [i]: manifests[i].url});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (resource.error && !manifests[i].unrequired) {\r\n\t\t\t\t\t\t\treject({ [i]: manifests[i].url});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tres[i] = {\r\n\t\t\t\t\t\t\tresource: resource.texture,\r\n\t\t\t\t\t\t\terror: !!resource.error\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tresolve(res);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ILoadedImageResourceDictionary = Pixim.ILoadedImageResourceDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ContentImageManifest = Pixim.ContentImageManifest;","import * as PIXI from 'pixi.js';\r\nimport { ContentManifestBase, IManifestDictionary, IContentManifestOption, IPostManifestDictionary, ILoadedResource } from './ContentManifestBase';\r\n\r\nnamespace Pixim {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface ILoadedSpritesheetResource extends ILoadedResource {\r\n\t\tresource: PIXI.ITextureDictionary\r\n\t}\r\n\t\r\n\texport interface ILoadedSpritesheetResourceDictionary {\r\n\t\t[name: string]: ILoadedSpritesheetResource;\r\n\t}\r\n\t\r\n\texport class ContentSpritesheetManifest extends ContentManifestBase {\r\n\t\t/**\r\n\t\t * Load image resources.\r\n\t\t * \r\n\t\t * @override\r\n\t\t */\r\n\t\tprotected _loadAsync(manifests: IPostManifestDictionary, version: string): Promise<ILoadedSpritesheetResourceDictionary> {\r\n\t\t\treturn new Promise((resolve: (resource: ILoadedSpritesheetResourceDictionary) => void, reject: (manifest: IManifestDictionary) => void): void => {\r\n\t\t\t\tconst loader: PIXI.Loader = new PIXI.Loader();\r\n\t\t\t\t\r\n\t\t\t\tif (version) {\r\n\t\t\t\t\tloader.defaultQueryString = `_fv=${version}`;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tloader.add(i, manifests[i].url, {\r\n\t\t\t\t\t\tcrossOrigin: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst res: ILoadedSpritesheetResourceDictionary = {};\r\n\t\t\t\tloader.load((loader, resources): void => {\r\n\t\t\t\t\tfor (let i in resources) {\r\n\t\t\t\t\t\tif (!manifests[i]) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst resource: PIXI.LoaderResource | undefined = resources[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!resource) {\r\n\t\t\t\t\t\t\treject({ [i]: manifests[i].url});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst textures: PIXI.ITextureDictionary = resource.textures || {};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst error: boolean = !!resource.error;\r\n\t\t\t\t\t\tif (resource.error && !manifests[i].unrequired) {\r\n\t\t\t\t\t\t\treject({ [i]: manifests[i].url});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tres[i] = {\r\n\t\t\t\t\t\t\tresource: textures,\r\n\t\t\t\t\t\t\terror: !!resource.error\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tresolve(res);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ILoadedSpritesheetResourceDictionary = Pixim.ILoadedSpritesheetResourceDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ContentSpritesheetManifest = Pixim.ContentSpritesheetManifest;","import { Howl } from 'howler';\r\nimport { ContentManifestBase, IManifestDictionary, IContentManifestOption, IPostManifestDictionary, ILoadedResource } from './ContentManifestBase';\r\n\r\nnamespace Pixim {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface ILoadedSoundResource extends ILoadedResource {\r\n\t\tresource: Howl\r\n\t}\r\n\t\r\n\texport interface ILoadedSoundResourceDictionary{\r\n\t\t[name: string]: ILoadedSoundResource;\r\n\t}\r\n\t\r\n\texport class ContentSoundManifest extends ContentManifestBase {\r\n\t\t/**\r\n\t\t * Load image resources.\r\n\t\t * \r\n\t\t * @override\r\n\t\t */\r\n\t\tprotected _loadAsync(manifests: IPostManifestDictionary, version: string): Promise<ILoadedSoundResourceDictionary> {\r\n\t\t\treturn new Promise((resolve: (resource: ILoadedSoundResourceDictionary) => void, reject: (manifest: IManifestDictionary) => void): void => {\r\n\t\t\t\tconst res: ILoadedSoundResourceDictionary = {};\r\n\t\t\t\t\r\n\t\t\t\tfunction loadedHandler(key: string, howl: Howl, error: boolean): void {\r\n\t\t\t\t\tres[key] = {\r\n\t\t\t\t\t\tresource: howl,\r\n\t\t\t\t\t\terror\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (++loadedCount < loadCount) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tresolve(res);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet loadCount: number = 0;\r\n\t\t\t\tlet loadedCount:number  = 0;\r\n\t\t\t\t\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tif (!Howl) {\r\n\t\t\t\t\t\tconsole.warn('You need \"howler.js\" to load sound asset.');\r\n\t\t\t\t\t\treject({ [i]: manifests[i].url});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t++loadCount;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tconst _i = i;\r\n\t\t\t\t\tconst url =\r\n\t\t\t\t\t\tversion\r\n\t\t\t\t\t\t?`${manifests[_i].url}${manifests[_i].url.match(/\\?/) ? '&' : '?'}_fv=${version}`\r\n\t\t\t\t\t\t: manifests[_i].url;\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst howl = new Howl({\r\n\t\t\t\t\t\tsrc: url,\r\n\t\t\t\t\t\tonload: () => {\r\n\t\t\t\t\t\t\tloadedHandler(_i, howl, false);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonloaderror: () => {\r\n\t\t\t\t\t\t\tif (!manifests[_i].unrequired) {\r\n\t\t\t\t\t\t\t\treject({ [_i]: manifests[_i].url});\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tloadedHandler(_i, howl, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ILoadedSoundResourceDictionary = Pixim.ILoadedSoundResourceDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ContentSoundManifest = Pixim.ContentSoundManifest;","import * as PIXI from 'pixi.js';\r\nimport { Container } from './Container';\r\nimport { IContentResourceDictionary } from './ContentManifestBase';\r\n\r\nnamespace Pixim {\r\n\texport interface IContentLibrary {\r\n\t\t[name: string]: typeof PIXI.Container | typeof Container\r\n\t}\r\n\t\r\n\texport interface IVariableDictionary {\r\n\t\t[name: string]: any;\r\n\t}\r\n\t\r\n\texport interface IContentDeliverData {\r\n\t\twidth: number,\r\n\t\theight: number,\r\n\t\tlib: IContentLibrary,\r\n\t\tresources: IContentResourceDictionary,\r\n\t\tvars: IVariableDictionary\r\n\t}\r\n\t\r\n\texport class ContentDeliver {\r\n\t\tprotected _piximData: IContentDeliverData;\r\n\t\t\r\n\t\tconstructor(data: IContentDeliverData) {\r\n\t\t\tthis._piximData = {\r\n\t\t\t\twidth: data.width,\r\n\t\t\t\theight: data.height,\r\n\t\t\t\tlib: data.lib,\r\n\t\t\t\tresources: data.resources,\r\n\t\t\t\tvars: data.vars\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Content width.\r\n\t\t */\r\n\t\tget width(): number {\r\n\t\t\treturn this._piximData.width;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Content height.\r\n\t\t */\r\n\t\tget height(): number {\r\n\t\t\treturn this._piximData.height;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Defined classes in content.\r\n\t\t */\r\n\t\tget lib(): IContentLibrary {\r\n\t\t\treturn this._piximData.lib;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Loaded resources.\r\n\t\t */\r\n\t\tget resources(): IContentResourceDictionary {\r\n\t\t\treturn this._piximData.resources;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Defined variables by framework.\r\n\t\t */\r\n\t\tget vars() {\r\n\t\t\treturn this._piximData.vars;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentLibrary = Pixim.IContentLibrary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IVariableDictionary = Pixim.IVariableDictionary;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentDeliverData = Pixim.IContentDeliverData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import ContentDeliver = Pixim.ContentDeliver;","import * as PIXI from 'pixi.js';\r\nimport { IResourceDictionary, IContentResourceDictionary, IManifestDictionary, IContentManifestOption } from './ContentManifestBase';\r\nimport { ContentImageManifest } from './ContentImageManifest';\r\nimport { ContentSpritesheetManifest } from './ContentSpritesheetManifest';\r\nimport { ContentSoundManifest } from './ContentSoundManifest';\r\nimport { ContentDeliver, IVariableDictionary, IContentLibrary } from './ContentDeliver';\r\n\r\nnamespace Pixim {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\ttype TContentManifestType = 'images' | 'spritesheets' | 'sounds';\r\n\t\r\n\texport interface IContentAssetVersion {\r\n\t\timages?: string;\r\n\t\tspritesheets?: string;\r\n\t\tsounds?: string;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinterface IContentManifests { \r\n\t\timages: ContentImageManifest;\r\n\t\tspritesheets: ContentSpritesheetManifest;\r\n\t\tsounds: ContentSoundManifest;\r\n\t}\r\n\t\r\n\texport interface IContentConfigData {\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\t}\r\n\t\r\n\texport interface IContentData {\r\n\t\tcontentID: string;\r\n\t\tbasepath: string;\r\n\t\tversion: IContentAssetVersion;\r\n\t\t$: ContentDeliver;\r\n\t\tmanifests: IContentManifests;\r\n\t\tadditionalManifests: IContentManifests;\r\n\t\tpreloadPromise: Promise<void> | null;\r\n\t\tpostloadPromise: Promise<void> | null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tinterface TContents {\r\n\t\t[name: string]: typeof Content;\r\n\t};\r\n\t\r\n\texport interface IContentOption {\r\n\t\t/**\r\n\t\t * Asset root path.\r\n\t\t */\r\n\t\tbasepath?: string;\r\n\t\t\r\n\t\t/**\r\n\t\t * Asset version.\r\n\t\t */\r\n\t\tversion?: string | IContentAssetVersion;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tconst _contents: TContents = {};\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tlet _contentID: number = 0;\r\n\t\r\n\texport interface IContentStaticData {\r\n\t\tconfig: IContentConfigData;\r\n\t\tmanifests: IContentManifests;\r\n\t\tlib: IContentLibrary;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tfunction createManifests(): IContentManifests {\r\n\t\treturn {\r\n\t\t\timages: new ContentImageManifest(),\r\n\t\t\tspritesheets: new ContentSpritesheetManifest(),\r\n\t\t\tsounds: new ContentSoundManifest()\r\n\t\t};\r\n\t}\r\n\t\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tfunction createContentStatic(): IContentStaticData {\r\n\t\treturn {\r\n\t\t\tconfig: {\r\n\t\t\t\twidth: 450,\r\n\t\t\t\theight: 800\r\n\t\t\t},\r\n\t\t\tmanifests: createManifests(),\r\n\t\t\tlib: {}\r\n\t\t};\r\n\t}\r\n\t\r\n\texport class Content {\r\n\t\tprotected static _piximData: IContentStaticData;\r\n\t\tprotected _piximData: IContentData;\r\n\t\t\r\n\t\tconstructor(options: IContentOption = {}, piximData: IContentStaticData = Content._piximData) {\r\n\t\t\tconst basepath: string = (options.basepath || '').replace(/([^/])$/, '$1/');\r\n\t\t\t\r\n\t\t\tif (typeof(options.version) !== 'object') {\r\n\t\t\t\toptions.version = {\r\n\t\t\t\t\timages: options.version || '',\r\n\t\t\t\t\tspritesheets: options.version || '',\r\n\t\t\t\t\tsounds: options.version || ''\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData = {\r\n\t\t\t\tcontentID: (++_contentID).toString(),\r\n\t\t\t\tbasepath,\r\n\t\t\t\tversion: options.version,\r\n\t\t\t\t$: new ContentDeliver({\r\n\t\t\t\t\twidth: piximData.config.width,\r\n\t\t\t\t\theight: piximData.config.height,\r\n\t\t\t\t\tlib: piximData.lib,\r\n\t\t\t\t\tresources: {},\r\n\t\t\t\t\tvars: {}\r\n\t\t\t\t}),\r\n\t\t\t\tmanifests: piximData.manifests,\r\n\t\t\t\tadditionalManifests: createManifests(),\r\n\t\t\t\tpreloadPromise: null,\r\n\t\t\t\tpostloadPromise: null\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Create a cloned content class.\r\n\t\t * \r\n\t\t * @param key Content name.\r\n\t\t * @return Cloned content class.\r\n\t\t */\r\n\t\tstatic create(key: string = ''): typeof Content {\r\n\t\t\tif (key && key in _contents) {\r\n\t\t\t\tthrow new Error(`Content key '${key}' has already exists.`);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tclass ContentClone extends Content {\r\n\t\t\t\tprotected static _piximData: IContentStaticData = createContentStatic();\r\n\t\t\t\t\r\n\t\t\t\tconstructor(options: IContentOption = {}) {\r\n\t\t\t\t\tsuper(options, ContentClone._piximData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!key) {\r\n\t\t\t\treturn ContentClone;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn _contents[key] = ContentClone;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Get cloned content.\r\n\t\t */\r\n\t\tstatic get(key: string) {\r\n\t\t\treturn _contents[key];\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Remove cloned content.\r\n\t\t * \r\n\t\t * @function Pixim.Content.removeContent\r\n\t\t * @param key {string}\r\n\t\t */\r\n\t\tstatic remove(key: string): void {\r\n\t\t\tdelete(_contents[key]);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define assets for class.\r\n\t\t */\r\n\t\tstatic defineManifests(key: TContentManifestType, data: IManifestDictionary, options: IContentManifestOption = {}) {\r\n\t\t\tif (!this._piximData.manifests[key]) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.manifests[key].add(data, options);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define image assets for class.\r\n\t\t */\r\n\t\tstatic defineImages(data: IManifestDictionary, options: IContentManifestOption = {}) {\r\n\t\t\treturn this.defineManifests('images', data, options);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define spritesheet assets for class.\r\n\t\t */\r\n\t\tstatic defineSpritesheets(data: IManifestDictionary, options: IContentManifestOption = {}) {\r\n\t\t\treturn this.defineManifests('spritesheets', data, options);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define sound assets for class.\r\n\t\t */\r\n\t\tstatic defineSounds(data: IManifestDictionary, options: IContentManifestOption = {}) {\r\n\t\t\treturn this.defineManifests('sounds', data, options);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Set the content settings.\r\n\t\t * \r\n\t\t * @param data Config data.\r\n\t\t */\r\n\t\tstatic setConfig(data: IContentConfigData) {\r\n\t\t\t//this._piximData.config.fps = data.fps;\r\n\t\t\tthis._piximData.config.width = data.width;\r\n\t\t\tthis._piximData.config.height = data.height;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define libraries that is material of the content.<br />\r\n\t\t * In the constructor named root, Application passes a reference to ContentDeliver as an argument.<br />\r\n\t\t * By giving this argument to the child further, you will be able to access the data freely from anywhere.\r\n\t\t * \r\n\t\t * @param data Library data.\r\n\t\t */\r\n\t\tstatic defineLibraries(data: IContentLibrary) {\r\n\t\t\tfor (let i in data) {\r\n\t\t\t\tthis._piximData.lib[i] = data[i];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * ID of this content.\r\n\t\t */\r\n\t\tget contentID(): string {\r\n\t\t\treturn this._piximData.contentID;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define assets for instance.\r\n\t\t * \r\n\t\t * @return Returns itself for the method chaining.\r\n\t\t */\r\n\t\taddManifests(key: TContentManifestType, data: IManifestDictionary, options: IContentManifestOption = {}): this {\r\n\t\t\tif (!this._piximData.additionalManifests[key]) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._piximData.additionalManifests[key].add(data, options);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define image assets for instance.\r\n\t\t * \r\n\t\t * @return Returns itself for the method chaining.\r\n\t\t */\r\n\t\taddImages(data: IManifestDictionary, options: IContentManifestOption = {}): this {\r\n\t\t\treturn this.addManifests('images', data, options);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define spritesheet assets for instance.\r\n\t\t * \r\n\t\t * @return Returns itself for the method chaining.\r\n\t\t */\r\n\t\taddSpritesheets(data: IManifestDictionary, options: IContentManifestOption = {}): this {\r\n\t\t\treturn this.addManifests('spritesheets', data, options);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define sound assets for instance.\r\n\t\t * \r\n\t\t * @return Returns itself for the method chaining.\r\n\t\t */\r\n\t\taddSounds(data: IManifestDictionary, options: IContentManifestOption = {}): this {\r\n\t\t\treturn this.addManifests('sounds', data, options);\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Define valriables for instance.\r\n\t\t * \r\n\t\t * @return Returns itself for the method chaining.\r\n\t\t */\r\n\t\taddVars(data: IVariableDictionary): this {\r\n\t\t\tfor (let i in data) {\r\n\t\t\t\t this._piximData.$.vars[i] = data[i];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Prepare content.\r\n\t\t */\r\n\t\tprepareAsync(): Promise<void> {\r\n\t\t\treturn this.preloadClassAssetAsync()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\treturn this.preloadInstanceAssetAsync();\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Build content.\r\n\t\t */\r\n\t\tbuildAsync(): Promise<PIXI.Container> {\r\n\t\t\tif (!this._piximData.$.lib.root) {\r\n\t\t\t\tthrow new Error('There is no library named \"root\" in the content.');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this.prepareAsync()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\treturn new this._piximData.$.lib.root(this._piximData.$);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Preloads class assets.\r\n\t\t */\r\n\t\tpreloadClassAssetAsync(): Promise<void> {\r\n\t\t\tif (this._piximData.preloadPromise) {\r\n\t\t\t\treturn this._piximData.preloadPromise;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._piximData.preloadPromise = this._loadAssetAsync(this._piximData.manifests)\r\n\t\t\t\t.catch((e: IManifestDictionary) => {\r\n\t\t\t\t\tthis._piximData.preloadPromise = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Preloads instance assets.\r\n\t\t */\r\n\t\tpreloadInstanceAssetAsync(): Promise<void> {\r\n\t\t\tif (this._piximData.postloadPromise) {\r\n\t\t\t\treturn this._piximData.postloadPromise;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this._piximData.postloadPromise = this._loadAssetAsync(this._piximData.additionalManifests)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis._piximData.postloadPromise = null;\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e: IManifestDictionary) => {\r\n\t\t\t\t\tthis._piximData.postloadPromise = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tprivate _loadAssetAsync(manifests: IContentManifests): Promise<void> {\r\n\t\t\tconst basepath: string = this._piximData.basepath;\r\n\t\t\tconst version: IContentAssetVersion = this._piximData.version;\r\n\t\t\tconst resources: IContentResourceDictionary = this._piximData.$.resources;\r\n\t\t\t\r\n\t\t\tconst loaderCount = Object.keys(manifests).length;\r\n\t\t\t\r\n\t\t\tif (loaderCount === 0) {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst promises: Promise<IResourceDictionary>[] = [];\r\n\t\t\tconst keys: TContentManifestType[] = [];\r\n\t\t\tfor (let i in manifests) {\r\n\t\t\t\tconst type: TContentManifestType = <TContentManifestType>i;\r\n\t\t\t\tkeys.push(type);\r\n\t\t\t\t\r\n\t\t\t\tpromises.push(manifests[type].getAsync(basepath, version[type] || ''));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn Promise.all(promises)\r\n\t\t\t\t.then((resolver: IResourceDictionary) => {\r\n\t\t\t\t\tfor (let i: number = 0; i < resolver.length;i++) {\r\n\t\t\t\t\t\tresources[keys[i]] = resources[keys[i]] || {};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (let j in resolver[i]) {\r\n\t\t\t\t\t\t\tresources[keys[i]][j] = resolver[i][j];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e: IManifestDictionary) => {\r\n\t\t\t\t\tfor (let i in e) {\r\n\t\t\t\t\t\tconsole.error(`Asset '${i}: ${e[i]}' cannot load.`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentData = Pixim.IContentData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentStaticData = Pixim.IContentStaticData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentConfigData = Pixim.IContentConfigData;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentOption = Pixim.IContentOption;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import IContentAssetVersion = Pixim.IContentAssetVersion;\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport import Content = Pixim.Content;\r\n\r\nexport { IVariableDictionary , IContentLibrary };"],"names":["_Emitter","Pixim","PIXI.Application","PIXI.Container","Task","_Task","PIXI.utils","PIXI.Loader","Howl"],"mappings":"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"}