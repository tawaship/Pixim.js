<body style="margin: 0; overflow: hidden;">
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.2.1/pixi.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.0/howler.min.js"></script>
<script src="../dist/Pixim.js"></script>
<div id="a" style="position: absolute; top: 100px; width: 100px;">
</div>
<script>

const Test = Pixim.Content.create();

Test.setConfig({
	width: 300,
	height: 300
});

Test.defineLibraries({
	root: class Root extends Pixim.Container {
		constructor($) {
			super();
			
			//this.taskEnabledChildren = false;
			
			this.addChild(new PIXI.Graphics())
				.beginFill(0xFFEEEE, 1)
				.drawRect(0, 0, $.width, $.height);
			
			this.task.add(e => {
			this.addChild(new $.lib.main($))
			this.task.reset();
			})
		}
	},
	
	main: class Main extends Pixim.Container {
		constructor($) {
			super();
			
			$.resources.sounds.a.play();
			$.resources.sounds.a.loop(true);
			$.resources.sounds.b.play();
			
			//*
			this.addChild(new PIXI.Graphics())
				.beginFill(0xFFFFFF, 1)
				.drawRect(0, 0, 100, 100);
			//*/
			
			/*
			this.addChild(new PIXI.Sprite($.resources.images.image_1));
			this.addChild(new PIXI.Sprite($.resources.spritesheets.ss_1.ss_1_1)).y = 105;
			this.addChild(new PIXI.Sprite($.resources.spritesheets.ss_1.ss_1_2)).x = 105;
			//*/
			
			//*
			this.addChild(new PIXI.Sprite($.resources.images.image_2));
			this.addChild(new PIXI.Sprite($.resources.spritesheets.ss_2.ss_2_1)).y = 105;
			this.addChild(new PIXI.Sprite($.resources.spritesheets.ss_2.ss_2_2)).x = 105;
			//*/
			
			//*
			
			//*/
			this.task.add(e => {
				this.y += e.delta / 2;
			});
			const a = this.addChild(new $.lib.sub($));
			//a.taskEnabled = false
			//this.taskEnabled = false;
		}
	},
	
	sub: class Sub extends Pixim.Container {
		constructor($) {
			super();
			
			this.task.add([
				e => {
					this.parent.x += e.delta;
					if (this.parent.x > 100) {
						this.task.next();
					}
				},
				e => {
					this.parent.x -= e.delta;
					if (this.parent.x < 0) {
						this.task.next();
					}
				}
			]);
			
			const t = [
				e => {
					this.parent.x += e.delta * 5;
					if (this.parent.x > 100) {
						this.task.next();
					}
				},
				e => {
					this.parent.x -= e.delta * 5;
					if (this.parent.x < 0) {
						this.task.first();
					}
				}
			]
			
			this.task.add(t);
		}
	}
});

Test.defineImages({
	image_1: 'img/image_1.png'
});

Test.defineSpritesheets({
	ss_1: 'img/ss_1.json'
});

Test.defineSounds({
	a: 'sound/a.mp3'
});

const test = new Test({
	version: {
		images: 2,
		spritesheets: 3,
		sounds: 54
	}
});
test.addImages({
	image_2: 'img/image_2.png'
});

test.addSpritesheets({
	ss_2: 'img/ss_2.json'
});

test.addSounds({
	b: 'sound/b.mp3?a=1'
});

const app = new Pixim.Application({width: 300, height: 300}, {autoAdjust: (app)=>{console.log(1);
const rect = {x: 0, y: 0, width: window.innerWidth, height: window.innerHeight};app.fullScreen(rect)}, container: document.getElementById("a")});



app.attachAsync(test)
	.then(() => {
		app.play();
	});
</script>
</body>